{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'./contexts/AuthContext';import'./StartWorkout.css';import'./CountdownTimer.css';import CountdownTimer from'./CountdownTimer';import{API_BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StartWorkout(){var _currentWorkout$curre;const{user}=useAuth();const navigate=useNavigate();const[workouts,setWorkouts]=useState([]);const[workoutsByField,setWorkoutsByField]=useState({});const[currentWorkout,setCurrentWorkout]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showCancelConfirm,setShowCancelConfirm]=useState(false);const[workoutToCancel,setWorkoutToCancel]=useState(null);const[isCancelling,setIsCancelling]=useState(false);const[availableHours,setAvailableHours]=useState(0);useEffect(()=>{// מניעת גלילה של הגוף כשהמסך פתוח\ndocument.body.style.overflow='hidden';// פונקציה לטעינת האימונים העתידיים מהשרת\nconst loadUserHours=async()=>{try{if(!user||!user.id)return;const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/user-hours/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){setAvailableHours(data.availableHours);console.log('שעות זמינות נטענו:',data.availableHours);}}catch(err){console.error('שגיאה בטעינת שעות:',err);}};const fetchWorkouts=async()=>{try{setLoading(true);setError('');if(!user||!user.id){setError('משתמש לא מחובר');setLoading(false);return;}console.log('טוען אימונים עבור משתמש:',user.id);const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/future-workouts/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){console.log('נמצאו אימונים:',data.workouts);console.log('פירוט האימונים:',data.workouts.map(w=>({date:w.date,startTime:w.startTime,endTime:w.endTime,fieldName:w.fieldName})));setWorkouts(data.workouts);// מציאת זמן הסיום האחרון לכל תאריך\nconst workoutsByDate={};data.workouts.forEach(workout=>{if(!workoutsByDate[workout.date]){workoutsByDate[workout.date]=[];}workoutsByDate[workout.date].push(workout);});const lastEndTimeByDate={};Object.keys(workoutsByDate).forEach(date=>{const dayWorkouts=workoutsByDate[date].sort((a,b)=>a.endTime.localeCompare(b.endTime));lastEndTimeByDate[date]=dayWorkouts[dayWorkouts.length-1].endTime;});// סינון אימונים רק לפי זמן הסיום של האימון האחרון ביום\nconst now=new Date();console.log('זמן נוכחי:',now.toISOString());console.log('כל האימונים מהשרת:',data.workouts.length);console.log('פירוט כל האימונים:',data.workouts.map(w=>({date:w.date,startTime:w.startTime,endTime:w.endTime})));const filteredWorkouts=data.workouts.filter(workout=>{// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(workout.date.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=workout.date.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=workout.date;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));const lastEndTime=lastEndTimeByDate[workout.date];const[hours,minutes]=lastEndTime.split(':');// יצירת תאריך עם זמן סיום בזמן מקומי\nconst dayEndTime=new Date(workoutDate);dayEndTime.setHours(parseInt(hours),parseInt(minutes),0,0);// נציג אימונים שעדיין לא הסתיימו לחלוטין (כולל אימונים נוכחיים)\nconst isNotFinished=dayEndTime>now;console.log(\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05EA \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \".concat(workout.date,\" -> \").concat(dateString,\" \").concat(lastEndTime,\" -> \").concat(dayEndTime.toISOString(),\", \\u05DC\\u05D0 \\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD: \").concat(isNotFinished));return isNotFinished;});console.log(\"\\u05E1\\u05D5\\u05E0\\u05E0\\u05D5 \".concat(data.workouts.length-filteredWorkouts.length,\" \\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05D4\\u05D9\\u05D5\\u05DD \\u05E9\\u05DC\\u05D4\\u05DD \\u05DB\\u05D1\\u05E8 \\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD\"));const sortedWorkouts=filteredWorkouts.sort((a,b)=>{const dateA=new Date(a.date+' '+a.startTime);const dateB=new Date(b.date+' '+b.startTime);return dateA-dateB;});// חלוקה לפי תאריך ויצירת אימונים רציפים\nconst workoutsByDateDisplay={};sortedWorkouts.forEach(workout=>{const dateKey=workout.date;if(!workoutsByDateDisplay[dateKey]){workoutsByDateDisplay[dateKey]=[];}// בדיקה אם זה המשך של אימון קיים או אימון חדש\nconst lastWorkoutGroup=workoutsByDateDisplay[dateKey][workoutsByDateDisplay[dateKey].length-1];if(lastWorkoutGroup&&lastWorkoutGroup.length>0){const lastSlot=lastWorkoutGroup[lastWorkoutGroup.length-1];// חישוב הזמן בצורה פשוטה יותר\nconst lastTime=lastSlot.startTime.split(':');const currentTime=workout.startTime.split(':');const lastMinutes=parseInt(lastTime[0])*60+parseInt(lastTime[1]);const currentMinutes=parseInt(currentTime[0])*60+parseInt(currentTime[1]);const timeDiff=currentMinutes-lastMinutes;console.log(\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05EA \\u05E8\\u05E6\\u05D9\\u05E4\\u05D5\\u05EA: \".concat(lastSlot.startTime,\" -> \").concat(workout.startTime,\", \\u05D4\\u05E4\\u05E8\\u05E9: \").concat(timeDiff,\" \\u05D3\\u05E7\\u05D5\\u05EA\"));// אם ההפרש הוא 15 דקות (רבע שעה), זה אותו אימון\nif(timeDiff===15){// המשך של האימון הקיים - רציף\nconsole.log(\"\\u05DE\\u05DE\\u05E9\\u05D9\\u05DA \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E7\\u05D9\\u05D9\\u05DD (\\u05E8\\u05E6\\u05D9\\u05E3 - 15 \\u05D3\\u05E7\\u05D5\\u05EA)\");lastWorkoutGroup.push(workout);}else{// אימון חדש - יש פער אחר\nconsole.log(\"\\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9 (\\u05D4\\u05E4\\u05E8\\u05E9 \".concat(timeDiff,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"));workoutsByDateDisplay[dateKey].push([workout]);}}else{// אימון ראשון ביום\nconsole.log(\"\\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E8\\u05D0\\u05E9\\u05D5\\u05DF \\u05D1\\u05D9\\u05D5\\u05DD\");workoutsByDateDisplay[dateKey].push([workout]);}});setWorkoutsByField(workoutsByDateDisplay);// זיהוי אימון נוכחי\nconst currentTime=new Date();let foundCurrentWorkout=null;for(const[dateKey,workoutGroups]of Object.entries(workoutsByDateDisplay)){for(const workoutGroup of workoutGroups){const firstWorkout=workoutGroup[0];const lastWorkout=workoutGroup[workoutGroup.length-1];// חילוץ תאריך\nlet dateString;if(dateKey.includes('T')){dateString=dateKey.split('T')[0];}else{dateString=dateKey;}const[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// יצירת זמן התחלה וסיום\nconst[startHours,startMinutes]=firstWorkout.startTime.split(':');const[endHours,endMinutes]=lastWorkout.endTime.split(':');const startTime=new Date(workoutDate);startTime.setHours(parseInt(startHours),parseInt(startMinutes),0,0);const endTime=new Date(workoutDate);endTime.setHours(parseInt(endHours),parseInt(endMinutes),0,0);// בדיקה אם האימון נוכחי\nif(currentTime>=startTime&&currentTime<=endTime){foundCurrentWorkout={date:dateKey,workoutGroup:workoutGroup,startTime:firstWorkout.startTime,endTime:lastWorkout.endTime,currentField:workoutGroup.find(w=>{const[wHours,wMinutes]=w.startTime.split(':');const wStartTime=new Date(workoutDate);wStartTime.setHours(parseInt(wHours),parseInt(wMinutes),0,0);const wEndTime=new Date(wStartTime.getTime()+15*60000);// 15 דקות\nreturn currentTime>=wStartTime&&currentTime<=wEndTime;})};break;}}if(foundCurrentWorkout)break;}setCurrentWorkout(foundCurrentWorkout);}else{console.log('לא נמצאו אימונים או שגיאה:',data.message);setError(data.message);setWorkouts([]);setWorkoutsByField({});}}catch(error){console.error('שגיאה בטעינת האימונים:',error);setError('שגיאה בחיבור לשרת. נסה שוב.');setWorkouts([]);setWorkoutsByField({});}finally{setLoading(false);}};loadUserHours();fetchWorkouts();// החזרת הגלילה כשיוצאים מהמסך\nreturn()=>{document.body.style.overflow='unset';};},[user===null||user===void 0?void 0:user.id]);// עדכון הספירה אחורה וזמן נוכחי כל דקה\nuseEffect(()=>{const interval=setInterval(()=>{// עדכון כפוי של הקומפוננטה כדי לעדכן את הספירה אחורה והזמן הנוכחי\nsetWorkouts(prevWorkouts=>[...prevWorkouts]);},60000);// כל דקה\nreturn()=>clearInterval(interval);},[]);// פונקציה לעיצוב התאריך\nconst formatDate=dateString=>{try{const date=new Date(dateString);if(isNaN(date.getTime())){// אם התאריך לא תקין, ננסה פורמט אחר\nconst[year,month,day]=dateString.split('-');const newDate=new Date(year,month-1,day);if(isNaN(newDate.getTime())){return dateString;// נחזיר את המחרוזת המקורית אם לא הצלחנו\n}return newDate.toLocaleDateString('he-IL',{weekday:'long',year:'numeric',month:'long',day:'numeric'});}return date.toLocaleDateString('he-IL',{weekday:'long',year:'numeric',month:'long',day:'numeric'});}catch(error){console.error('שגיאה בעיצוב התאריך:',error);return dateString;}};// פונקציה לעיצוב השעה\nconst formatTime=timeString=>{return timeString.substring(0,5);// HH:MM\n};// פונקציה לחישוב זמן עד האימון\nconst getTimeUntilWorkout=dateKey=>{try{const today=new Date();// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(dateKey.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=dateKey.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=dateKey;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\ntoday.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);const diffTime=workoutDate.getTime()-today.getTime();const diffDays=Math.floor(diffTime/(1000*60*60*24));if(isNaN(diffDays)){return'בקרוב';}if(diffDays===0){return'היום';}else if(diffDays===1){return'מחר';}else if(diffDays===2){return'בעוד יומיים';}else{return\"\\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffDays,\" \\u05D9\\u05DE\\u05D9\\u05DD\");}}catch(error){console.error('שגיאה בחישוב זמן עד האימון:',error);return'בקרוב';}};// פונקציה לספירה אחורה אם זה היום\nconst getCountdownText=(dateKey,workouts)=>{try{const today=new Date();// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(dateKey.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=dateKey.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=dateKey;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\ntoday.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);// תמיד נחשב ספירה אחורה (לא רק אם זה היום)\nconst firstWorkout=workouts[0];if(!firstWorkout||!firstWorkout.startTime){return'האימון התחיל!';}// יצירת תאריך מלא עם שעה (בשימוש זמן מקומי)\nconst[hours,minutes]=firstWorkout.startTime.split(':');const workoutTime=new Date(parseInt(year),parseInt(month)-1,parseInt(day),parseInt(hours),parseInt(minutes));const now=new Date();const diffMs=workoutTime.getTime()-now.getTime();if(diffMs<=0){return'האימון התחיל!';}const diffDays=Math.floor(diffMs/(1000*60*60*24));const diffHours=Math.floor(diffMs%(1000*60*60*24)/(1000*60*60));const diffMinutes=Math.floor(diffMs%(1000*60*60)/(1000*60));if(diffDays>0){return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffDays,\" \\u05D9\\u05DE\\u05D9\\u05DD\");}else if(diffHours>0){return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffHours,\" \\u05E9\\u05E2\\u05D5\\u05EA \\u05D5-\").concat(diffMinutes,\" \\u05D3\\u05E7\\u05D5\\u05EA\");}else{return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffMinutes,\" \\u05D3\\u05E7\\u05D5\\u05EA\");}}catch(error){console.error('שגיאה בחישוב הספירה אחורה:',error);return'האימון מתחיל בקרוב';}};const loadFutureWorkouts=async()=>{try{if(!user||!user.id)return;const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/future-workouts/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){setWorkouts(data.workouts);setWorkoutsByField(data.workoutsByField);console.log('אימונים נטענו מחדש:',data.workouts.length);}}catch(err){console.error('שגיאה בטעינת אימונים:',err);}};const handleCancelWorkout=workoutGroup=>{// הגנה מפני ביטול כפול\nif(isCancelling||showCancelConfirm){console.log('ביטול כבר בתהליך או דיאלוג פתוח, לא ניתן לבטל אימון נוסף');return;}// הצגת דיאלוג אישור\nsetWorkoutToCancel(workoutGroup);setShowCancelConfirm(true);};const confirmCancelWorkout=async()=>{// הגנה מפני לחיצה כפולה\nif(isCancelling){console.log('ביטול כבר בתהליך, מדלג...');return;}// הגדרת מצב ביטול מיד\nsetIsCancelling(true);console.log('מבטל אימון:',workoutToCancel);try{if(!user||!user.id){setError('משתמש לא מחובר');setIsCancelling(false);return;}// יצירת רשימת הזמנות למחיקה\nconst bookingsToDelete=workoutToCancel.map(workout=>{// וידוא שהשעה בפורמט הנכון (HH:MM:SS)\nlet startTime=workout.startTime;if(startTime&&!startTime.includes(':')){startTime=startTime+':00';}return{idField:workout.fieldId,bookingDate:workout.date,startTime:startTime,idUser:user.id};});console.log('מחיקת הזמנות:',bookingsToDelete);const token=localStorage.getItem('authToken');const successfulCancellations=[];const failedCancellations=[];try{// מחיקת כל ההזמנות בנפרד עם מעקב אחרי הצלחות וכשלונות\nfor(const booking of bookingsToDelete){try{// עיבוד התאריך והשעה לפורמט נכון ל-URL\nconst encodedDate=booking.bookingDate;// המרת השעה לפורמט שהשרת מצפה לו (ללא נקודותיים)\nconst encodedTime=booking.startTime.replace(/:/g,'');console.log('מנסה לבטל הזמנה:',{userId:user.id,date:encodedDate,fieldId:booking.idField,time:encodedTime});const response=await fetch(\"\".concat(API_BASE_URL,\"/api/cancel-workout/\").concat(user.id,\"/\").concat(encodedDate,\"/\").concat(booking.idField,\"/\").concat(encodedTime),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){successfulCancellations.push(booking);console.log('✅ בוטל בהצלחה:',booking);}else{failedCancellations.push({booking,error:data.message||'שגיאה לא ידועה'});console.error('❌ כשל בביטול:',booking,data.message);}}catch(bookingError){failedCancellations.push({booking,error:bookingError.message||'שגיאה בחיבור לשרת'});console.error('❌ שגיאה בביטול הזמנה:',booking,bookingError);}}// בדיקה אם כל הביטולים הצליחו\nif(failedCancellations.length===0){console.log('✅ כל האימונים בוטלו בהצלחה');setError('');// רענון רשימת האימונים והשעות\nloadFutureWorkouts();loadUserHours();// סגירת דיאלוג האישור אחרי העדכון\nsetTimeout(()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);setIsCancelling(false);},1000);// המתנה של שנייה כדי לראות את הגלגל\n}else if(successfulCancellations.length>0){// ביטול חלקי - הצגת שגיאה מפורטת\nconst errorMessage=\"\\u05D1\\u05D5\\u05D8\\u05DC\\u05D5 \".concat(successfulCancellations.length,\" \\u05DE\\u05EA\\u05D5\\u05DA \").concat(bookingsToDelete.length,\" \\u05D4\\u05D6\\u05DE\\u05E0\\u05D5\\u05EA. \\n          \\u05DB\\u05E9\\u05DC\\u05D5\\u05E0\\u05D5\\u05EA: \").concat(failedCancellations.map(f=>f.error).join(', '));setError(errorMessage);console.warn('⚠️ ביטול חלקי:',errorMessage);// עדיין נסגור את הדיאלוג ונעדכן את הרשימה\nloadFutureWorkouts();loadUserHours();setTimeout(()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);setIsCancelling(false);},1000);}else{// כל הביטולים נכשלו\nconst errorMessage=\"\\u05DB\\u05DC \\u05D4\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\\u05D9\\u05DD \\u05E0\\u05DB\\u05E9\\u05DC\\u05D5: \".concat(failedCancellations.map(f=>f.error).join(', '));setError(errorMessage);console.error('❌ כל הביטולים נכשלו:',errorMessage);setIsCancelling(false);}}catch(error){console.error('שגיאה כללית בביטול האימון:',error);setError('שגיאה בחיבור לשרת. נסה שוב.');setIsCancelling(false);}}catch(error){console.error('שגיאה בביטול האימון:',error);setError('שגיאה בחיבור לשרת. נסה שוב.');setIsCancelling(false);}};const cancelCancelWorkout=()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);setIsCancelling(false);};const handleBookNewWorkout=()=>{console.log('מעבר להזמנת אימון חדש');// מעבר למסך הזמנת אימון\nnavigate('/workout-booking');};return/*#__PURE__*/_jsxs(\"div\",{className:\"start-workout-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate('/main-menu'),disabled:isCancelling,children:isCancelling?'מבטל...':'חזרה'}),/*#__PURE__*/_jsxs(\"div\",{className:\"start-workout-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"workout-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"available-hours\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hours-label\",children:\"\\u05E9\\u05E2\\u05D5\\u05EA \\u05D6\\u05DE\\u05D9\\u05E0\\u05D5\\u05EA:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"hours-value\",children:[availableHours,\" \\u05E8\\u05D1\\u05E2\\u05D9 \\u05E9\\u05E2\\u05D4\"]})]})]}),currentWorkout&&/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"current-workout-title\",children:\"\\uD83C\\uDFC3\\u200D\\u2642\\uFE0F \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"field-label\",children:\"\\u05DE\\u05D2\\u05E8\\u05E9 \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"field-name\",children:((_currentWorkout$curre=currentWorkout.currentField)===null||_currentWorkout$curre===void 0?void 0:_currentWorkout$curre.fieldName)||'לא זמין'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-time\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time-label\",children:\"\\u05D6\\u05DE\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"time-value\",children:new Date().toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"workout-duration\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"duration-label\",children:\"\\u05DE\\u05E9\\u05DA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"duration-value\",children:[currentWorkout.startTime,\" - \",currentWorkout.endTime]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"current-workout-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cancel-current-workout-btn\",onClick:()=>handleCancelWorkout(currentWorkout.workoutGroup),disabled:isCancelling||showCancelConfirm,children:isCancelling?'מבטל...':showCancelConfirm?'ממתין לאישור...':'בטל אימון נוכחי'})})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA \\u05DE\\u05D4\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA...\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"no-workouts\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4: \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"no-workouts-button\",onClick:()=>window.location.reload(),children:\"\\u05E0\\u05E1\\u05D4 \\u05E9\\u05D5\\u05D1\"})]}):workouts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-workouts\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D0\\u05D9\\u05DF \\u05DC\\u05DA \\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E2\\u05EA\\u05D9\\u05D3\\u05D9\\u05D9\\u05DD \\u05DE\\u05EA\\u05D5\\u05DB\\u05E0\\u05E0\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"no-workouts-button\",onClick:handleBookNewWorkout,children:\"\\u05D4\\u05D6\\u05DE\\u05DF \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"workouts-list\",children:Object.entries(workoutsByField).map(_ref=>{let[dateKey,workoutGroups]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"date-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"date-title\",children:[\"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \",formatDate(dateKey)]}),workoutGroups.map((workoutGroup,groupIndex)=>{const firstWorkout=workoutGroup[0];const lastWorkout=workoutGroup[workoutGroup.length-1];const totalDuration=workoutGroup.length*15;// כל שיבוץ הוא 15 דקות\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"workout-session\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"workout-session-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"workout-time-range\",children:[formatTime(firstWorkout.startTime),\" - \",formatTime(lastWorkout.endTime),\" (\",totalDuration,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workout-schedule\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u05DC\\u05D5\\u05D7 \\u05D6\\u05DE\\u05E0\\u05D9\\u05DD:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-slots\",children:workoutGroup.map((slot,index)=>{const startTime=slot.startTime;const endTime=slot.endTime;const isValidTime=startTime&&endTime&&startTime!==endTime;return/*#__PURE__*/_jsxs(\"div\",{className:\"time-slot\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:isValidTime?\"\".concat(formatTime(startTime),\" - \").concat(formatTime(endTime)):\"\".concat(formatTime(startTime),\" (15 \\u05D3\\u05E7\\u05D5\\u05EA)\")}),/*#__PURE__*/_jsx(\"span\",{className:\"field\",children:slot.fieldName}),/*#__PURE__*/_jsx(\"span\",{className:\"sport\",children:slot.sportType})]},index);})})]}),/*#__PURE__*/_jsx(CountdownTimer,{targetDate:dateKey,targetTime:firstWorkout.startTime,workoutGroup:workoutGroup,onComplete:()=>console.log('אימון הושלם:',\"\".concat(dateKey,\"_\").concat(groupIndex))}),(()=>{const today=new Date();// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(dateKey.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=dateKey.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=dateKey;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));today.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);const isToday=today.getTime()===workoutDate.getTime();return/*#__PURE__*/_jsx(\"button\",{className:\"cancel-workout-btn\",onClick:()=>handleCancelWorkout(workoutGroup),style:{marginTop:'15px'},disabled:isCancelling||showCancelConfirm,children:isCancelling?'מבטל...':showCancelConfirm?'ממתין לאישור...':'בטל אימון'});})()]},groupIndex);})]},dateKey);})})]}),isCancelling&&/*#__PURE__*/_jsx(\"div\",{className:\"cancelling-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cancelling-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u05DE\\u05D1\\u05D8\\u05DC \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"cancelling-subtitle\",children:\"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DE\\u05EA\\u05DF, \\u05D6\\u05D4 \\u05D9\\u05DB\\u05D5\\u05DC \\u05DC\\u05E7\\u05D7\\u05EA \\u05DB\\u05DE\\u05D4 \\u05E9\\u05E0\\u05D9\\u05D5\\u05EA\"})]})}),showCancelConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8 \\u05D1\\u05D9\\u05D8\\u05D5\\u05DC \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D4\\u05D0\\u05DD \\u05D0\\u05EA\\u05D4 \\u05D1\\u05D8\\u05D5\\u05D7 \\u05E9\\u05D1\\u05E8\\u05E6\\u05D5\\u05E0\\u05DA \\u05DC\\u05D1\\u05D8\\u05DC \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"confirm-dialog-warning\",children:\"\\u26A0\\uFE0F \\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05D6\\u05D5 \\u05DC\\u05D0 \\u05E0\\u05D9\\u05EA\\u05E0\\u05EA \\u05DC\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn cancel-btn\",onClick:cancelCancelWorkout,disabled:isCancelling,children:\"\\u05DC\\u05D0, \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E2\\u05DC \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-cancel-btn\",onClick:confirmCancelWorkout,disabled:isCancelling,children:isCancelling?'מבטל...':'כן, בטל את האימון'})]})]})})]});}export default StartWorkout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","CountdownTimer","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","StartWorkout","_currentWorkout$curre","user","navigate","workouts","setWorkouts","workoutsByField","setWorkoutsByField","currentWorkout","setCurrentWorkout","loading","setLoading","error","setError","showCancelConfirm","setShowCancelConfirm","workoutToCancel","setWorkoutToCancel","isCancelling","setIsCancelling","availableHours","setAvailableHours","document","body","style","overflow","loadUserHours","id","token","localStorage","getItem","response","fetch","concat","headers","data","json","success","console","log","err","fetchWorkouts","map","w","date","startTime","endTime","fieldName","workoutsByDate","forEach","workout","push","lastEndTimeByDate","Object","keys","dayWorkouts","sort","a","b","localeCompare","length","now","Date","toISOString","filteredWorkouts","filter","dateString","includes","split","year","month","day","workoutDate","parseInt","lastEndTime","hours","minutes","dayEndTime","setHours","isNotFinished","sortedWorkouts","dateA","dateB","workoutsByDateDisplay","dateKey","lastWorkoutGroup","lastSlot","lastTime","currentTime","lastMinutes","currentMinutes","timeDiff","foundCurrentWorkout","workoutGroups","entries","workoutGroup","firstWorkout","lastWorkout","startHours","startMinutes","endHours","endMinutes","currentField","find","wHours","wMinutes","wStartTime","wEndTime","getTime","message","interval","setInterval","prevWorkouts","clearInterval","formatDate","isNaN","newDate","toLocaleDateString","weekday","formatTime","timeString","substring","getTimeUntilWorkout","today","diffTime","diffDays","Math","floor","getCountdownText","workoutTime","diffMs","diffHours","diffMinutes","loadFutureWorkouts","handleCancelWorkout","confirmCancelWorkout","bookingsToDelete","idField","fieldId","bookingDate","idUser","successfulCancellations","failedCancellations","booking","encodedDate","encodedTime","replace","userId","time","method","bookingError","setTimeout","errorMessage","f","join","warn","cancelCancelWorkout","handleBookNewWorkout","className","children","onClick","disabled","toLocaleTimeString","hour","minute","window","location","reload","_ref","groupIndex","totalDuration","slot","index","isValidTime","sportType","targetDate","targetTime","onComplete","isToday","marginTop"],"sources":["/Users/omri/Desktop/wolfit-gym/frontend/src/StartWorkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './contexts/AuthContext';\nimport './StartWorkout.css';\nimport './CountdownTimer.css';\nimport CountdownTimer from './CountdownTimer';\nimport { API_BASE_URL } from './config';\n\nfunction StartWorkout() {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [workouts, setWorkouts] = useState([]);\n  const [workoutsByField, setWorkoutsByField] = useState({});\n  const [currentWorkout, setCurrentWorkout] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showCancelConfirm, setShowCancelConfirm] = useState(false);\n  const [workoutToCancel, setWorkoutToCancel] = useState(null);\n  const [isCancelling, setIsCancelling] = useState(false);\n  const [availableHours, setAvailableHours] = useState(0);\n\n  useEffect(() => {\n    // מניעת גלילה של הגוף כשהמסך פתוח\n    document.body.style.overflow = 'hidden';\n    \n    // פונקציה לטעינת האימונים העתידיים מהשרת\n    const loadUserHours = async () => {\n      try {\n        if (!user || !user.id) return;\n        \n        const token = localStorage.getItem('authToken');\n        const response = await fetch(`${API_BASE_URL}/api/user-hours/${user.id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        const data = await response.json();\n        if (data.success) {\n          setAvailableHours(data.availableHours);\n          console.log('שעות זמינות נטענו:', data.availableHours);\n        }\n      } catch (err) {\n        console.error('שגיאה בטעינת שעות:', err);\n      }\n    };\n    \n    const fetchWorkouts = async () => {\n      try {\n        setLoading(true);\n        setError('');\n        \n        if (!user || !user.id) {\n          setError('משתמש לא מחובר');\n          setLoading(false);\n          return;\n        }\n        \n        console.log('טוען אימונים עבור משתמש:', user.id);\n        \n        const token = localStorage.getItem('authToken');\n        const response = await fetch(`${API_BASE_URL}/api/future-workouts/${user.id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        const data = await response.json();\n        \n        if (data.success) {\n          console.log('נמצאו אימונים:', data.workouts);\n          console.log('פירוט האימונים:', data.workouts.map(w => ({\n            date: w.date,\n            startTime: w.startTime,\n            endTime: w.endTime,\n            fieldName: w.fieldName\n          })));\n          setWorkouts(data.workouts);\n          \n          // מציאת זמן הסיום האחרון לכל תאריך\n          const workoutsByDate = {};\n          data.workouts.forEach(workout => {\n            if (!workoutsByDate[workout.date]) {\n              workoutsByDate[workout.date] = [];\n            }\n            workoutsByDate[workout.date].push(workout);\n          });\n\n          const lastEndTimeByDate = {};\n          Object.keys(workoutsByDate).forEach(date => {\n            const dayWorkouts = workoutsByDate[date].sort((a, b) => a.endTime.localeCompare(b.endTime));\n            lastEndTimeByDate[date] = dayWorkouts[dayWorkouts.length - 1].endTime;\n          });\n\n          // סינון אימונים רק לפי זמן הסיום של האימון האחרון ביום\n          const now = new Date();\n          console.log('זמן נוכחי:', now.toISOString());\n          console.log('כל האימונים מהשרת:', data.workouts.length);\n          console.log('פירוט כל האימונים:', data.workouts.map(w => ({ date: w.date, startTime: w.startTime, endTime: w.endTime })));\n          \n          const filteredWorkouts = data.workouts.filter(workout => {\n            // חילוץ תאריך מהמחרוזת UTC\n            let dateString;\n            if (workout.date.includes('T')) {\n              // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n              dateString = workout.date.split('T')[0];\n            } else {\n              // אם זה כבר פורמט YYYY-MM-DD\n              dateString = workout.date;\n            }\n            \n            // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n            const [year, month, day] = dateString.split('-');\n            const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n            \n            const lastEndTime = lastEndTimeByDate[workout.date];\n            const [hours, minutes] = lastEndTime.split(':');\n            \n            // יצירת תאריך עם זמן סיום בזמן מקומי\n            const dayEndTime = new Date(workoutDate);\n            dayEndTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\n            \n            // נציג אימונים שעדיין לא הסתיימו לחלוטין (כולל אימונים נוכחיים)\n            const isNotFinished = dayEndTime > now;\n            console.log(`בדיקת תאריך: ${workout.date} -> ${dateString} ${lastEndTime} -> ${dayEndTime.toISOString()}, לא הסתיים: ${isNotFinished}`);\n            return isNotFinished;\n          });\n          \n          console.log(`סוננו ${data.workouts.length - filteredWorkouts.length} אימונים שהיום שלהם כבר הסתיים`);\n          \n          const sortedWorkouts = filteredWorkouts.sort((a, b) => {\n            const dateA = new Date(a.date + ' ' + a.startTime);\n            const dateB = new Date(b.date + ' ' + b.startTime);\n            return dateA - dateB;\n          });\n\n          // חלוקה לפי תאריך ויצירת אימונים רציפים\n          const workoutsByDateDisplay = {};\n          sortedWorkouts.forEach(workout => {\n            const dateKey = workout.date;\n            if (!workoutsByDateDisplay[dateKey]) {\n              workoutsByDateDisplay[dateKey] = [];\n            }\n            \n            // בדיקה אם זה המשך של אימון קיים או אימון חדש\n            const lastWorkoutGroup = workoutsByDateDisplay[dateKey][workoutsByDateDisplay[dateKey].length - 1];\n            if (lastWorkoutGroup && lastWorkoutGroup.length > 0) {\n              const lastSlot = lastWorkoutGroup[lastWorkoutGroup.length - 1];\n              \n              // חישוב הזמן בצורה פשוטה יותר\n              const lastTime = lastSlot.startTime.split(':');\n              const currentTime = workout.startTime.split(':');\n              const lastMinutes = parseInt(lastTime[0]) * 60 + parseInt(lastTime[1]);\n              const currentMinutes = parseInt(currentTime[0]) * 60 + parseInt(currentTime[1]);\n              const timeDiff = currentMinutes - lastMinutes;\n              \n              console.log(`בדיקת רציפות: ${lastSlot.startTime} -> ${workout.startTime}, הפרש: ${timeDiff} דקות`);\n              \n              // אם ההפרש הוא 15 דקות (רבע שעה), זה אותו אימון\n              if (timeDiff === 15) {\n                // המשך של האימון הקיים - רציף\n                console.log(`ממשיך אימון קיים (רציף - 15 דקות)`);\n                lastWorkoutGroup.push(workout);\n              } else {\n                // אימון חדש - יש פער אחר\n                console.log(`יוצר אימון חדש (הפרש ${timeDiff} דקות)`);\n                workoutsByDateDisplay[dateKey].push([workout]);\n              }\n            } else {\n              // אימון ראשון ביום\n              console.log(`יוצר אימון ראשון ביום`);\n              workoutsByDateDisplay[dateKey].push([workout]);\n            }\n          });\n\n          setWorkoutsByField(workoutsByDateDisplay);\n          \n          // זיהוי אימון נוכחי\n          const currentTime = new Date();\n          let foundCurrentWorkout = null;\n          \n          for (const [dateKey, workoutGroups] of Object.entries(workoutsByDateDisplay)) {\n            for (const workoutGroup of workoutGroups) {\n              const firstWorkout = workoutGroup[0];\n              const lastWorkout = workoutGroup[workoutGroup.length - 1];\n              \n              // חילוץ תאריך\n              let dateString;\n              if (dateKey.includes('T')) {\n                dateString = dateKey.split('T')[0];\n              } else {\n                dateString = dateKey;\n              }\n              \n              const [year, month, day] = dateString.split('-');\n              const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n              \n              // יצירת זמן התחלה וסיום\n              const [startHours, startMinutes] = firstWorkout.startTime.split(':');\n              const [endHours, endMinutes] = lastWorkout.endTime.split(':');\n              \n              const startTime = new Date(workoutDate);\n              startTime.setHours(parseInt(startHours), parseInt(startMinutes), 0, 0);\n              \n              const endTime = new Date(workoutDate);\n              endTime.setHours(parseInt(endHours), parseInt(endMinutes), 0, 0);\n              \n              // בדיקה אם האימון נוכחי\n              if (currentTime >= startTime && currentTime <= endTime) {\n                foundCurrentWorkout = {\n                  date: dateKey,\n                  workoutGroup: workoutGroup,\n                  startTime: firstWorkout.startTime,\n                  endTime: lastWorkout.endTime,\n                  currentField: workoutGroup.find(w => {\n                    const [wHours, wMinutes] = w.startTime.split(':');\n                    const wStartTime = new Date(workoutDate);\n                    wStartTime.setHours(parseInt(wHours), parseInt(wMinutes), 0, 0);\n                    const wEndTime = new Date(wStartTime.getTime() + 15 * 60000); // 15 דקות\n                    return currentTime >= wStartTime && currentTime <= wEndTime;\n                  })\n                };\n                break;\n              }\n            }\n            if (foundCurrentWorkout) break;\n          }\n          \n          setCurrentWorkout(foundCurrentWorkout);\n        } else {\n          console.log('לא נמצאו אימונים או שגיאה:', data.message);\n          setError(data.message);\n          setWorkouts([]);\n          setWorkoutsByField({});\n        }\n        \n      } catch (error) {\n        console.error('שגיאה בטעינת האימונים:', error);\n        setError('שגיאה בחיבור לשרת. נסה שוב.');\n        setWorkouts([]);\n        setWorkoutsByField({});\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUserHours();\n    fetchWorkouts();\n\n    // החזרת הגלילה כשיוצאים מהמסך\n    return () => {\n      document.body.style.overflow = 'unset';\n    };\n  }, [user?.id]);\n\n  // עדכון הספירה אחורה וזמן נוכחי כל דקה\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // עדכון כפוי של הקומפוננטה כדי לעדכן את הספירה אחורה והזמן הנוכחי\n      setWorkouts(prevWorkouts => [...prevWorkouts]);\n    }, 60000); // כל דקה\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // פונקציה לעיצוב התאריך\n  const formatDate = (dateString) => {\n    try {\n      const date = new Date(dateString);\n      if (isNaN(date.getTime())) {\n        // אם התאריך לא תקין, ננסה פורמט אחר\n        const [year, month, day] = dateString.split('-');\n        const newDate = new Date(year, month - 1, day);\n        if (isNaN(newDate.getTime())) {\n          return dateString; // נחזיר את המחרוזת המקורית אם לא הצלחנו\n        }\n        return newDate.toLocaleDateString('he-IL', {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        });\n      }\n      return date.toLocaleDateString('he-IL', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch (error) {\n      console.error('שגיאה בעיצוב התאריך:', error);\n      return dateString;\n    }\n  };\n\n  // פונקציה לעיצוב השעה\n  const formatTime = (timeString) => {\n    return timeString.substring(0, 5); // HH:MM\n  };\n\n  // פונקציה לחישוב זמן עד האימון\n  const getTimeUntilWorkout = (dateKey) => {\n    try {\n      const today = new Date();\n      \n      // חילוץ תאריך מהמחרוזת UTC\n      let dateString;\n      if (dateKey.includes('T')) {\n        // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n        dateString = dateKey.split('T')[0];\n      } else {\n        // אם זה כבר פורמט YYYY-MM-DD\n        dateString = dateKey;\n      }\n      \n      // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n      const [year, month, day] = dateString.split('-');\n      const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      \n      // איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\n      today.setHours(0, 0, 0, 0);\n      workoutDate.setHours(0, 0, 0, 0);\n      \n      const diffTime = workoutDate.getTime() - today.getTime();\n      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n      \n      if (isNaN(diffDays)) {\n        return 'בקרוב';\n      }\n      \n      if (diffDays === 0) {\n        return 'היום';\n      } else if (diffDays === 1) {\n        return 'מחר';\n      } else if (diffDays === 2) {\n        return 'בעוד יומיים';\n      } else {\n        return `בעוד ${diffDays} ימים`;\n      }\n    } catch (error) {\n      console.error('שגיאה בחישוב זמן עד האימון:', error);\n      return 'בקרוב';\n    }\n  };\n\n  // פונקציה לספירה אחורה אם זה היום\n  const getCountdownText = (dateKey, workouts) => {\n    try {\n      const today = new Date();\n      \n      // חילוץ תאריך מהמחרוזת UTC\n      let dateString;\n      if (dateKey.includes('T')) {\n        // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n        dateString = dateKey.split('T')[0];\n      } else {\n        // אם זה כבר פורמט YYYY-MM-DD\n        dateString = dateKey;\n      }\n      \n      // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n      const [year, month, day] = dateString.split('-');\n      const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      \n      // איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\n      today.setHours(0, 0, 0, 0);\n      workoutDate.setHours(0, 0, 0, 0);\n      \n      // תמיד נחשב ספירה אחורה (לא רק אם זה היום)\n      const firstWorkout = workouts[0];\n      if (!firstWorkout || !firstWorkout.startTime) {\n        return 'האימון התחיל!';\n      }\n      \n      // יצירת תאריך מלא עם שעה (בשימוש זמן מקומי)\n      const [hours, minutes] = firstWorkout.startTime.split(':');\n      const workoutTime = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(hours), parseInt(minutes));\n      const now = new Date();\n      \n      const diffMs = workoutTime.getTime() - now.getTime();\n      \n      if (diffMs <= 0) {\n        return 'האימון התחיל!';\n      }\n      \n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n      const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n      \n      if (diffDays > 0) {\n        return `האימון מתחיל בעוד ${diffDays} ימים`;\n      } else if (diffHours > 0) {\n        return `האימון מתחיל בעוד ${diffHours} שעות ו-${diffMinutes} דקות`;\n      } else {\n        return `האימון מתחיל בעוד ${diffMinutes} דקות`;\n      }\n    } catch (error) {\n      console.error('שגיאה בחישוב הספירה אחורה:', error);\n      return 'האימון מתחיל בקרוב';\n    }\n  };\n\n  const loadFutureWorkouts = async () => {\n    try {\n      if (!user || !user.id) return;\n      \n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/future-workouts/${user.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        setWorkouts(data.workouts);\n        setWorkoutsByField(data.workoutsByField);\n        console.log('אימונים נטענו מחדש:', data.workouts.length);\n      }\n    } catch (err) {\n      console.error('שגיאה בטעינת אימונים:', err);\n    }\n  };\n\n  const handleCancelWorkout = (workoutGroup) => {\n    // הגנה מפני ביטול כפול\n    if (isCancelling || showCancelConfirm) {\n      console.log('ביטול כבר בתהליך או דיאלוג פתוח, לא ניתן לבטל אימון נוסף');\n      return;\n    }\n    \n    // הצגת דיאלוג אישור\n    setWorkoutToCancel(workoutGroup);\n    setShowCancelConfirm(true);\n  };\n\n  const confirmCancelWorkout = async () => {\n    // הגנה מפני לחיצה כפולה\n    if (isCancelling) {\n      console.log('ביטול כבר בתהליך, מדלג...');\n      return;\n    }\n\n    // הגדרת מצב ביטול מיד\n    setIsCancelling(true);\n    console.log('מבטל אימון:', workoutToCancel);\n\n    try {\n      \n      if (!user || !user.id) {\n        setError('משתמש לא מחובר');\n        setIsCancelling(false);\n        return;\n      }\n\n      // יצירת רשימת הזמנות למחיקה\n      const bookingsToDelete = workoutToCancel.map(workout => {\n        // וידוא שהשעה בפורמט הנכון (HH:MM:SS)\n        let startTime = workout.startTime;\n        if (startTime && !startTime.includes(':')) {\n          startTime = startTime + ':00';\n        }\n        \n        return {\n          idField: workout.fieldId,\n          bookingDate: workout.date,\n          startTime: startTime,\n          idUser: user.id\n        };\n      });\n\n      console.log('מחיקת הזמנות:', bookingsToDelete);\n\n      const token = localStorage.getItem('authToken');\n      const successfulCancellations = [];\n      const failedCancellations = [];\n      \n      try {\n        // מחיקת כל ההזמנות בנפרד עם מעקב אחרי הצלחות וכשלונות\n        for (const booking of bookingsToDelete) {\n          try {\n            // עיבוד התאריך והשעה לפורמט נכון ל-URL\n            const encodedDate = booking.bookingDate;\n            // המרת השעה לפורמט שהשרת מצפה לו (ללא נקודותיים)\n            const encodedTime = booking.startTime.replace(/:/g, '');\n            \n            console.log('מנסה לבטל הזמנה:', {\n              userId: user.id,\n              date: encodedDate,\n              fieldId: booking.idField,\n              time: encodedTime\n            });\n            \n            const response = await fetch(\n              `${API_BASE_URL}/api/cancel-workout/${user.id}/${encodedDate}/${booking.idField}/${encodedTime}`,\n              {\n                method: 'DELETE',\n                headers: {\n                  'Authorization': `Bearer ${token}`,\n                  'Content-Type': 'application/json',\n                }\n              });\n\n            const data = await response.json();\n            \n            if (data.success) {\n              successfulCancellations.push(booking);\n              console.log('✅ בוטל בהצלחה:', booking);\n            } else {\n              failedCancellations.push({\n                booking,\n                error: data.message || 'שגיאה לא ידועה'\n              });\n              console.error('❌ כשל בביטול:', booking, data.message);\n            }\n          } catch (bookingError) {\n            failedCancellations.push({\n              booking,\n              error: bookingError.message || 'שגיאה בחיבור לשרת'\n            });\n            console.error('❌ שגיאה בביטול הזמנה:', booking, bookingError);\n          }\n        }\n        \n        // בדיקה אם כל הביטולים הצליחו\n        if (failedCancellations.length === 0) {\n          console.log('✅ כל האימונים בוטלו בהצלחה');\n          setError('');\n          // רענון רשימת האימונים והשעות\n          loadFutureWorkouts();\n          loadUserHours();\n          // סגירת דיאלוג האישור אחרי העדכון\n          setTimeout(() => {\n            setShowCancelConfirm(false);\n            setWorkoutToCancel(null);\n            setIsCancelling(false);\n          }, 1000); // המתנה של שנייה כדי לראות את הגלגל\n        } else if (successfulCancellations.length > 0) {\n          // ביטול חלקי - הצגת שגיאה מפורטת\n          const errorMessage = `בוטלו ${successfulCancellations.length} מתוך ${bookingsToDelete.length} הזמנות. \n          כשלונות: ${failedCancellations.map(f => f.error).join(', ')}`;\n          setError(errorMessage);\n          console.warn('⚠️ ביטול חלקי:', errorMessage);\n          // עדיין נסגור את הדיאלוג ונעדכן את הרשימה\n          loadFutureWorkouts();\n          loadUserHours();\n          setTimeout(() => {\n            setShowCancelConfirm(false);\n            setWorkoutToCancel(null);\n            setIsCancelling(false);\n          }, 1000);\n        } else {\n          // כל הביטולים נכשלו\n          const errorMessage = `כל הביטולים נכשלו: ${failedCancellations.map(f => f.error).join(', ')}`;\n          setError(errorMessage);\n          console.error('❌ כל הביטולים נכשלו:', errorMessage);\n          setIsCancelling(false);\n        }\n      } catch (error) {\n        console.error('שגיאה כללית בביטול האימון:', error);\n        setError('שגיאה בחיבור לשרת. נסה שוב.');\n        setIsCancelling(false);\n      }\n    } catch (error) {\n      console.error('שגיאה בביטול האימון:', error);\n      setError('שגיאה בחיבור לשרת. נסה שוב.');\n      setIsCancelling(false);\n    }\n  };\n\n  const cancelCancelWorkout = () => {\n    setShowCancelConfirm(false);\n    setWorkoutToCancel(null);\n    setIsCancelling(false);\n  };\n\n  const handleBookNewWorkout = () => {\n    console.log('מעבר להזמנת אימון חדש');\n    // מעבר למסך הזמנת אימון\n    navigate('/workout-booking');\n  };\n\n  return (\n    <div className=\"start-workout-container\">\n      <button \n        className=\"back-button\" \n        onClick={() => navigate('/main-menu')}\n        disabled={isCancelling}\n      >\n        {isCancelling ? 'מבטל...' : 'חזרה'}\n      </button>\n      \n      <div className=\"start-workout-content\">\n        <div className=\"workout-header\">\n          <h1>האימונים שלך</h1>\n          <div className=\"available-hours\">\n            <span className=\"hours-label\">שעות זמינות:</span>\n            <span className=\"hours-value\">{availableHours} רבעי שעה</span>\n          </div>\n        </div>\n        \n        {/* חלון אימון נוכחי */}\n        {currentWorkout && (\n          <div className=\"current-workout-section\">\n            <h2 className=\"current-workout-title\">🏃‍♂️ אימון נוכחי</h2>\n            <div className=\"current-workout-card\">\n              <div className=\"current-workout-info\">\n                <div className=\"current-field\">\n                  <span className=\"field-label\">מגרש נוכחי:</span>\n                  <span className=\"field-name\">{currentWorkout.currentField?.fieldName || 'לא זמין'}</span>\n                </div>\n                <div className=\"current-time\">\n                  <span className=\"time-label\">זמן נוכחי:</span>\n                  <span className=\"time-value\">{new Date().toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })}</span>\n                </div>\n                <div className=\"workout-duration\">\n                  <span className=\"duration-label\">משך האימון:</span>\n                  <span className=\"duration-value\">{currentWorkout.startTime} - {currentWorkout.endTime}</span>\n                </div>\n              </div>\n              <div className=\"current-workout-actions\">\n                <button \n                  className=\"cancel-current-workout-btn\"\n                  onClick={() => handleCancelWorkout(currentWorkout.workoutGroup)}\n                  disabled={isCancelling || showCancelConfirm}\n                >\n                  {isCancelling ? 'מבטל...' : showCancelConfirm ? 'ממתין לאישור...' : 'בטל אימון נוכחי'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {loading ? (\n          <div className=\"loading\">\n            <p>טוען את האימונים שלך מהמערכת...</p>\n          </div>\n        ) : error ? (\n          <div className=\"no-workouts\">\n            <p>שגיאה: {error}</p>\n            <button className=\"no-workouts-button\" onClick={() => window.location.reload()}>\n              נסה שוב\n            </button>\n          </div>\n        ) : workouts.length === 0 ? (\n          <div className=\"no-workouts\">\n            <p>אין לך אימונים עתידיים מתוכננים</p>\n            <button className=\"no-workouts-button\" onClick={handleBookNewWorkout}>\n              הזמן אימון חדש\n            </button>\n          </div>\n        ) : (\n          <div className=\"workouts-list\">\n            {Object.entries(workoutsByField).map(([dateKey, workoutGroups]) => (\n              <div key={dateKey} className=\"date-section\">\n                <h2 className=\"date-title\">תאריך: {formatDate(dateKey)}</h2>\n                \n                {workoutGroups.map((workoutGroup, groupIndex) => {\n                  const firstWorkout = workoutGroup[0];\n                  const lastWorkout = workoutGroup[workoutGroup.length - 1];\n                  const totalDuration = workoutGroup.length * 15; // כל שיבוץ הוא 15 דקות\n                  \n                  return (\n                    <div key={groupIndex} className=\"workout-session\">\n                      <div className=\"workout-session-header\">\n                        <div className=\"workout-time-range\">\n                          {formatTime(firstWorkout.startTime)} - {formatTime(lastWorkout.endTime)} ({totalDuration} דקות)\n                        </div>\n                      </div>\n                      \n                      <div className=\"workout-schedule\">\n                        <h4>לוח זמנים:</h4>\n                        <div className=\"time-slots\">\n                          {workoutGroup.map((slot, index) => {\n                            const startTime = slot.startTime;\n                            const endTime = slot.endTime;\n                            const isValidTime = startTime && endTime && startTime !== endTime;\n                            \n                            return (\n                              <div key={index} className=\"time-slot\">\n                                <span className=\"time\">\n                                  {isValidTime ? `${formatTime(startTime)} - ${formatTime(endTime)}` : `${formatTime(startTime)} (15 דקות)`}\n                                </span>\n                                <span className=\"field\">{slot.fieldName}</span>\n                                <span className=\"sport\">{slot.sportType}</span>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                      \n                      <CountdownTimer \n                        targetDate={dateKey}\n                        targetTime={firstWorkout.startTime}\n                        workoutGroup={workoutGroup}\n                        onComplete={() => console.log('אימון הושלם:', `${dateKey}_${groupIndex}`)}\n                      />\n                      {/* מציג כפתור רק אם זה היום */}\n                      {(() => {\n                        const today = new Date();\n                        \n                        // חילוץ תאריך מהמחרוזת UTC\n                        let dateString;\n                        if (dateKey.includes('T')) {\n                          // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n                          dateString = dateKey.split('T')[0];\n                        } else {\n                          // אם זה כבר פורמט YYYY-MM-DD\n                          dateString = dateKey;\n                        }\n                        \n                        // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n                        const [year, month, day] = dateString.split('-');\n                        const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n                        \n                        today.setHours(0, 0, 0, 0);\n                        workoutDate.setHours(0, 0, 0, 0);\n                        const isToday = today.getTime() === workoutDate.getTime();\n                        \n                        return (\n                          <button \n                            className=\"cancel-workout-btn\"\n                            onClick={() => handleCancelWorkout(workoutGroup)}\n                            style={{ marginTop: '15px' }}\n                            disabled={isCancelling || showCancelConfirm}\n                          >\n                            {isCancelling ? 'מבטל...' : showCancelConfirm ? 'ממתין לאישור...' : 'בטל אימון'}\n                          </button>\n                        );\n                      })()}\n                    </div>\n                  );\n                })}\n              </div>\n            ))}\n            \n\n          </div>\n        )}\n      </div>\n\n      {/* Overlay למניעת לחיצות במהלך ביטול */}\n      {isCancelling && (\n        <div className=\"cancelling-overlay\">\n          <div className=\"cancelling-content\">\n            <div className=\"loading-spinner\"></div>\n            <p>מבטל את האימון...</p>\n            <p className=\"cancelling-subtitle\">אנא המתן, זה יכול לקחת כמה שניות</p>\n          </div>\n        </div>\n      )}\n\n      {/* דיאלוג אישור ביטול אימון */}\n      {showCancelConfirm && (\n        <div className=\"confirm-dialog-overlay\">\n          <div className=\"confirm-dialog\">\n            <div className=\"confirm-dialog-header\">\n              <h3>אישור ביטול אימון</h3>\n            </div>\n            <div className=\"confirm-dialog-body\">\n              <p>האם אתה בטוח שברצונך לבטל את האימון?</p>\n              <p className=\"confirm-dialog-warning\">\n                ⚠️ פעולה זו לא ניתנת לביטול\n              </p>\n            </div>\n            <div className=\"confirm-dialog-actions\">\n              <button \n                className=\"confirm-btn cancel-btn\"\n                onClick={cancelCancelWorkout}\n                disabled={isCancelling}\n              >\n                לא, שמור על האימון\n              </button>\n              <button \n                className=\"confirm-btn confirm-cancel-btn\"\n                onClick={confirmCancelWorkout}\n                disabled={isCancelling}\n              >\n                {isCancelling ? 'מבטל...' : 'כן, בטל את האימון'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StartWorkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}