{"ast":null,"code":"import _objectSpread from\"/Users/omri/Desktop/wolfit-gym/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{API_BASE_URL}from'../config';import'./AdminDashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const navigate=useNavigate();const{user}=useAuth();const[users,setUsers]=useState([]);const[filteredUsers,setFilteredUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedUser,setSelectedUser]=useState(null);const[hoursMap,setHoursMap]=useState({});const[showHistory,setShowHistory]=useState(false);const[userHistory,setUserHistory]=useState([]);const[searchEmail,setSearchEmail]=useState('');const[searchTimeout,setSearchTimeout]=useState(null);useEffect(()=>{console.log('AdminDashboard נטען');const token=localStorage.getItem('authToken');console.log('טוקן ב-useEffect:',token?'קיים':'לא קיים');if(token){console.log('אורך הטוקן:',token.length);}loadUsers();},[]);useEffect(()=>{if(searchEmail.trim()===''){setFilteredUsers(users);}else{// Clear existing timeout\nif(searchTimeout){clearTimeout(searchTimeout);}// Set new timeout for debounced search\nconst timeout=setTimeout(()=>{searchUsers(searchEmail);},300);// 300ms delay\nsetSearchTimeout(timeout);}// Cleanup timeout on unmount\nreturn()=>{if(searchTimeout){clearTimeout(searchTimeout);}};},[users,searchEmail]);const searchUsers=async email=>{if(email.trim()===''){setFilteredUsers(users);return;}try{const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/search-user?email=\").concat(encodeURIComponent(email)),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){setFilteredUsers(data.users);}else{setError('שגיאה בחיפוש משתמשים');setFilteredUsers([]);}}catch(err){setError('שגיאה בחיפוש משתמשים');setFilteredUsers([]);}};const loadUsers=async()=>{try{setLoading(true);const token=localStorage.getItem('authToken');console.log('טוקן שנמצא:',token?'קיים':'לא קיים');console.log('API_BASE_URL:',API_BASE_URL);const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/all-users-hours\"),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});console.log('סטטוס תגובה:',response.status);const data=await response.json();console.log('תגובה מהשרת:',data);if(data.success){console.log('משתמשים שהתקבלו:',data.users);console.log('מספר משתמשים:',data.users.length);if(data.users.length>0){console.log('דוגמה למשתמש:',data.users[0]);console.log('availableHours:',data.users[0].availableHours);console.log('lastUpdated:',data.users[0].lastUpdated);console.log('כל השדות:',Object.keys(data.users[0]));}setUsers(data.users);setFilteredUsers(data.users);}else{setError('שגיאה בטעינת משתמשים');}}catch(err){setError('שגיאה בטעינת משתמשים');}finally{setLoading(false);}};const handleAddHours=async userId=>{try{const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/add-hours/\").concat(userId),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({hours:hoursMap[userId]||1,reason:'הוספת שעות על ידי מנהל'})});const data=await response.json();if(data.success){loadUsers();// טעינה מחדש של רשימת המשתמשים\n}else{setError(data.message||'שגיאה בהוספת שעות');}}catch(err){setError('שגיאה בהוספת שעות');}};const handleSubtractHours=async userId=>{try{const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/subtract-hours/\").concat(userId),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({hours:hoursMap[userId]||1,reason:'הפחתת שעות על ידי מנהל'})});const data=await response.json();if(data.success){loadUsers();// טעינה מחדש של רשימת המשתמשים\n}else{setError(data.message||'שגיאה בהפחתת שעות');}}catch(err){setError('שגיאה בהפחתת שעות');}};const loadUserHistory=async userId=>{try{const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/user-hours-history/\").concat(userId),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){setUserHistory(data.history);setShowHistory(true);}else{setError('שגיאה בטעינת היסטוריה');}}catch(err){setError('שגיאה בטעינת היסטוריה');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin-choice'),className:\"back-button\",children:\"\\u05D7\\u05D6\\u05E8\\u05D4\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u05D8\\u05D5\\u05E2\\u05DF...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"users-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9 \\u05DC\\u05E4\\u05D9 \\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC...\",value:searchEmail,onChange:e=>setSearchEmail(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-results-count\",children:[filteredUsers.length,\" \\u05DE\\u05EA\\u05D5\\u05DA \",users.length,\" \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD\"]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E9\\u05DD \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E9\\u05E2\\u05D5\\u05EA \\u05D6\\u05DE\\u05D9\\u05E0\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E2\\u05D3\\u05DB\\u05D5\\u05DF \\u05D0\\u05D7\\u05E8\\u05D5\\u05DF\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E4\\u05E2\\u05D5\\u05DC\\u05D5\\u05EA\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredUsers.map(user=>{console.log('מציג משתמש:',user.username,'availableHours:',user.availableHours);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsxs(\"td\",{className:\"hours-cell\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hours-number\",children:user.availableHours!==null&&user.availableHours!==undefined?user.availableHours:0}),/*#__PURE__*/_jsx(\"span\",{className:\"hours-unit\",children:\" \\u05DC\\u05D1\\u05E0\\u05D5\\u05EA \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"date-cell\",children:user.lastUpdated&&user.lastUpdated!=='Invalid Date'?new Date(user.lastUpdated).toLocaleString('he-IL'):'לא עודכן'}),/*#__PURE__*/_jsxs(\"td\",{className:\"actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hours-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:hoursMap[user.iduser]||1,onChange:e=>{const newValue=parseInt(e.target.value)||1;setHoursMap(prev=>_objectSpread(_objectSpread({},prev),{},{[user.iduser]:newValue}));}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddHours(user.iduser),className:\"add-button\",children:\"\\u05D4\\u05D5\\u05E1\\u05E3\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSubtractHours(user.iduser),className:\"subtract-button\",children:\"\\u05D4\\u05E4\\u05D7\\u05EA\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadUserHistory(user.iduser),className:\"history-button\",children:\"\\u05D4\\u05D9\\u05E1\\u05D8\\u05D5\\u05E8\\u05D9\\u05D4\"})]})]},user.iduser);})})]})]}),showHistory&&/*#__PURE__*/_jsx(\"div\",{className:\"history-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u05D4\\u05D9\\u05E1\\u05D8\\u05D5\\u05E8\\u05D9\\u05D9\\u05EA \\u05E9\\u05E2\\u05D5\\u05EA\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"history-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E9\\u05E2\\u05D5\\u05EA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05E1\\u05D9\\u05D1\\u05D4\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:userHistory.map((record,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.action}),/*#__PURE__*/_jsx(\"td\",{children:record.hours}),/*#__PURE__*/_jsx(\"td\",{children:record.reason}),/*#__PURE__*/_jsx(\"td\",{children:new Date(record.createdAt).toLocaleString()})]},index))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowHistory(false),className:\"close-button\",children:\"\\u05E1\\u05D2\\u05D5\\u05E8\"})]})})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","AdminDashboard","navigate","user","users","setUsers","filteredUsers","setFilteredUsers","loading","setLoading","error","setError","selectedUser","setSelectedUser","hoursMap","setHoursMap","showHistory","setShowHistory","userHistory","setUserHistory","searchEmail","setSearchEmail","searchTimeout","setSearchTimeout","console","log","token","localStorage","getItem","length","loadUsers","trim","clearTimeout","timeout","setTimeout","searchUsers","email","response","fetch","concat","encodeURIComponent","headers","data","json","success","err","status","availableHours","lastUpdated","Object","keys","handleAddHours","userId","method","body","JSON","stringify","hours","reason","message","handleSubtractHours","loadUserHistory","history","className","children","onClick","type","placeholder","value","onChange","e","target","map","username","undefined","Date","toLocaleString","min","iduser","newValue","parseInt","prev","_objectSpread","record","index","action","createdAt"],"sources":["/Users/omri/Desktop/wolfit-gym/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { API_BASE_URL } from '../config';\nimport './AdminDashboard.css';\n\nfunction AdminDashboard() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [hoursMap, setHoursMap] = useState({});\n  const [showHistory, setShowHistory] = useState(false);\n  const [userHistory, setUserHistory] = useState([]);\n  const [searchEmail, setSearchEmail] = useState('');\n  const [searchTimeout, setSearchTimeout] = useState(null);\n\n  useEffect(() => {\n    console.log('AdminDashboard נטען');\n    const token = localStorage.getItem('authToken');\n    console.log('טוקן ב-useEffect:', token ? 'קיים' : 'לא קיים');\n    if (token) {\n      console.log('אורך הטוקן:', token.length);\n    }\n    loadUsers();\n  }, []);\n\n  useEffect(() => {\n    if (searchEmail.trim() === '') {\n      setFilteredUsers(users);\n    } else {\n      // Clear existing timeout\n      if (searchTimeout) {\n        clearTimeout(searchTimeout);\n      }\n      \n      // Set new timeout for debounced search\n      const timeout = setTimeout(() => {\n        searchUsers(searchEmail);\n      }, 300); // 300ms delay\n      \n      setSearchTimeout(timeout);\n    }\n    \n    // Cleanup timeout on unmount\n    return () => {\n      if (searchTimeout) {\n        clearTimeout(searchTimeout);\n      }\n    };\n  }, [users, searchEmail]);\n\n  const searchUsers = async (email) => {\n    if (email.trim() === '') {\n      setFilteredUsers(users);\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/admin/search-user?email=${encodeURIComponent(email)}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        setFilteredUsers(data.users);\n      } else {\n        setError('שגיאה בחיפוש משתמשים');\n        setFilteredUsers([]);\n      }\n    } catch (err) {\n      setError('שגיאה בחיפוש משתמשים');\n      setFilteredUsers([]);\n    }\n  };\n\n  const loadUsers = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('authToken');\n      console.log('טוקן שנמצא:', token ? 'קיים' : 'לא קיים');\n      console.log('API_BASE_URL:', API_BASE_URL);\n      const response = await fetch(`${API_BASE_URL}/api/admin/all-users-hours`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      console.log('סטטוס תגובה:', response.status);\n      const data = await response.json();\n      console.log('תגובה מהשרת:', data);\n      if (data.success) {\n        console.log('משתמשים שהתקבלו:', data.users);\n        console.log('מספר משתמשים:', data.users.length);\n        if (data.users.length > 0) {\n          console.log('דוגמה למשתמש:', data.users[0]);\n          console.log('availableHours:', data.users[0].availableHours);\n          console.log('lastUpdated:', data.users[0].lastUpdated);\n          console.log('כל השדות:', Object.keys(data.users[0]));\n        }\n        setUsers(data.users);\n        setFilteredUsers(data.users);\n      } else {\n        setError('שגיאה בטעינת משתמשים');\n      }\n    } catch (err) {\n      setError('שגיאה בטעינת משתמשים');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddHours = async (userId) => {\n    try {\n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/admin/add-hours/${userId}`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          hours: hoursMap[userId] || 1,\n          reason: 'הוספת שעות על ידי מנהל'\n        })\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        loadUsers(); // טעינה מחדש של רשימת המשתמשים\n      } else {\n        setError(data.message || 'שגיאה בהוספת שעות');\n      }\n    } catch (err) {\n      setError('שגיאה בהוספת שעות');\n    }\n  };\n\n  const handleSubtractHours = async (userId) => {\n    try {\n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/admin/subtract-hours/${userId}`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          hours: hoursMap[userId] || 1,\n          reason: 'הפחתת שעות על ידי מנהל'\n        })\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        loadUsers(); // טעינה מחדש של רשימת המשתמשים\n      } else {\n        setError(data.message || 'שגיאה בהפחתת שעות');\n      }\n    } catch (err) {\n      setError('שגיאה בהפחתת שעות');\n    }\n  };\n\n  const loadUserHistory = async (userId) => {\n    try {\n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/user-hours-history/${userId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        setUserHistory(data.history);\n        setShowHistory(true);\n      } else {\n        setError('שגיאה בטעינת היסטוריה');\n      }\n    } catch (err) {\n      setError('שגיאה בטעינת היסטוריה');\n    }\n  };\n\n  return (\n    <div className=\"admin-dashboard\">\n      <div className=\"admin-header\">\n        <h1>ניהול משתמשים</h1>\n        <button onClick={() => navigate('/admin-choice')} className=\"back-button\">\n          חזרה\n        </button>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n\n      {loading ? (\n        <div className=\"loading\">טוען...</div>\n      ) : (\n        <div className=\"users-container\">\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              placeholder=\"חיפוש משתמש לפי אימייל...\"\n              value={searchEmail}\n              onChange={(e) => setSearchEmail(e.target.value)}\n              className=\"search-input\"\n            />\n            <div className=\"search-results-count\">\n              {filteredUsers.length} מתוך {users.length} משתמשים\n            </div>\n          </div>\n          <table className=\"users-table\">\n            <thead>\n              <tr>\n                <th>שם משתמש</th>\n                <th>אימייל</th>\n                <th>שעות זמינות</th>\n                <th>עדכון אחרון</th>\n                <th>פעולות</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredUsers.map(user => {\n                console.log('מציג משתמש:', user.username, 'availableHours:', user.availableHours);\n                return (\n                <tr key={user.iduser}>\n                  <td>{user.username}</td>\n                  <td>{user.email}</td>\n                  <td className=\"hours-cell\">\n                    <span className=\"hours-number\">{user.availableHours !== null && user.availableHours !== undefined ? user.availableHours : 0}</span>\n                    <span className=\"hours-unit\"> לבנות אימון</span>\n                  </td>\n                  <td className=\"date-cell\">\n                    {user.lastUpdated && user.lastUpdated !== 'Invalid Date' \n                      ? new Date(user.lastUpdated).toLocaleString('he-IL') \n                      : 'לא עודכן'\n                    }\n                  </td>\n                  <td className=\"actions\">\n                    <div className=\"hours-control\">\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={hoursMap[user.iduser] || 1}\n                        onChange={(e) => {\n                          const newValue = parseInt(e.target.value) || 1;\n                          setHoursMap(prev => ({\n                            ...prev,\n                            [user.iduser]: newValue\n                          }));\n                        }}\n                      />\n                      <button onClick={() => handleAddHours(user.iduser)} className=\"add-button\">\n                        הוסף\n                      </button>\n                      <button onClick={() => handleSubtractHours(user.iduser)} className=\"subtract-button\">\n                        הפחת\n                      </button>\n                    </div>\n                    <button onClick={() => loadUserHistory(user.iduser)} className=\"history-button\">\n                      היסטוריה\n                    </button>\n                  </td>\n                </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {showHistory && (\n        <div className=\"history-modal\">\n          <div className=\"history-content\">\n            <h2>היסטוריית שעות</h2>\n            <table className=\"history-table\">\n              <thead>\n                <tr>\n                  <th>פעולה</th>\n                  <th>שעות</th>\n                  <th>סיבה</th>\n                  <th>תאריך</th>\n                </tr>\n              </thead>\n              <tbody>\n                {userHistory.map((record, index) => (\n                  <tr key={index}>\n                    <td>{record.action}</td>\n                    <td>{record.hours}</td>\n                    <td>{record.reason}</td>\n                    <td>{new Date(record.createdAt).toLocaleString()}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <button onClick={() => setShowHistory(false)} className=\"close-button\">\n              סגור\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}