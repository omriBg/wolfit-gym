{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import{GoogleLogin,GoogleOAuthProvider}from'@react-oauth/google';import{useAuth}from'../contexts/AuthContext';import{API_BASE_URL}from'../config';import'./LoginPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[loginMessage,setLoginMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[googleUserData,setGoogleUserData]=useState(null);const{login}=useAuth();const navigate=useNavigate();const googleButtonRef=useRef(null);// Google OAuth Client ID\nconst GOOGLE_CLIENT_ID=\"386514389479-impprp7mgpalddmuflkvev582v8idjug.apps.googleusercontent.com\";const handleGoogleLogin=async credentialResponse=>{setIsLoading(true);setLoginMessage('转专 注 Google...');try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/google-login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({credential:credentialResponse.credential})});const result=await response.json();if(result.success){console.log('转专转 爪:',result.user);login(result.token,result.user);navigate('/dashboard');}else{if(result.isNewUser){// 砖转砖 砖 - 砖专转 转 Google 注专 住 专砖\nconsole.log(' 砖转砖 砖 - 转 Google:',result.googleData);setGoogleUserData(result.googleData);setLoginMessage('砖转砖 砖 -  专砖 转');setTimeout(()=>{console.log(' 注专 住 专砖 注 转:',result.googleData);navigate('/signup',{state:{googleData:result.googleData}});},1000);}else{setLoginMessage(result.message||'砖 转专转 注 Google');}}}catch(error){console.error('砖 专 砖专转:',error);setLoginMessage('砖 专 砖专转. 住 砖.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(GoogleOAuthProvider,{clientId:GOOGLE_CLIENT_ID,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo1.png\",alt:\"WOLFit Logo\",className:\"login-logo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center',marginBottom:'20px',color:'#333'}}),/*#__PURE__*/_jsx(\"div\",{className:\"google-login-container\",children:/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleLogin,onError:()=>setLoginMessage('砖 转专转 注 Google'),theme:\"outline\",size:\"large\",text:\"signin_with\",shape:\"rectangular\",logo_alignment:\"left\",disabled:isLoading,style:{width:'100%',maxWidth:'320px',height:'56px',borderRadius:'12px',border:'2px solid #e0e0e0',background:'linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.1)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',fontFamily:\"'Roboto', 'Segoe UI', sans-serif\",fontWeight:'500',fontSize:'16px',color:'#3c4043',letterSpacing:'0.25px'}})}),loginMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:loginMessage.includes('砖')?'#000':'#8b5cf6',textAlign:'center',margin:'10px 0'},children:loginMessage}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'16px',height:'16px',border:'2px solid #b38ed8',borderTop:'2px solid transparent',borderRadius:'50%',animation:'spin 1s linear infinite',marginLeft:'8px'}}),\"\\u05DE\\u05EA\\u05D7\\u05D1\\u05E8 \\u05E2\\u05DD Google...\"]})]})]})});}export default LoginPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","GoogleLogin","GoogleOAuthProvider","useAuth","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","LoginPage","loginMessage","setLoginMessage","isLoading","setIsLoading","googleUserData","setGoogleUserData","login","navigate","googleButtonRef","GOOGLE_CLIENT_ID","handleGoogleLogin","credentialResponse","response","fetch","concat","method","headers","body","JSON","stringify","credential","result","json","success","console","log","user","token","isNewUser","googleData","setTimeout","state","message","error","clientId","children","className","src","alt","style","textAlign","marginBottom","color","onSuccess","onError","theme","size","text","shape","logo_alignment","disabled","width","maxWidth","height","borderRadius","border","background","boxShadow","transition","fontFamily","fontWeight","fontSize","letterSpacing","includes","margin","display","alignItems","justifyContent","marginTop","borderTop","animation","marginLeft"],"sources":["/Users/omri/Desktop/wolfit-gym/frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { GoogleLogin, GoogleOAuthProvider } from '@react-oauth/google';\nimport { useAuth } from '../contexts/AuthContext';\nimport { API_BASE_URL } from '../config';\nimport './LoginPage.css';\n\nfunction LoginPage() {\n  const [loginMessage, setLoginMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [googleUserData, setGoogleUserData] = useState(null);\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const googleButtonRef = useRef(null);\n\n  // Google OAuth Client ID\n  const GOOGLE_CLIENT_ID = \"386514389479-impprp7mgpalddmuflkvev582v8idjug.apps.googleusercontent.com\";\n\n  const handleGoogleLogin = async (credentialResponse) => {\n    setIsLoading(true);\n    setLoginMessage('转专 注 Google...');\n    \n    try {\n      const response = await fetch(`${API_BASE_URL}/api/google-login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          credential: credentialResponse.credential\n        })\n      });\n      \n      const result = await response.json();\n      \n      if (result.success) {\n        console.log('转专转 爪:', result.user);\n        login(result.token, result.user);\n        navigate('/dashboard');\n      } else {\n        if (result.isNewUser) {\n          // 砖转砖 砖 - 砖专转 转 Google 注专 住 专砖\n          console.log(' 砖转砖 砖 - 转 Google:', result.googleData);\n          setGoogleUserData(result.googleData);\n          setLoginMessage('砖转砖 砖 -  专砖 转');\n          setTimeout(() => {\n            console.log(' 注专 住 专砖 注 转:', result.googleData);\n            navigate('/signup', { state: { googleData: result.googleData } });\n          }, 1000);\n        } else {\n          setLoginMessage(result.message || '砖 转专转 注 Google');\n        }\n      }\n    } catch (error) {\n      console.error('砖 专 砖专转:', error);\n      setLoginMessage('砖 专 砖专转. 住 砖.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n\n  return (\n    <GoogleOAuthProvider clientId={GOOGLE_CLIENT_ID}>\n      <div className=\"login-page\">\n        <div className=\"logo-container\">\n          <img src=\"/logo1.png\" alt=\"WOLFit Logo\" className=\"login-logo\" />\n        </div>\n        \n        <div className=\"login-form\">\n          <h2 style={{ textAlign: 'center', marginBottom: '20px', color: '#333' }}>\n          </h2>\n          {/* 驻转专 Google OAuth 注 注爪 转 */}\n          <div className=\"google-login-container\">\n            <GoogleLogin\n              onSuccess={handleGoogleLogin}\n              onError={() => setLoginMessage('砖 转专转 注 Google')}\n              theme=\"outline\"\n              size=\"large\"\n              text=\"signin_with\"\n              shape=\"rectangular\"\n              logo_alignment=\"left\"\n              disabled={isLoading}\n              style={{\n                width: '100%',\n                maxWidth: '320px',\n                height: '56px',\n                borderRadius: '12px',\n                border: '2px solid #e0e0e0',\n                background: 'linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)',\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',\n                transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n                fontFamily: \"'Roboto', 'Segoe UI', sans-serif\",\n                fontWeight: '500',\n                fontSize: '16px',\n                color: '#3c4043',\n                letterSpacing: '0.25px'\n              }}\n            />\n          </div>\n          \n        \n          {/* 注 砖转砖 */}\n          {loginMessage && (\n            <p style={{ \n              color: loginMessage.includes('砖') ? '#000' : '#8b5cf6',\n              textAlign: 'center',\n              margin: '10px 0'\n            }}>\n              {loginMessage}\n            </p>\n          )}\n          \n          {/* 拽专 注 */}\n          {isLoading && (\n            <div style={{ \n              display: 'flex', \n              alignItems: 'center', \n              justifyContent: 'center',\n              marginTop: '10px'\n            }}>\n              <div style={{\n                width: '16px',\n                height: '16px',\n                border: '2px solid #b38ed8',\n                borderTop: '2px solid transparent',\n                borderRadius: '50%',\n                animation: 'spin 1s linear infinite',\n                marginLeft: '8px'\n              }}></div>\n              转专 注 Google...\n            </div>\n          )}\n        </div>\n      </div>\n    </GoogleOAuthProvider>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}