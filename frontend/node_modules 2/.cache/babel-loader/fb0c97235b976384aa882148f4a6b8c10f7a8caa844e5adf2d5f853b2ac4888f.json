{"ast":null,"code":"var _jsxFileName = \"/Users/omri/Desktop/wolfit-gym/src/CreateWorkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './CreateWorkout.css';\n\n// ××™×¤×•×™ ××¡×¤×¨×™ ×”×¡×¤×•×¨×˜ ×œ×©××•×ª ×¢×‘×¨×™×™× (×ª×•×× ×œ×©×¨×ª)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPORT_MAPPING = {\n  1: '×›×“×•×¨×’×œ',\n  // Soccer\n  2: '×›×“×•×¨×¡×œ',\n  // Basketball  \n  3: '×˜×™×¤×•×¡',\n  // Climbing\n  4: '×—×“×¨ ×›×•×©×¨',\n  // Strength Training\n  5: '×§×•×¨×“×™× ×¦×™×”',\n  // Coordination\n  6: '×˜× ×™×¡',\n  // Tennis\n  7: '×¤×™× ×’×¤×•× ×’',\n  // Ping Pong\n  8: '×¨×™×§×•×“',\n  // Dance\n  9: '××•×¤× ×™×™×' // Cycling\n};\nfunction CreateWorkout({\n  user,\n  selectedDate,\n  startTime,\n  endTime,\n  onBackClick\n}) {\n  _s();\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [workoutPlan, setWorkoutPlan] = useState(null);\n  const [userPreferences, setUserPreferences] = useState([]);\n  const [fieldsByTime, setFieldsByTime] = useState({});\n  const [timeSlots, setTimeSlots] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  useEffect(() => {\n    console.log('ğŸš€ CreateWorkout × ×˜×¢×Ÿ ×¢×:', {\n      user: user === null || user === void 0 ? void 0 : user.userName,\n      selectedDate,\n      startTime,\n      endTime\n    });\n\n    // ×‘×“×™×§×ª ×¤×•×¨××˜ ×”×ª××¨×™×š\n    console.log('ğŸ“… ×¤×•×¨××˜ ×”×ª××¨×™×š:', {\n      selectedDate,\n      type: typeof selectedDate,\n      length: selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.length\n    });\n    initializeWorkoutData();\n  }, []);\n  const initializeWorkoutData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      await loadUserPreferences();\n      const slots = createTimeSlots();\n      setTimeSlots(slots);\n      await loadAvailableFields(slots);\n      console.log('âœ… ×˜×¢×™× ×ª × ×ª×•× ×™× ×”×•×©×œ××”');\n    } catch (err) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×:', err);\n      setError('×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×. ×× × × ×¡×” ×©×•×‘.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadUserPreferences = async () => {\n    try {\n      if (!user || !user.id) {\n        throw new Error('××©×ª××© ×œ× ××•×’×“×¨');\n      }\n      const url = `http://localhost:3001/api/user-preferences/${user.id}`;\n      const response = await fetch(url);\n      const data = await response.json();\n      if (data.success) {\n        setUserPreferences(data.data.selectedSports || []);\n      } else {\n        setUserPreferences([]);\n      }\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×¢×“×¤×•×ª:', error);\n      setUserPreferences([]);\n      throw error;\n    }\n  };\n  const createTimeSlots = () => {\n    const slots = [];\n    const [startHour, startMinute] = startTime.split(':').map(Number);\n    const [endHour, endMinute] = endTime.split(':').map(Number);\n    const startTotalMinutes = startHour * 60 + startMinute;\n    const endTotalMinutes = endHour * 60 + endMinute;\n    for (let minutes = startTotalMinutes; minutes < endTotalMinutes; minutes += 15) {\n      const hours = Math.floor(minutes / 60);\n      const mins = minutes % 60;\n      const timeStr = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n      slots.push(timeStr);\n    }\n    return slots;\n  };\n  const createTimeSlotsForRange = (start, end) => {\n    const slots = [];\n    const [startHour, startMinute] = start.split(':').map(Number);\n    const [endHour, endMinute] = end.split(':').map(Number);\n    const startTotalMinutes = startHour * 60 + startMinute;\n    const endTotalMinutes = endHour * 60 + endMinute;\n    for (let minutes = startTotalMinutes; minutes < endTotalMinutes; minutes += 15) {\n      const hours = Math.floor(minutes / 60);\n      const mins = minutes % 60;\n      const timeStr = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n      slots.push(timeStr);\n    }\n    return slots;\n  };\n  const loadAvailableFields = async timeSlots => {\n    try {\n      console.log('ğŸŸï¸ ×˜×•×¢×Ÿ ××’×¨×©×™× ×–××™× ×™×...');\n      console.log('ğŸ“… ×ª××¨×™×š:', selectedDate);\n      console.log('â° ×–×× ×™×:', timeSlots);\n      const response = await fetch('http://localhost:3001/api/available-fields-for-workout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          date: selectedDate,\n          timeSlots: timeSlots\n        })\n      });\n      console.log('ğŸ“¥ ×ª×’×•×‘×” ××”×©×¨×ª:', response.status);\n      if (response.ok) {\n        const data = await response.json();\n        console.log('ğŸ“‹ × ×ª×•× ×™× ××”×©×¨×ª:', data);\n        if (data.success) {\n          setFieldsByTime(data.fieldsByTime);\n          console.log('âœ… ××’×¨×©×™× × ×˜×¢× ×• ×‘×”×¦×œ×—×”');\n          return;\n        } else {\n          console.error('âŒ ×©×’×™××” ××”×©×¨×ª:', data.message);\n          throw new Error(data.message);\n        }\n      } else {\n        console.error('âŒ ×©×’×™××ª HTTP:', response.status);\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ××’×¨×©×™×:', error);\n      throw error;\n    }\n  };\n  const loadFieldsForTimeSlots = async (timeSlots, date) => {\n    try {\n      const response = await fetch('http://localhost:3001/api/available-fields-for-workout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          date: date,\n          timeSlots: timeSlots\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          return data.fieldsByTime;\n        }\n      }\n      const mockFieldsByTime = {};\n      timeSlots.forEach(time => {\n        mockFieldsByTime[time] = [{\n          id: 1,\n          name: '××’×¨×© ×›×“×•×¨×’×œ 1',\n          sportType: '×›×“×•×¨×’×œ'\n        }, {\n          id: 2,\n          name: '××’×¨×© ×›×“×•×¨×¡×œ 1',\n          sportType: '×›×“×•×¨×¡×œ'\n        }, {\n          id: 3,\n          name: '×—×“×¨ ×˜×™×¤×•×¡ 1',\n          sportType: '×˜×™×¤×•×¡'\n        }, {\n          id: 4,\n          name: '×—×“×¨ ×›×•×©×¨ 1',\n          sportType: '×—×“×¨ ×›×•×©×¨'\n        }, {\n          id: 5,\n          name: '××•×œ× ×§×•×¨×“×™× ×¦×™×” 1',\n          sportType: '×§×•×¨×“×™× ×¦×™×”'\n        }, {\n          id: 6,\n          name: '××’×¨×© ×˜× ×™×¡ 1',\n          sportType: '×˜× ×™×¡'\n        }, {\n          id: 7,\n          name: '×©×•×œ×—×Ÿ ×¤×™× ×’×¤×•× ×’ 1',\n          sportType: '×¤×™× ×’×¤×•× ×’'\n        }, {\n          id: 8,\n          name: '××•×œ× ×¨×™×§×•×“ 1',\n          sportType: '×¨×™×§×•×“'\n        }, {\n          id: 9,\n          name: '××•×¤× ×™×™× ×¡×˜×˜×™ 1',\n          sportType: '××•×¤× ×™×™×'\n        }];\n      });\n      return mockFieldsByTime;\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ××’×¨×©×™×:', error);\n      return {};\n    }\n  };\n  const calculateScore = (field, userSportNames, usedSports, selectedWorkout) => {\n    let score = 100; // × ×™×§×•×“ ×‘×¡×™×¡ ×’×‘×•×” (×¨×¢)\n\n    console.log(`ğŸ§® ××—×©×‘ × ×™×§×•×“ ×œ××’×¨×©: ${field.name} (${field.sportType})`);\n    console.log(`ğŸ“‹ ×”×¢×“×¤×•×ª ××©×ª××© ×‘×¢×‘×¨×™×ª:`, userSportNames);\n\n    // ×‘×“×™×§×ª ×¢×“×™×¤×•×ª - ×”×©×•×•××ª ×©××•×ª ×™×©×™×¨×”\n    const preferenceIndex = userSportNames.indexOf(field.sportType);\n    if (preferenceIndex !== -1) {\n      score = preferenceIndex * 10; // ×¢×“×™×¤×•×ª 1 = 0, ×¢×“×™×¤×•×ª 2 = 10, ×•×›×•'\n      console.log(`âœ… × ××¦× ×‘×¢×“×™×¤×•×ª ${preferenceIndex + 1}, × ×™×§×•×“ ×‘×¡×™×¡: ${score}`);\n    } else {\n      console.log(`âŒ ×œ× × ××¦× ×‘×¢×“×™×¤×•×ª (×¡×¤×•×¨×˜: ${field.sportType}), × ×™×§×•×“ ×‘×¡×™×¡: ${score}`);\n    }\n\n    // ×§× ×¡ ×›×¤×™×œ×•×™×•×ª\n    const timesUsed = usedSports.filter(sport => sport === field.sportType).length;\n    if (timesUsed > 0) {\n      score += 150;\n      console.log(`ğŸ”„ ×§× ×¡ ×›×¤×™×œ×•×ª: +150 (×ª××©× ×• ${timesUsed} ×¤×¢××™×), × ×™×§×•×“ ×›×•×œ×œ: ${score}`);\n    }\n\n    // ×§× ×¡ ×¨×¦×£\n    if (selectedWorkout.length > 0) {\n      const lastWorkout = selectedWorkout[selectedWorkout.length - 1];\n      if (lastWorkout.field && lastWorkout.field.sportType === field.sportType) {\n        score += 30;\n        console.log(`â­ ×§× ×¡ ×¨×¦×£: +30, × ×™×§×•×“ ×¡×•×¤×™: ${score}`);\n      }\n    }\n    console.log(`ğŸ“Š × ×™×§×•×“ ×¡×•×¤×™ ×œ××’×¨×© ${field.name}: ${score}`);\n    return score;\n  };\n  const runSmartAlgorithm = (timeSlots, fieldsByTime, userPreferences) => {\n    const selectedWorkout = [];\n    const usedSports = [];\n    console.log('ğŸ§  ××ª×—×™×œ ××œ×’×•×¨×™×ª× ×—×›×...');\n    console.log('ğŸ¯ ×”×¢×“×¤×•×ª ××©×ª××© (IDs):', userPreferences);\n\n    // ×”××¨×ª ×”×¢×“×¤×•×ª ×œ××¢×¨×š ×©××•×ª ×¢×‘×¨×™×™× ×œ×‘×“×™×§×”\n    const userSportNames = userPreferences.map(sportId => SPORT_MAPPING[sportId]).filter(Boolean);\n    console.log('ğŸ¯ ×”×¢×“×¤×•×ª ××©×ª××© (×¢×‘×¨×™×ª):', userSportNames);\n    for (let i = 0; i < timeSlots.length; i++) {\n      const timeSlot = timeSlots[i];\n      const availableFields = fieldsByTime[timeSlot] || [];\n      console.log(`\\nâ° ××¢×‘×“ ×–××Ÿ: ${timeSlot}`);\n      console.log(`ğŸŸï¸ ××’×¨×©×™× ×–××™× ×™×: ${availableFields.length}`);\n      availableFields.forEach(field => {\n        console.log(`  - ${field.name} (${field.sportType})`);\n      });\n      if (availableFields.length === 0) {\n        console.log('âŒ ××™×Ÿ ××’×¨×©×™× ×–××™× ×™× ×‘×–××Ÿ ×–×”');\n        selectedWorkout.push({\n          time: timeSlot,\n          field: null,\n          needsAlternative: true,\n          reason: '××™×Ÿ ××’×¨×©×™× ×–××™× ×™×'\n        });\n        continue;\n      }\n      let bestChoice = null;\n      let bestScore = 999;\n      console.log('ğŸ” ××—×©×‘ × ×™×§×•×“×™×:');\n      for (const field of availableFields) {\n        const score = calculateScore(field, userSportNames, usedSports, selectedWorkout);\n        console.log(`${field.name}: ${score}`);\n        if (score < bestScore) {\n          bestScore = score;\n          bestChoice = field;\n          console.log(`ğŸ¥‡ ××’×¨×© ×—×“×© ×‘×¨××©: ${field.name} ×¢× × ×™×§×•×“ ${score}`);\n        }\n      }\n      if (bestChoice) {\n        console.log(`âœ… × ×‘×—×¨: ${bestChoice.name} (${bestChoice.sportType}) ×¢× × ×™×§×•×“ ${bestScore}`);\n        selectedWorkout.push({\n          time: timeSlot,\n          field: bestChoice,\n          score: bestScore\n        });\n        usedSports.push(bestChoice.sportType);\n        console.log(`ğŸ“ ×¡×¤×•×¨×˜×™× ×©× ×•×¦×¨×• ×¢×“ ×›×”:`, usedSports);\n      }\n    }\n    return {\n      slots: selectedWorkout,\n      totalSlots: selectedWorkout.length,\n      successfulSlots: selectedWorkout.filter(slot => slot.field !== null).length\n    };\n  };\n  const adjustTime = (timeStr, minutesOffset) => {\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    const totalMinutes = hours * 60 + minutes + minutesOffset;\n    const newHours = Math.floor(totalMinutes / 60);\n    const newMinutes = totalMinutes % 60;\n    return `${newHours.toString().padStart(2, '0')}:${newMinutes.toString().padStart(2, '0')}`;\n  };\n  const calculateDuration = (start, end) => {\n    const [startHours, startMinutes] = start.split(':').map(Number);\n    const [endHours, endMinutes] = end.split(':').map(Number);\n    const startTotal = startHours * 60 + startMinutes;\n    const endTotal = endHours * 60 + endMinutes;\n    return endTotal - startTotal;\n  };\n  const generateTimeAlternatives = (originalStart, originalEnd) => {\n    const alternatives = [];\n    const originalDuration = calculateDuration(originalStart, originalEnd);\n    alternatives.push({\n      type: '×”×§×“××” ×§×œ×”',\n      startTime: adjustTime(originalStart, -15),\n      endTime: adjustTime(originalEnd, -15)\n    });\n    alternatives.push({\n      type: '×“×—×™×™×” ×§×œ×”',\n      startTime: adjustTime(originalStart, 15),\n      endTime: adjustTime(originalEnd, 15)\n    });\n    alternatives.push({\n      type: '×”×§×“××” ×—×–×§×”',\n      startTime: adjustTime(originalStart, -30),\n      endTime: adjustTime(originalEnd, -30)\n    });\n    alternatives.push({\n      type: '×“×—×™×™×” ×—×–×§×”',\n      startTime: adjustTime(originalStart, 30),\n      endTime: adjustTime(originalEnd, 30)\n    });\n    const minimumWorkout = 30;\n    const maxReduction = originalDuration - minimumWorkout;\n    if (maxReduction >= 15) {\n      alternatives.push({\n        type: '×§×™×¦×•×¨ ×§×œ',\n        startTime: originalStart,\n        endTime: adjustTime(originalEnd, -15)\n      });\n    }\n    if (maxReduction >= 30) {\n      alternatives.push({\n        type: '×§×™×¦×•×¨ ×—×–×§',\n        startTime: originalStart,\n        endTime: adjustTime(originalEnd, -30)\n      });\n    }\n    return alternatives;\n  };\n  const isWorkoutValid = workout => {\n    if (!workout || !workout.slots) return false;\n    const validSlots = workout.slots.filter(slot => slot.field !== null);\n    return validSlots.length >= Math.ceil(workout.totalSlots * 0.7);\n  };\n  const createSmartWorkout = async () => {\n    console.log('ğŸ§  ××ª×—×™×œ ××œ×’×•×¨×™×ª× ×—×›×...');\n    if (timeSlots.length === 0 || Object.keys(fieldsByTime).length === 0) {\n      console.log('âŒ ××™×Ÿ × ×ª×•× ×™× ×–××™× ×™× ×œ××œ×’×•×¨×™×ª×');\n      return null;\n    }\n    const originalWorkout = runSmartAlgorithm(timeSlots, fieldsByTime, userPreferences);\n    if (isWorkoutValid(originalWorkout)) {\n      console.log('âœ… ××œ×’×•×¨×™×ª× ×”×¦×œ×™×— ×‘×–××Ÿ ×”××§×•×¨×™');\n      return originalWorkout;\n    }\n    console.log('ğŸ”„ ××—×¤×© ×—×œ×•×¤×•×ª ×–××Ÿ...');\n    const alternatives = generateTimeAlternatives(startTime, endTime);\n    for (const alternative of alternatives) {\n      console.log(`ğŸ• ×‘×•×“×§ ×—×œ×•×¤×”: ${alternative.startTime} - ${alternative.endTime}`);\n      try {\n        const altTimeSlots = createTimeSlotsForRange(alternative.startTime, alternative.endTime);\n        const altFieldsByTime = await loadFieldsForTimeSlots(altTimeSlots, selectedDate);\n        const altWorkout = runSmartAlgorithm(altTimeSlots, altFieldsByTime, userPreferences);\n        if (isWorkoutValid(altWorkout)) {\n          console.log('âœ… × ××¦××” ×—×œ×•×¤×ª ×–××Ÿ ××ª××™××”');\n          return {\n            ...altWorkout,\n            isAlternative: true,\n            alternativeType: alternative.type,\n            originalTime: {\n              startTime,\n              endTime\n            },\n            newTime: {\n              startTime: alternative.startTime,\n              endTime: alternative.endTime\n            }\n          };\n        }\n      } catch (error) {\n        console.log(`âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×—×œ×•×¤×”: ${error.message}`);\n      }\n    }\n    console.log('ğŸ’¡ ××¦×™×¢ ×—×œ×•×¤×•×ª ××•×’×‘×œ×•×ª...');\n    return {\n      success: false,\n      alternatives: alternatives,\n      partialWorkout: originalWorkout\n    };\n  };\n  const generateWorkout = async () => {\n    if (timeSlots.length === 0 || Object.keys(fieldsByTime).length === 0) {\n      setError('×œ× × ×˜×¢× ×• × ×ª×•× ×™×. ×× × ×¨×¢× ×Ÿ ××ª ×”×“×£.');\n      return;\n    }\n    setIsGenerating(true);\n    setError('');\n    try {\n      console.log('ğŸš€ ××ª×—×™×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×ª ××™××•×Ÿ...');\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      const smartWorkout = await createSmartWorkout();\n      if (smartWorkout) {\n        setWorkoutPlan(smartWorkout);\n        console.log('âœ… ×ª×•×›× ×™×ª ××™××•×Ÿ × ×•×¦×¨×” ×‘×”×¦×œ×—×”');\n      } else {\n        setError('×œ× ×”×¦×œ×™×— ×œ×™×¦×•×¨ ×ª×•×›× ×™×ª ××™××•×Ÿ ××ª××™××”');\n      }\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×™×¦×™×¨×ª ××™××•×Ÿ:', error);\n      setError('×©×’×™××” ×‘×™×¦×™×¨×ª ×”××™××•×Ÿ. ×× × × ×¡×” ×©×•×‘.');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  const saveWorkoutToDatabase = async () => {\n    if (!workoutPlan || !user || !user.id) {\n      console.error('âŒ × ×ª×•× ×™× ×—×¡×¨×™×:', {\n        workoutPlan: !!workoutPlan,\n        user: !!user,\n        userId: user === null || user === void 0 ? void 0 : user.id\n      });\n      setError('××™×Ÿ ×ª×•×›× ×™×ª ××™××•×Ÿ ××• ××©×ª××© ×œ× ××•×’×“×¨');\n      return;\n    }\n    setIsSaving(true);\n    setError('');\n    setSaveSuccess(false);\n    try {\n      console.log('ğŸ’¾ ××ª×—×™×œ ×œ×©××•×¨ ××™××•×Ÿ ×‘××¡×“ ×”× ×ª×•× ×™×...');\n      console.log('ğŸ‘¤ ××©×ª××©:', user);\n      console.log('ğŸ“… ×ª××¨×™×š:', selectedDate);\n      console.log('ğŸ¯ ×ª×•×›× ×™×ª ××™××•×Ÿ:', workoutPlan);\n\n      // ×”×›× ×ª ×”× ×ª×•× ×™× ×œ×©××™×¨×”\n      const bookings = workoutPlan.slots.filter(slot => slot.field !== null) // ×¨×§ ××’×¨×©×™× ×©× ×‘×—×¨×•\n      .map(slot => ({\n        idField: slot.field.id,\n        bookingDate: selectedDate,\n        startTime: slot.time,\n        idUser: user.id\n      }));\n      console.log('ğŸ“‹ × ×ª×•× ×™× ×œ×©××™×¨×”:', bookings);\n      if (bookings.length === 0) {\n        setError('××™×Ÿ ××’×¨×©×™× ×œ×©××™×¨×” - ×›×œ ×”××’×¨×©×™× ×”× ×× ×•×—×”');\n        setIsSaving(false);\n        return;\n      }\n\n      // ×©×œ×™×—×” ×œ×©×¨×ª\n      const requestBody = {\n        bookings: bookings,\n        userId: user.id,\n        date: selectedDate\n      };\n      console.log('ğŸ“¤ ×©×•×œ×— ×œ×©×¨×ª:', requestBody);\n      const response = await fetch('http://localhost:3001/api/book-fields', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      });\n      console.log('ğŸ“¥ ×ª×’×•×‘×” ××”×©×¨×ª:', response.status, response.statusText);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('ğŸ“‹ × ×ª×•× ×™× ××”×©×¨×ª:', data);\n      if (data.success) {\n        console.log('âœ… ×”××™××•×Ÿ × ×©××¨ ×‘×”×¦×œ×—×”!');\n        setSaveSuccess(true);\n        setError('');\n\n        // ××¤×©×¨×•×ª ×œ×—×–×¨×” ×œ×ª×¤×¨×™×˜ ×”×¨××©×™\n        setTimeout(() => {\n          if (onBackClick) {\n            onBackClick();\n          }\n        }, 2000);\n      } else {\n        console.error('âŒ ×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ:', data.message);\n        setError(`×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ: ${data.message}`);\n      }\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ:', error);\n      setError(`×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ: ${error.message}`);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const runTests = () => {\n    console.log('ğŸ§ª ×”×¤×¢×œ×ª ×‘×“×™×§×•×ª:');\n    console.log('ğŸ‘¤ ××©×ª××©:', user);\n    console.log('ğŸ“… ×ª××¨×™×š:', selectedDate);\n    console.log('â° ×–××Ÿ:', `${startTime} - ${endTime}`);\n    console.log('ğŸ¯ ×”×¢×“×¤×•×ª:', userPreferences);\n    console.log('â° ×¨×‘×¢×™ ×©×¢×”:', timeSlots);\n    console.log('ğŸŸï¸ ××’×¨×©×™× ×œ×¤×™ ×–××Ÿ:', fieldsByTime);\n    let totalFields = 0;\n    Object.values(fieldsByTime).forEach(fields => {\n      totalFields += fields.length;\n    });\n    console.log('ğŸ“Š ×¡×š ×”×›×œ ××’×¨×©×™× ×–××™× ×™×:', totalFields);\n    alert('×‘×“×™×§×•×ª ×”×•×©×œ××•! ×‘×“×•×§ ××ª ×”×§×•× ×¡×•×œ ×œ×¤×¨×˜×™×.');\n  };\n  const canCreateWorkout = () => {\n    return !loading && timeSlots.length > 0 && Object.keys(fieldsByTime).length > 0;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-workout-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-button\",\n        onClick: onBackClick,\n        children: \"\\u05D7\\u05D6\\u05E8\\u05D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u23F3 \\u05D8\\u05D5\\u05E2\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DE\\u05EA\\u05DF \\u05D1\\u05D6\\u05DE\\u05DF \\u05E9\\u05D0\\u05E0\\u05D5 \\u05D8\\u05D5\\u05E2\\u05E0\\u05D9\\u05DD \\u05D0\\u05EA \\u05D4\\u05DE\\u05D9\\u05D3\\u05E2 \\u05D4\\u05D3\\u05E8\\u05D5\\u05E9 \\u05DC\\u05D9\\u05E6\\u05D9\\u05E8\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-workout-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"back-button\",\n      onClick: onBackClick,\n      children: \"\\u05D7\\u05D6\\u05E8\\u05D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83C\\uDFCB\\uFE0F \\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05D5\\u05EA\\u05D0\\u05DD \\u05D0\\u05D9\\u05E9\\u05D9\\u05EA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workout-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCC5 \\u05E4\\u05E8\\u05D8\\u05D9 \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 16\n            }, this), \" \", selectedDate]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u05E9\\u05E2\\u05D4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 16\n            }, this), \" \", startTime, \" - \", endTime]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u05DE\\u05E9\\u05EA\\u05DE\\u05E9:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 16\n            }, this), \" \", user.userName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u05E8\\u05D1\\u05E2\\u05D9 \\u05E9\\u05E2\\u05D4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 16\n            }, this), \" \", timeSlots.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83C\\uDFAF \\u05D4\\u05E2\\u05D3\\u05E4\\u05D5\\u05EA \\u05D4\\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 13\n          }, this), userPreferences.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u05E1\\u05E4\\u05D5\\u05E8\\u05D8\\u05D9\\u05DD \\u05DE\\u05D5\\u05E2\\u05D3\\u05E4\\u05D9\\u05DD: \", userPreferences.map((sportId, index) => `${index + 1}. ${SPORT_MAPPING[sportId] || sportId}`).join(', ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u05D0\\u05D9\\u05DF \\u05D4\\u05E2\\u05D3\\u05E4\\u05D5\\u05EA \\u05E9\\u05DE\\u05D5\\u05E8\\u05D5\\u05EA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83C\\uDFDF\\uFE0F \\u05DE\\u05D2\\u05E8\\u05E9\\u05D9\\u05DD \\u05D6\\u05DE\\u05D9\\u05E0\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05DE\\u05D2\\u05E8\\u05E9\\u05D9\\u05DD \\u05DC-\", Object.keys(fieldsByTime).length, \" \\u05E8\\u05D1\\u05E2\\u05D9 \\u05E9\\u05E2\\u05D4\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 13\n          }, this), Object.entries(fieldsByTime).slice(0, 3).map(([time, fields]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"time-fields\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [time, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 17\n            }, this), \" \", fields.length, \" \\u05DE\\u05D2\\u05E8\\u05E9\\u05D9\\u05DD\"]\n          }, time, true, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#ff6b6b',\n          textAlign: 'center',\n          margin: '20px 0',\n          padding: '15px',\n          background: 'rgba(255, 107, 107, 0.1)',\n          borderRadius: '8px',\n          border: '1px solid rgba(255, 107, 107, 0.3)'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"action-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"test-button\",\n          onClick: runTests,\n          children: \"\\uD83E\\uDDEA \\u05D1\\u05D3\\u05D5\\u05E7 \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"generate-button\",\n          onClick: generateWorkout,\n          disabled: isGenerating || !canCreateWorkout(),\n          children: isGenerating ? 'â³ ×™×•×¦×¨ ××™××•×Ÿ...' : 'ğŸ¯ ×¦×•×¨ ×ª×•×›× ×™×ª ××™××•×Ÿ ×—×›××”'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 9\n      }, this), workoutPlan && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workout-result\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u2705 \\u05EA\\u05D5\\u05DB\\u05E0\\u05D9\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E9\\u05DC\\u05DA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 13\n        }, this), workoutPlan.isAlternative && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"warning\",\n          children: [\"\\uD83D\\uDD04 \\u05D4\\u05D6\\u05DE\\u05DF \\u05D4\\u05DE\\u05E7\\u05D5\\u05E8\\u05D9 \\u05E9\\u05D5\\u05E0\\u05D4: \", workoutPlan.alternativeType, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 17\n          }, this), \"\\u05D6\\u05DE\\u05DF \\u05DE\\u05E7\\u05D5\\u05E8\\u05D9: \", workoutPlan.originalTime.startTime, \" - \", workoutPlan.originalTime.endTime, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 17\n          }, this), \"\\u05D6\\u05DE\\u05DF \\u05D7\\u05D3\\u05E9: \", workoutPlan.newTime.startTime, \" - \", workoutPlan.newTime.endTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"total-weight\",\n          children: [\"\\u05D4\\u05E6\\u05DC\\u05D7\\u05E0\\u05D5 \\u05DC\\u05D9\\u05E6\\u05D5\\u05E8 \", workoutPlan.successfulSlots, \" \\u05DE\\u05EA\\u05D5\\u05DA \", workoutPlan.totalSlots, \" \\u05E8\\u05D1\\u05E2\\u05D9 \\u05E9\\u05E2\\u05D4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"workout-timeline\",\n          children: workoutPlan.slots.map((slot, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"time-slot\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time\",\n              children: slot.time\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field-info\",\n              children: slot.field ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: slot.field.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u05E1\\u05E4\\u05D5\\u05E8\\u05D8: \", slot.field.sportType]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 25\n                }, this), slot.score !== undefined && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: '0.8rem',\n                    opacity: 0.7\n                  },\n                  children: [\"\\u05E0\\u05D9\\u05E7\\u05D5\\u05D3: \", slot.score]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  style: {\n                    color: '#ff6b6b'\n                  },\n                  children: \"\\u05DE\\u05E0\\u05D5\\u05D7\\u05D4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 686,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: slot.reason || '×œ× ×–××™×Ÿ'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 13\n        }, this), saveSuccess ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#51cf66',\n            textAlign: 'center',\n            margin: '20px 0',\n            padding: '15px',\n            background: 'rgba(81, 207, 102, 0.1)',\n            borderRadius: '8px',\n            border: '1px solid rgba(81, 207, 102, 0.3)'\n          },\n          children: \"\\u2705 \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E0\\u05E9\\u05DE\\u05E8 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4! \\u05DE\\u05E2\\u05D1\\u05D9\\u05E8 \\u05D0\\u05D5\\u05EA\\u05DA \\u05DC\\u05EA\\u05E4\\u05E8\\u05D9\\u05D8 \\u05D4\\u05E8\\u05D0\\u05E9\\u05D9...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-buttons\",\n          style: {\n            marginTop: '20px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"generate-button\",\n            onClick: saveWorkoutToDatabase,\n            disabled: isSaving,\n            style: {\n              backgroundColor: '#51cf66',\n              borderColor: '#51cf66'\n            },\n            children: isSaving ? 'â³ ×©×•××¨ ××™××•×Ÿ...' : 'ğŸ’¾ ××™×©×•×¨ ×•×©××™×¨×ª ×”××™××•×Ÿ'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 581,\n    columnNumber: 5\n  }, this);\n}\n_s(CreateWorkout, \"bUMEAfeNyqDaRvARcw3se9vBcrg=\");\n_c = CreateWorkout;\nexport default CreateWorkout;\nvar _c;\n$RefreshReg$(_c, \"CreateWorkout\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","SPORT_MAPPING","CreateWorkout","user","selectedDate","startTime","endTime","onBackClick","_s","isGenerating","setIsGenerating","workoutPlan","setWorkoutPlan","userPreferences","setUserPreferences","fieldsByTime","setFieldsByTime","timeSlots","setTimeSlots","loading","setLoading","error","setError","isSaving","setIsSaving","saveSuccess","setSaveSuccess","console","log","userName","type","length","initializeWorkoutData","loadUserPreferences","slots","createTimeSlots","loadAvailableFields","err","id","Error","url","response","fetch","data","json","success","selectedSports","startHour","startMinute","split","map","Number","endHour","endMinute","startTotalMinutes","endTotalMinutes","minutes","hours","Math","floor","mins","timeStr","toString","padStart","push","createTimeSlotsForRange","start","end","method","headers","body","JSON","stringify","date","status","ok","message","loadFieldsForTimeSlots","mockFieldsByTime","forEach","time","name","sportType","calculateScore","field","userSportNames","usedSports","selectedWorkout","score","preferenceIndex","indexOf","timesUsed","filter","sport","lastWorkout","runSmartAlgorithm","sportId","Boolean","i","timeSlot","availableFields","needsAlternative","reason","bestChoice","bestScore","totalSlots","successfulSlots","slot","adjustTime","minutesOffset","totalMinutes","newHours","newMinutes","calculateDuration","startHours","startMinutes","endHours","endMinutes","startTotal","endTotal","generateTimeAlternatives","originalStart","originalEnd","alternatives","originalDuration","minimumWorkout","maxReduction","isWorkoutValid","workout","validSlots","ceil","createSmartWorkout","Object","keys","originalWorkout","alternative","altTimeSlots","altFieldsByTime","altWorkout","isAlternative","alternativeType","originalTime","newTime","partialWorkout","generateWorkout","Promise","resolve","setTimeout","smartWorkout","saveWorkoutToDatabase","userId","bookings","idField","bookingDate","idUser","requestBody","statusText","runTests","totalFields","values","fields","alert","canCreateWorkout","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","index","join","entries","slice","style","color","textAlign","margin","padding","background","borderRadius","border","disabled","undefined","fontSize","opacity","marginTop","backgroundColor","borderColor","_c","$RefreshReg$"],"sources":["/Users/omri/Desktop/wolfit-gym/src/CreateWorkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './CreateWorkout.css';\n\n// ××™×¤×•×™ ××¡×¤×¨×™ ×”×¡×¤×•×¨×˜ ×œ×©××•×ª ×¢×‘×¨×™×™× (×ª×•×× ×œ×©×¨×ª)\nconst SPORT_MAPPING = {\n  1: '×›×“×•×¨×’×œ',      // Soccer\n  2: '×›×“×•×¨×¡×œ',      // Basketball  \n  3: '×˜×™×¤×•×¡',       // Climbing\n  4: '×—×“×¨ ×›×•×©×¨',    // Strength Training\n  5: '×§×•×¨×“×™× ×¦×™×”',   // Coordination\n  6: '×˜× ×™×¡',        // Tennis\n  7: '×¤×™× ×’×¤×•× ×’',    // Ping Pong\n  8: '×¨×™×§×•×“',       // Dance\n  9: '××•×¤× ×™×™×'      // Cycling\n};\n\nfunction CreateWorkout({ user, selectedDate, startTime, endTime, onBackClick }) {\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [workoutPlan, setWorkoutPlan] = useState(null);\n  const [userPreferences, setUserPreferences] = useState([]);\n  const [fieldsByTime, setFieldsByTime] = useState({});\n  const [timeSlots, setTimeSlots] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n\n  useEffect(() => {\n    console.log('ğŸš€ CreateWorkout × ×˜×¢×Ÿ ×¢×:', {\n      user: user?.userName,\n      selectedDate,\n      startTime,\n      endTime\n    });\n    \n    // ×‘×“×™×§×ª ×¤×•×¨××˜ ×”×ª××¨×™×š\n    console.log('ğŸ“… ×¤×•×¨××˜ ×”×ª××¨×™×š:', {\n      selectedDate,\n      type: typeof selectedDate,\n      length: selectedDate?.length\n    });\n    \n    initializeWorkoutData();\n  }, []);\n\n  const initializeWorkoutData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      await loadUserPreferences();\n      const slots = createTimeSlots();\n      setTimeSlots(slots);\n      await loadAvailableFields(slots);\n      \n      console.log('âœ… ×˜×¢×™× ×ª × ×ª×•× ×™× ×”×•×©×œ××”');\n      \n    } catch (err) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×:', err);\n      setError('×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×. ×× × × ×¡×” ×©×•×‘.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUserPreferences = async () => {\n    try {\n      if (!user || !user.id) {\n        throw new Error('××©×ª××© ×œ× ××•×’×“×¨');\n      }\n      \n      const url = `http://localhost:3001/api/user-preferences/${user.id}`;\n      const response = await fetch(url);\n      const data = await response.json();\n      \n      if (data.success) {\n        setUserPreferences(data.data.selectedSports || []);\n      } else {\n        setUserPreferences([]);\n      }\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×¢×“×¤×•×ª:', error);\n      setUserPreferences([]);\n      throw error;\n    }\n  };\n\n  const createTimeSlots = () => {\n    const slots = [];\n    const [startHour, startMinute] = startTime.split(':').map(Number);\n    const [endHour, endMinute] = endTime.split(':').map(Number);\n    const startTotalMinutes = startHour * 60 + startMinute;\n    const endTotalMinutes = endHour * 60 + endMinute;\n    \n    for (let minutes = startTotalMinutes; minutes < endTotalMinutes; minutes += 15) {\n      const hours = Math.floor(minutes / 60);\n      const mins = minutes % 60;\n      const timeStr = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n      slots.push(timeStr);\n    }\n    \n    return slots;\n  };\n\n  const createTimeSlotsForRange = (start, end) => {\n    const slots = [];\n    const [startHour, startMinute] = start.split(':').map(Number);\n    const [endHour, endMinute] = end.split(':').map(Number);\n    const startTotalMinutes = startHour * 60 + startMinute;\n    const endTotalMinutes = endHour * 60 + endMinute;\n    \n    for (let minutes = startTotalMinutes; minutes < endTotalMinutes; minutes += 15) {\n      const hours = Math.floor(minutes / 60);\n      const mins = minutes % 60;\n      const timeStr = `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n      slots.push(timeStr);\n    }\n    \n    return slots;\n  };\n\n  const loadAvailableFields = async (timeSlots) => {\n    try {\n      console.log('ğŸŸï¸ ×˜×•×¢×Ÿ ××’×¨×©×™× ×–××™× ×™×...');\n      console.log('ğŸ“… ×ª××¨×™×š:', selectedDate);\n      console.log('â° ×–×× ×™×:', timeSlots);\n      \n      const response = await fetch('http://localhost:3001/api/available-fields-for-workout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          date: selectedDate,\n          timeSlots: timeSlots\n        })\n      });\n      \n      console.log('ğŸ“¥ ×ª×’×•×‘×” ××”×©×¨×ª:', response.status);\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('ğŸ“‹ × ×ª×•× ×™× ××”×©×¨×ª:', data);\n        \n        if (data.success) {\n          setFieldsByTime(data.fieldsByTime);\n          console.log('âœ… ××’×¨×©×™× × ×˜×¢× ×• ×‘×”×¦×œ×—×”');\n          return;\n        } else {\n          console.error('âŒ ×©×’×™××” ××”×©×¨×ª:', data.message);\n          throw new Error(data.message);\n        }\n      } else {\n        console.error('âŒ ×©×’×™××ª HTTP:', response.status);\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ××’×¨×©×™×:', error);\n      throw error;\n    }\n  };\n\n  const loadFieldsForTimeSlots = async (timeSlots, date) => {\n    try {\n      const response = await fetch('http://localhost:3001/api/available-fields-for-workout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          date: date,\n          timeSlots: timeSlots\n        })\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          return data.fieldsByTime;\n        }\n      }\n      \n      const mockFieldsByTime = {};\n      timeSlots.forEach(time => {\n        mockFieldsByTime[time] = [\n          { id: 1, name: '××’×¨×© ×›×“×•×¨×’×œ 1', sportType: '×›×“×•×¨×’×œ' },\n          { id: 2, name: '××’×¨×© ×›×“×•×¨×¡×œ 1', sportType: '×›×“×•×¨×¡×œ' },\n          { id: 3, name: '×—×“×¨ ×˜×™×¤×•×¡ 1', sportType: '×˜×™×¤×•×¡' },\n          { id: 4, name: '×—×“×¨ ×›×•×©×¨ 1', sportType: '×—×“×¨ ×›×•×©×¨' },\n          { id: 5, name: '××•×œ× ×§×•×¨×“×™× ×¦×™×” 1', sportType: '×§×•×¨×“×™× ×¦×™×”' },\n          { id: 6, name: '××’×¨×© ×˜× ×™×¡ 1', sportType: '×˜× ×™×¡' },\n          { id: 7, name: '×©×•×œ×—×Ÿ ×¤×™× ×’×¤×•× ×’ 1', sportType: '×¤×™× ×’×¤×•× ×’' },\n          { id: 8, name: '××•×œ× ×¨×™×§×•×“ 1', sportType: '×¨×™×§×•×“' },\n          { id: 9, name: '××•×¤× ×™×™× ×¡×˜×˜×™ 1', sportType: '××•×¤× ×™×™×' }\n        ];\n      });\n      \n      return mockFieldsByTime;\n      \n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ××’×¨×©×™×:', error);\n      return {};\n    }\n  };\n\n  const calculateScore = (field, userSportNames, usedSports, selectedWorkout) => {\n    let score = 100; // × ×™×§×•×“ ×‘×¡×™×¡ ×’×‘×•×” (×¨×¢)\n    \n    console.log(`ğŸ§® ××—×©×‘ × ×™×§×•×“ ×œ××’×¨×©: ${field.name} (${field.sportType})`);\n    console.log(`ğŸ“‹ ×”×¢×“×¤×•×ª ××©×ª××© ×‘×¢×‘×¨×™×ª:`, userSportNames);\n    \n    // ×‘×“×™×§×ª ×¢×“×™×¤×•×ª - ×”×©×•×•××ª ×©××•×ª ×™×©×™×¨×”\n    const preferenceIndex = userSportNames.indexOf(field.sportType);\n    if (preferenceIndex !== -1) {\n      score = preferenceIndex * 10; // ×¢×“×™×¤×•×ª 1 = 0, ×¢×“×™×¤×•×ª 2 = 10, ×•×›×•'\n      console.log(`âœ… × ××¦× ×‘×¢×“×™×¤×•×ª ${preferenceIndex + 1}, × ×™×§×•×“ ×‘×¡×™×¡: ${score}`);\n    } else {\n      console.log(`âŒ ×œ× × ××¦× ×‘×¢×“×™×¤×•×ª (×¡×¤×•×¨×˜: ${field.sportType}), × ×™×§×•×“ ×‘×¡×™×¡: ${score}`);\n    }\n    \n    // ×§× ×¡ ×›×¤×™×œ×•×™×•×ª\n    const timesUsed = usedSports.filter(sport => sport === field.sportType).length;\n    if (timesUsed > 0) {\n      score += 150;\n      console.log(`ğŸ”„ ×§× ×¡ ×›×¤×™×œ×•×ª: +150 (×ª××©× ×• ${timesUsed} ×¤×¢××™×), × ×™×§×•×“ ×›×•×œ×œ: ${score}`);\n    }\n    \n    // ×§× ×¡ ×¨×¦×£\n    if (selectedWorkout.length > 0) {\n      const lastWorkout = selectedWorkout[selectedWorkout.length - 1];\n      if (lastWorkout.field && lastWorkout.field.sportType === field.sportType) {\n        score += 30;\n        console.log(`â­ ×§× ×¡ ×¨×¦×£: +30, × ×™×§×•×“ ×¡×•×¤×™: ${score}`);\n      }\n    }\n    \n    console.log(`ğŸ“Š × ×™×§×•×“ ×¡×•×¤×™ ×œ××’×¨×© ${field.name}: ${score}`);\n    return score;\n  };\n\n  const runSmartAlgorithm = (timeSlots, fieldsByTime, userPreferences) => {\n    const selectedWorkout = [];\n    const usedSports = [];\n    \n    console.log('ğŸ§  ××ª×—×™×œ ××œ×’×•×¨×™×ª× ×—×›×...');\n    console.log('ğŸ¯ ×”×¢×“×¤×•×ª ××©×ª××© (IDs):', userPreferences);\n    \n    // ×”××¨×ª ×”×¢×“×¤×•×ª ×œ××¢×¨×š ×©××•×ª ×¢×‘×¨×™×™× ×œ×‘×“×™×§×”\n    const userSportNames = userPreferences.map(sportId => SPORT_MAPPING[sportId]).filter(Boolean);\n    console.log('ğŸ¯ ×”×¢×“×¤×•×ª ××©×ª××© (×¢×‘×¨×™×ª):', userSportNames);\n    \n    for (let i = 0; i < timeSlots.length; i++) {\n      const timeSlot = timeSlots[i];\n      const availableFields = fieldsByTime[timeSlot] || [];\n      \n      console.log(`\\nâ° ××¢×‘×“ ×–××Ÿ: ${timeSlot}`);\n      console.log(`ğŸŸï¸ ××’×¨×©×™× ×–××™× ×™×: ${availableFields.length}`);\n      availableFields.forEach(field => {\n        console.log(`  - ${field.name} (${field.sportType})`);\n      });\n      \n      if (availableFields.length === 0) {\n        console.log('âŒ ××™×Ÿ ××’×¨×©×™× ×–××™× ×™× ×‘×–××Ÿ ×–×”');\n        selectedWorkout.push({\n          time: timeSlot,\n          field: null,\n          needsAlternative: true,\n          reason: '××™×Ÿ ××’×¨×©×™× ×–××™× ×™×'\n        });\n        continue;\n      }\n      \n      let bestChoice = null;\n      let bestScore = 999;\n      \n      console.log('ğŸ” ××—×©×‘ × ×™×§×•×“×™×:');\n      for (const field of availableFields) {\n        const score = calculateScore(field, userSportNames, usedSports, selectedWorkout);\n        \n        console.log(`${field.name}: ${score}`);\n        \n        if (score < bestScore) {\n          bestScore = score;\n          bestChoice = field;\n          console.log(`ğŸ¥‡ ××’×¨×© ×—×“×© ×‘×¨××©: ${field.name} ×¢× × ×™×§×•×“ ${score}`);\n        }\n      }\n      \n      if (bestChoice) {\n        console.log(`âœ… × ×‘×—×¨: ${bestChoice.name} (${bestChoice.sportType}) ×¢× × ×™×§×•×“ ${bestScore}`);\n        selectedWorkout.push({\n          time: timeSlot,\n          field: bestChoice,\n          score: bestScore\n        });\n        usedSports.push(bestChoice.sportType);\n        console.log(`ğŸ“ ×¡×¤×•×¨×˜×™× ×©× ×•×¦×¨×• ×¢×“ ×›×”:`, usedSports);\n      }\n    }\n    \n    return {\n      slots: selectedWorkout,\n      totalSlots: selectedWorkout.length,\n      successfulSlots: selectedWorkout.filter(slot => slot.field !== null).length\n    };\n  };\n\n  const adjustTime = (timeStr, minutesOffset) => {\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    const totalMinutes = hours * 60 + minutes + minutesOffset;\n    const newHours = Math.floor(totalMinutes / 60);\n    const newMinutes = totalMinutes % 60;\n    return `${newHours.toString().padStart(2, '0')}:${newMinutes.toString().padStart(2, '0')}`;\n  };\n\n  const calculateDuration = (start, end) => {\n    const [startHours, startMinutes] = start.split(':').map(Number);\n    const [endHours, endMinutes] = end.split(':').map(Number);\n    const startTotal = startHours * 60 + startMinutes;\n    const endTotal = endHours * 60 + endMinutes;\n    return endTotal - startTotal;\n  };\n\n  const generateTimeAlternatives = (originalStart, originalEnd) => {\n    const alternatives = [];\n    const originalDuration = calculateDuration(originalStart, originalEnd);\n    \n    alternatives.push({\n      type: '×”×§×“××” ×§×œ×”',\n      startTime: adjustTime(originalStart, -15),\n      endTime: adjustTime(originalEnd, -15)\n    });\n    \n    alternatives.push({\n      type: '×“×—×™×™×” ×§×œ×”',\n      startTime: adjustTime(originalStart, 15),\n      endTime: adjustTime(originalEnd, 15)\n    });\n    \n    alternatives.push({\n      type: '×”×§×“××” ×—×–×§×”',\n      startTime: adjustTime(originalStart, -30),\n      endTime: adjustTime(originalEnd, -30)\n    });\n    \n    alternatives.push({\n      type: '×“×—×™×™×” ×—×–×§×”',\n      startTime: adjustTime(originalStart, 30),\n      endTime: adjustTime(originalEnd, 30)\n    });\n    \n    const minimumWorkout = 30;\n    const maxReduction = originalDuration - minimumWorkout;\n    \n    if (maxReduction >= 15) {\n      alternatives.push({\n        type: '×§×™×¦×•×¨ ×§×œ',\n        startTime: originalStart,\n        endTime: adjustTime(originalEnd, -15)\n      });\n    }\n    \n    if (maxReduction >= 30) {\n      alternatives.push({\n        type: '×§×™×¦×•×¨ ×—×–×§',\n        startTime: originalStart,\n        endTime: adjustTime(originalEnd, -30)\n      });\n    }\n    \n    return alternatives;\n  };\n\n  const isWorkoutValid = (workout) => {\n    if (!workout || !workout.slots) return false;\n    const validSlots = workout.slots.filter(slot => slot.field !== null);\n    return validSlots.length >= Math.ceil(workout.totalSlots * 0.7);\n  };\n\n  const createSmartWorkout = async () => {\n    console.log('ğŸ§  ××ª×—×™×œ ××œ×’×•×¨×™×ª× ×—×›×...');\n    \n    if (timeSlots.length === 0 || Object.keys(fieldsByTime).length === 0) {\n      console.log('âŒ ××™×Ÿ × ×ª×•× ×™× ×–××™× ×™× ×œ××œ×’×•×¨×™×ª×');\n      return null;\n    }\n    \n    const originalWorkout = runSmartAlgorithm(timeSlots, fieldsByTime, userPreferences);\n    \n    if (isWorkoutValid(originalWorkout)) {\n      console.log('âœ… ××œ×’×•×¨×™×ª× ×”×¦×œ×™×— ×‘×–××Ÿ ×”××§×•×¨×™');\n      return originalWorkout;\n    }\n    \n    console.log('ğŸ”„ ××—×¤×© ×—×œ×•×¤×•×ª ×–××Ÿ...');\n    const alternatives = generateTimeAlternatives(startTime, endTime);\n    \n    for (const alternative of alternatives) {\n      console.log(`ğŸ• ×‘×•×“×§ ×—×œ×•×¤×”: ${alternative.startTime} - ${alternative.endTime}`);\n      \n      try {\n        const altTimeSlots = createTimeSlotsForRange(alternative.startTime, alternative.endTime);\n        const altFieldsByTime = await loadFieldsForTimeSlots(altTimeSlots, selectedDate);\n        const altWorkout = runSmartAlgorithm(altTimeSlots, altFieldsByTime, userPreferences);\n        \n        if (isWorkoutValid(altWorkout)) {\n          console.log('âœ… × ××¦××” ×—×œ×•×¤×ª ×–××Ÿ ××ª××™××”');\n          return {\n            ...altWorkout,\n            isAlternative: true,\n            alternativeType: alternative.type,\n            originalTime: { startTime, endTime },\n            newTime: { startTime: alternative.startTime, endTime: alternative.endTime }\n          };\n        }\n      } catch (error) {\n        console.log(`âŒ ×©×’×™××” ×‘×‘×“×™×§×ª ×—×œ×•×¤×”: ${error.message}`);\n      }\n    }\n    \n    console.log('ğŸ’¡ ××¦×™×¢ ×—×œ×•×¤×•×ª ××•×’×‘×œ×•×ª...');\n    return {\n      success: false,\n      alternatives: alternatives,\n      partialWorkout: originalWorkout\n    };\n  };\n\n  const generateWorkout = async () => {\n    if (timeSlots.length === 0 || Object.keys(fieldsByTime).length === 0) {\n      setError('×œ× × ×˜×¢× ×• × ×ª×•× ×™×. ×× × ×¨×¢× ×Ÿ ××ª ×”×“×£.');\n      return;\n    }\n    \n    setIsGenerating(true);\n    setError('');\n    \n    try {\n      console.log('ğŸš€ ××ª×—×™×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×ª ××™××•×Ÿ...');\n      \n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      const smartWorkout = await createSmartWorkout();\n      \n      if (smartWorkout) {\n        setWorkoutPlan(smartWorkout);\n        console.log('âœ… ×ª×•×›× ×™×ª ××™××•×Ÿ × ×•×¦×¨×” ×‘×”×¦×œ×—×”');\n      } else {\n        setError('×œ× ×”×¦×œ×™×— ×œ×™×¦×•×¨ ×ª×•×›× ×™×ª ××™××•×Ÿ ××ª××™××”');\n      }\n      \n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×™×¦×™×¨×ª ××™××•×Ÿ:', error);\n      setError('×©×’×™××” ×‘×™×¦×™×¨×ª ×”××™××•×Ÿ. ×× × × ×¡×” ×©×•×‘.');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const saveWorkoutToDatabase = async () => {\n    if (!workoutPlan || !user || !user.id) {\n      console.error('âŒ × ×ª×•× ×™× ×—×¡×¨×™×:', { workoutPlan: !!workoutPlan, user: !!user, userId: user?.id });\n      setError('××™×Ÿ ×ª×•×›× ×™×ª ××™××•×Ÿ ××• ××©×ª××© ×œ× ××•×’×“×¨');\n      return;\n    }\n\n    setIsSaving(true);\n    setError('');\n    setSaveSuccess(false);\n\n    try {\n      console.log('ğŸ’¾ ××ª×—×™×œ ×œ×©××•×¨ ××™××•×Ÿ ×‘××¡×“ ×”× ×ª×•× ×™×...');\n      console.log('ğŸ‘¤ ××©×ª××©:', user);\n      console.log('ğŸ“… ×ª××¨×™×š:', selectedDate);\n      console.log('ğŸ¯ ×ª×•×›× ×™×ª ××™××•×Ÿ:', workoutPlan);\n      \n      // ×”×›× ×ª ×”× ×ª×•× ×™× ×œ×©××™×¨×”\n      const bookings = workoutPlan.slots\n        .filter(slot => slot.field !== null) // ×¨×§ ××’×¨×©×™× ×©× ×‘×—×¨×•\n        .map(slot => ({\n          idField: slot.field.id,\n          bookingDate: selectedDate,\n          startTime: slot.time,\n          idUser: user.id\n        }));\n\n      console.log('ğŸ“‹ × ×ª×•× ×™× ×œ×©××™×¨×”:', bookings);\n\n      if (bookings.length === 0) {\n        setError('××™×Ÿ ××’×¨×©×™× ×œ×©××™×¨×” - ×›×œ ×”××’×¨×©×™× ×”× ×× ×•×—×”');\n        setIsSaving(false);\n        return;\n      }\n\n      // ×©×œ×™×—×” ×œ×©×¨×ª\n      const requestBody = {\n        bookings: bookings,\n        userId: user.id,\n        date: selectedDate\n      };\n\n      console.log('ğŸ“¤ ×©×•×œ×— ×œ×©×¨×ª:', requestBody);\n\n      const response = await fetch('http://localhost:3001/api/book-fields', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestBody)\n      });\n\n      console.log('ğŸ“¥ ×ª×’×•×‘×” ××”×©×¨×ª:', response.status, response.statusText);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log('ğŸ“‹ × ×ª×•× ×™× ××”×©×¨×ª:', data);\n\n      if (data.success) {\n        console.log('âœ… ×”××™××•×Ÿ × ×©××¨ ×‘×”×¦×œ×—×”!');\n        setSaveSuccess(true);\n        setError('');\n        \n        // ××¤×©×¨×•×ª ×œ×—×–×¨×” ×œ×ª×¤×¨×™×˜ ×”×¨××©×™\n        setTimeout(() => {\n          if (onBackClick) {\n            onBackClick();\n          }\n        }, 2000);\n      } else {\n        console.error('âŒ ×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ:', data.message);\n        setError(`×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ: ${data.message}`);\n      }\n\n    } catch (error) {\n      console.error('âŒ ×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ:', error);\n      setError(`×©×’×™××” ×‘×©××™×¨×ª ×”××™××•×Ÿ: ${error.message}`);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const runTests = () => {\n    console.log('ğŸ§ª ×”×¤×¢×œ×ª ×‘×“×™×§×•×ª:');\n    console.log('ğŸ‘¤ ××©×ª××©:', user);\n    console.log('ğŸ“… ×ª××¨×™×š:', selectedDate);\n    console.log('â° ×–××Ÿ:', `${startTime} - ${endTime}`);\n    console.log('ğŸ¯ ×”×¢×“×¤×•×ª:', userPreferences);\n    console.log('â° ×¨×‘×¢×™ ×©×¢×”:', timeSlots);\n    console.log('ğŸŸï¸ ××’×¨×©×™× ×œ×¤×™ ×–××Ÿ:', fieldsByTime);\n    \n    let totalFields = 0;\n    Object.values(fieldsByTime).forEach(fields => {\n      totalFields += fields.length;\n    });\n    console.log('ğŸ“Š ×¡×š ×”×›×œ ××’×¨×©×™× ×–××™× ×™×:', totalFields);\n    \n    alert('×‘×“×™×§×•×ª ×”×•×©×œ××•! ×‘×“×•×§ ××ª ×”×§×•× ×¡×•×œ ×œ×¤×¨×˜×™×.');\n  };\n\n  const canCreateWorkout = () => {\n    return !loading && timeSlots.length > 0 && Object.keys(fieldsByTime).length > 0;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"create-workout-container\">\n        <button className=\"back-button\" onClick={onBackClick}>×—×–×¨×”</button>\n        <div className=\"content\">\n          <h1>â³ ×˜×•×¢×Ÿ × ×ª×•× ×™×...</h1>\n          <p>×× × ×”××ª×Ÿ ×‘×–××Ÿ ×©×× ×• ×˜×•×¢× ×™× ××ª ×”××™×“×¢ ×”×“×¨×•×© ×œ×™×¦×™×¨×ª ×”××™××•×Ÿ</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"create-workout-container\">\n      <button className=\"back-button\" onClick={onBackClick}>\n        ×—×–×¨×”\n      </button>\n      \n      <div className=\"content\">\n        <h1>ğŸ‹ï¸ ×™×•×¦×¨ ××™××•×Ÿ ××•×ª×× ××™×©×™×ª</h1>\n        \n        <div className=\"workout-info\">\n          <div className=\"info-card\">\n            <h3>ğŸ“… ×¤×¨×˜×™ ×”××™××•×Ÿ</h3>\n            <p><strong>×ª××¨×™×š:</strong> {selectedDate}</p>\n            <p><strong>×©×¢×”:</strong> {startTime} - {endTime}</p>\n            <p><strong>××©×ª××©:</strong> {user.userName}</p>\n            <p><strong>×¨×‘×¢×™ ×©×¢×”:</strong> {timeSlots.length}</p>\n          </div>\n          \n          <div className=\"info-card\">\n            <h3>ğŸ¯ ×”×¢×“×¤×•×ª ×”××©×ª××©</h3>\n            {userPreferences.length > 0 ? (\n              <p>×¡×¤×•×¨×˜×™× ××•×¢×“×¤×™×: {userPreferences.map((sportId, index) => \n                `${index + 1}. ${SPORT_MAPPING[sportId] || sportId}`\n              ).join(', ')}</p>\n            ) : (\n              <p>××™×Ÿ ×”×¢×“×¤×•×ª ×©××•×¨×•×ª</p>\n            )}\n          </div>\n          \n          <div className=\"info-card\">\n            <h3>ğŸŸï¸ ××’×¨×©×™× ×–××™× ×™×</h3>\n            <p>× ××¦××• ××’×¨×©×™× ×œ-{Object.keys(fieldsByTime).length} ×¨×‘×¢×™ ×©×¢×”</p>\n            {Object.entries(fieldsByTime).slice(0, 3).map(([time, fields]) => (\n              <div key={time} className=\"time-fields\">\n                <strong>{time}:</strong> {fields.length} ××’×¨×©×™×\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {error && (\n          <div style={{ \n            color: '#ff6b6b', \n            textAlign: 'center', \n            margin: '20px 0',\n            padding: '15px',\n            background: 'rgba(255, 107, 107, 0.1)',\n            borderRadius: '8px',\n            border: '1px solid rgba(255, 107, 107, 0.3)'\n          }}>\n            {error}\n          </div>\n        )}\n\n        <div className=\"action-buttons\">\n          <button\n            className=\"test-button\"\n            onClick={runTests}\n          >\n            ğŸ§ª ×‘×“×•×§ × ×ª×•× ×™×\n          </button>\n\n          <button\n            className=\"generate-button\"\n            onClick={generateWorkout}\n            disabled={isGenerating || !canCreateWorkout()}\n          >\n            {isGenerating ? 'â³ ×™×•×¦×¨ ××™××•×Ÿ...' : 'ğŸ¯ ×¦×•×¨ ×ª×•×›× ×™×ª ××™××•×Ÿ ×—×›××”'}\n          </button>\n        </div>\n\n        {workoutPlan && (\n          <div className=\"workout-result\">\n            <h2>âœ… ×ª×•×›× ×™×ª ×”××™××•×Ÿ ×©×œ×š</h2>\n            \n            {workoutPlan.isAlternative && (\n              <div className=\"warning\">\n                ğŸ”„ ×”×–××Ÿ ×”××§×•×¨×™ ×©×•× ×”: {workoutPlan.alternativeType}\n                <br />\n                ×–××Ÿ ××§×•×¨×™: {workoutPlan.originalTime.startTime} - {workoutPlan.originalTime.endTime}\n                <br />\n                ×–××Ÿ ×—×“×©: {workoutPlan.newTime.startTime} - {workoutPlan.newTime.endTime}\n              </div>\n            )}\n            \n            <div className=\"total-weight\">\n              ×”×¦×œ×—× ×• ×œ×™×¦×•×¨ {workoutPlan.successfulSlots} ××ª×•×š {workoutPlan.totalSlots} ×¨×‘×¢×™ ×©×¢×”\n            </div>\n            \n            <div className=\"workout-timeline\">\n              {workoutPlan.slots.map((slot, index) => (\n                <div key={index} className=\"time-slot\">\n                  <div className=\"time\">{slot.time}</div>\n                  <div className=\"field-info\">\n                    {slot.field ? (\n                      <>\n                        <strong>{slot.field.name}</strong>\n                        <span>×¡×¤×•×¨×˜: {slot.field.sportType}</span>\n                        {slot.score !== undefined && (\n                          <span style={{fontSize: '0.8rem', opacity: 0.7}}>\n                            × ×™×§×•×“: {slot.score}\n                          </span>\n                        )}\n                      </>\n                    ) : (\n                      <>\n                        <strong style={{color: '#ff6b6b'}}>×× ×•×—×”</strong>\n                        <span>{slot.reason || '×œ× ×–××™×Ÿ'}</span>\n                      </>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {saveSuccess ? (\n              <div style={{ \n                color: '#51cf66', \n                textAlign: 'center', \n                margin: '20px 0',\n                padding: '15px',\n                background: 'rgba(81, 207, 102, 0.1)',\n                borderRadius: '8px',\n                border: '1px solid rgba(81, 207, 102, 0.3)'\n              }}>\n                âœ… ×”××™××•×Ÿ × ×©××¨ ×‘×”×¦×œ×—×”! ××¢×‘×™×¨ ××•×ª×š ×œ×ª×¤×¨×™×˜ ×”×¨××©×™...\n              </div>\n            ) : (\n              <div className=\"action-buttons\" style={{ marginTop: '20px' }}>\n                <button\n                  className=\"generate-button\"\n                  onClick={saveWorkoutToDatabase}\n                  disabled={isSaving}\n                  style={{ \n                    backgroundColor: '#51cf66',\n                    borderColor: '#51cf66'\n                  }}\n                >\n                  {isSaving ? 'â³ ×©×•××¨ ××™××•×Ÿ...' : 'ğŸ’¾ ××™×©×•×¨ ×•×©××™×¨×ª ×”××™××•×Ÿ'}\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CreateWorkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}