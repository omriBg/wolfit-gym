{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'./contexts/AuthContext';import'./StartWorkout.css';import'./CountdownTimer.css';import CountdownTimer from'./CountdownTimer';import{API_BASE_URL,WORKOUT_CONFIG}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StartWorkout(){var _currentWorkout$curre;const{user}=useAuth();const navigate=useNavigate();const[workouts,setWorkouts]=useState([]);const[workoutsByField,setWorkoutsByField]=useState({});const[currentWorkout,setCurrentWorkout]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showCancelConfirm,setShowCancelConfirm]=useState(false);const[workoutToCancel,setWorkoutToCancel]=useState(null);const[isCancelling,setIsCancelling]=useState(false);const[availableHours,setAvailableHours]=useState(0);// פונקציה לטעינת השעות הזמינות\nconst loadUserHours=async()=>{try{if(!user||!user.id)return;const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/user-hours/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){setAvailableHours(data.availableHours);console.log('שעות זמינות נטענו:',data.availableHours);}}catch(err){console.error('שגיאה בטעינת שעות:',err);}};useEffect(()=>{// מניעת גלילה של הגוף כשהמסך פתוח\ndocument.body.style.overflow='hidden';const fetchWorkouts=async()=>{try{setLoading(true);setError('');if(!user||!user.id){setError('משתמש לא מחובר');setLoading(false);return;}console.log('טוען אימונים עבור משתמש:',user.id);const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/future-workouts/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){console.log('נמצאו אימונים:',data.workouts);console.log('פירוט האימונים:',data.workouts.map(w=>({date:w.date,startTime:w.startTime,endTime:w.endTime,fieldName:w.fieldName})));setWorkouts(data.workouts);// מציאת זמן הסיום האחרון לכל תאריך\nconst workoutsByDate={};data.workouts.forEach(workout=>{if(!workoutsByDate[workout.date]){workoutsByDate[workout.date]=[];}workoutsByDate[workout.date].push(workout);});const lastEndTimeByDate={};Object.keys(workoutsByDate).forEach(date=>{const dayWorkouts=workoutsByDate[date].sort((a,b)=>a.endTime.localeCompare(b.endTime));lastEndTimeByDate[date]=dayWorkouts[dayWorkouts.length-1].endTime;});// סינון אימונים רק לפי זמן הסיום של האימון האחרון ביום\nconst now=new Date();console.log('זמן נוכחי:',now.toISOString());console.log('כל האימונים מהשרת:',data.workouts.length);console.log('פירוט כל האימונים:',data.workouts.map(w=>({date:w.date,startTime:w.startTime,endTime:w.endTime})));const filteredWorkouts=data.workouts.filter(workout=>{// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(workout.date.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=workout.date.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=workout.date;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));const lastEndTime=lastEndTimeByDate[workout.date];const[hours,minutes]=lastEndTime.split(':');// יצירת תאריך עם זמן סיום בזמן מקומי\nconst dayEndTime=new Date(workoutDate);dayEndTime.setHours(parseInt(hours),parseInt(minutes),0,0);// נציג אימונים שעדיין לא הסתיימו לחלוטין (כולל אימונים נוכחיים)\nconst isNotFinished=dayEndTime>now;console.log(\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05EA \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \".concat(workout.date,\" -> \").concat(dateString,\" \").concat(lastEndTime,\" -> \").concat(dayEndTime.toISOString(),\", \\u05DC\\u05D0 \\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD: \").concat(isNotFinished));return isNotFinished;});console.log(\"\\u05E1\\u05D5\\u05E0\\u05E0\\u05D5 \".concat(data.workouts.length-filteredWorkouts.length,\" \\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05D4\\u05D9\\u05D5\\u05DD \\u05E9\\u05DC\\u05D4\\u05DD \\u05DB\\u05D1\\u05E8 \\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD\"));const sortedWorkouts=filteredWorkouts.sort((a,b)=>{const dateA=new Date(a.date+' '+a.startTime);const dateB=new Date(b.date+' '+b.startTime);return dateA-dateB;});// חלוקה לפי תאריך ויצירת אימונים רציפים\nconst workoutsByDateDisplay={};sortedWorkouts.forEach(workout=>{const dateKey=workout.date;if(!workoutsByDateDisplay[dateKey]){workoutsByDateDisplay[dateKey]=[];}// בדיקה אם זה המשך של אימון קיים או אימון חדש\nconst lastWorkoutGroup=workoutsByDateDisplay[dateKey][workoutsByDateDisplay[dateKey].length-1];if(lastWorkoutGroup&&lastWorkoutGroup.length>0){const lastSlot=lastWorkoutGroup[lastWorkoutGroup.length-1];// חישוב הזמן בצורה פשוטה יותר\nconst lastTime=lastSlot.startTime.split(':');const currentTime=workout.startTime.split(':');const lastMinutes=parseInt(lastTime[0])*60+parseInt(lastTime[1]);const currentMinutes=parseInt(currentTime[0])*60+parseInt(currentTime[1]);const timeDiff=currentMinutes-lastMinutes;console.log(\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05EA \\u05E8\\u05E6\\u05D9\\u05E4\\u05D5\\u05EA: \".concat(lastSlot.startTime,\" -> \").concat(workout.startTime,\", \\u05D4\\u05E4\\u05E8\\u05E9: \").concat(timeDiff,\" \\u05D3\\u05E7\\u05D5\\u05EA\"));// אם ההפרש הוא SLOT_DURATION דקות (לבנות אימון), זה אותו אימון\nif(timeDiff===WORKOUT_CONFIG.SLOT_DURATION){// המשך של האימון הקיים - רציף\nconsole.log(\"\\u05DE\\u05DE\\u05E9\\u05D9\\u05DA \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E7\\u05D9\\u05D9\\u05DD (\\u05E8\\u05E6\\u05D9\\u05E3 - \".concat(WORKOUT_CONFIG.SLOT_DURATION,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"));lastWorkoutGroup.push(workout);}else{// אימון חדש - יש פער אחר\nconsole.log(\"\\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9 (\\u05D4\\u05E4\\u05E8\\u05E9 \".concat(timeDiff,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"));workoutsByDateDisplay[dateKey].push([workout]);}}else{// אימון ראשון ביום\nconsole.log(\"\\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E8\\u05D0\\u05E9\\u05D5\\u05DF \\u05D1\\u05D9\\u05D5\\u05DD\");workoutsByDateDisplay[dateKey].push([workout]);}});setWorkoutsByField(workoutsByDateDisplay);// זיהוי אימון נוכחי\nconst currentTime=new Date();let foundCurrentWorkout=null;for(const[dateKey,workoutGroups]of Object.entries(workoutsByDateDisplay)){for(const workoutGroup of workoutGroups){const firstWorkout=workoutGroup[0];const lastWorkout=workoutGroup[workoutGroup.length-1];// חילוץ תאריך\nlet dateString;if(dateKey.includes('T')){dateString=dateKey.split('T')[0];}else{dateString=dateKey;}const[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// יצירת זמן התחלה וסיום\nconst[startHours,startMinutes]=firstWorkout.startTime.split(':');const[endHours,endMinutes]=lastWorkout.endTime.split(':');const startTime=new Date(workoutDate);startTime.setHours(parseInt(startHours),parseInt(startMinutes),0,0);const endTime=new Date(workoutDate);endTime.setHours(parseInt(endHours),parseInt(endMinutes),0,0);// בדיקה אם האימון נוכחי\nif(currentTime>=startTime&&currentTime<=endTime){foundCurrentWorkout={date:dateKey,workoutGroup:workoutGroup,startTime:firstWorkout.startTime,endTime:lastWorkout.endTime,currentField:workoutGroup.find(w=>{const[wHours,wMinutes]=w.startTime.split(':');const wStartTime=new Date(workoutDate);wStartTime.setHours(parseInt(wHours),parseInt(wMinutes),0,0);const wEndTime=new Date(wStartTime.getTime()+WORKOUT_CONFIG.SLOT_DURATION*60000);// SLOT_DURATION דקות\nreturn currentTime>=wStartTime&&currentTime<=wEndTime;})};break;}}if(foundCurrentWorkout)break;}setCurrentWorkout(foundCurrentWorkout);}else{console.log('לא נמצאו אימונים או שגיאה:',data.message);setError(data.message);setWorkouts([]);setWorkoutsByField({});}}catch(error){console.error('שגיאה בטעינת האימונים:',error);setError('שגיאה בחיבור לשרת. נסה שוב.');setWorkouts([]);setWorkoutsByField({});}finally{setLoading(false);}};loadUserHours();fetchWorkouts();// החזרת הגלילה כשיוצאים מהמסך\nreturn()=>{document.body.style.overflow='unset';};},[user===null||user===void 0?void 0:user.id]);// עדכון הספירה אחורה וזמן נוכחי כל דקה\nuseEffect(()=>{const interval=setInterval(()=>{// עדכון כפוי של הקומפוננטה כדי לעדכן את הספירה אחורה והזמן הנוכחי\nsetWorkouts(prevWorkouts=>[...prevWorkouts]);},60000);// כל דקה\nreturn()=>clearInterval(interval);},[]);// פונקציה לעיצוב התאריך\nconst formatDate=dateString=>{try{const date=new Date(dateString);if(isNaN(date.getTime())){// אם התאריך לא תקין, ננסה פורמט אחר\nconst[year,month,day]=dateString.split('-');const newDate=new Date(year,month-1,day);if(isNaN(newDate.getTime())){return dateString;// נחזיר את המחרוזת המקורית אם לא הצלחנו\n}return newDate.toLocaleDateString('he-IL',{weekday:'long',year:'numeric',month:'long',day:'numeric'});}return date.toLocaleDateString('he-IL',{weekday:'long',year:'numeric',month:'long',day:'numeric'});}catch(error){console.error('שגיאה בעיצוב התאריך:',error);return dateString;}};// פונקציה לעיצוב השעה\nconst formatTime=timeString=>{return timeString.substring(0,5);// HH:MM\n};// פונקציה לחישוב זמן עד האימון\nconst getTimeUntilWorkout=dateKey=>{try{const today=new Date();// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(dateKey.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=dateKey.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=dateKey;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\ntoday.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);const diffTime=workoutDate.getTime()-today.getTime();const diffDays=Math.floor(diffTime/(1000*60*60*24));if(isNaN(diffDays)){return'בקרוב';}if(diffDays===0){return'היום';}else if(diffDays===1){return'מחר';}else if(diffDays===2){return'בעוד יומיים';}else{return\"\\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffDays,\" \\u05D9\\u05DE\\u05D9\\u05DD\");}}catch(error){console.error('שגיאה בחישוב זמן עד האימון:',error);return'בקרוב';}};// פונקציה לספירה אחורה אם זה היום\nconst getCountdownText=(dateKey,workouts)=>{try{const today=new Date();// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(dateKey.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=dateKey.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=dateKey;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\ntoday.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);// תמיד נחשב ספירה אחורה (לא רק אם זה היום)\nconst firstWorkout=workouts[0];if(!firstWorkout||!firstWorkout.startTime){return'האימון התחיל!';}// יצירת תאריך מלא עם שעה (בשימוש זמן מקומי)\nconst[hours,minutes]=firstWorkout.startTime.split(':');const workoutTime=new Date(parseInt(year),parseInt(month)-1,parseInt(day),parseInt(hours),parseInt(minutes));const now=new Date();const diffMs=workoutTime.getTime()-now.getTime();if(diffMs<=0){return'האימון התחיל!';}const diffDays=Math.floor(diffMs/(1000*60*60*24));const diffHours=Math.floor(diffMs%(1000*60*60*24)/(1000*60*60));const diffMinutes=Math.floor(diffMs%(1000*60*60)/(1000*60));if(diffDays>0){return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffDays,\" \\u05D9\\u05DE\\u05D9\\u05DD\");}else if(diffHours>0){return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffHours,\" \\u05E9\\u05E2\\u05D5\\u05EA \\u05D5-\").concat(diffMinutes,\" \\u05D3\\u05E7\\u05D5\\u05EA\");}else{return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffMinutes,\" \\u05D3\\u05E7\\u05D5\\u05EA\");}}catch(error){console.error('שגיאה בחישוב הספירה אחורה:',error);return'האימון מתחיל בקרוב';}};const loadFutureWorkouts=async()=>{try{if(!user||!user.id)return;const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/future-workouts/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){setWorkouts(data.workouts);setWorkoutsByField(data.workoutsByField);console.log('אימונים נטענו מחדש:',data.workouts.length);}}catch(err){console.error('שגיאה בטעינת אימונים:',err);}};const handleCancelWorkout=workoutGroup=>{// הגנה מפני ביטול כפול\nif(isCancelling||showCancelConfirm){console.log('ביטול כבר בתהליך או דיאלוג פתוח, לא ניתן לבטל אימון נוסף');return;}// הצגת דיאלוג אישור\nsetWorkoutToCancel(workoutGroup);setShowCancelConfirm(true);};const confirmCancelWorkout=async()=>{// הגנה מפני לחיצה כפולה\nif(isCancelling){console.log('ביטול כבר בתהליך, מדלג...');return;}// הגדרת מצב ביטול מיד\nsetIsCancelling(true);console.log('מבטל אימון:',workoutToCancel);try{if(!user||!user.id){setError('משתמש לא מחובר');setIsCancelling(false);return;}// יצירת רשימת הזמנות למחיקה\nconst bookingsToDelete=workoutToCancel.map(workout=>{// וידוא שהשעה בפורמט הנכון (HH:MM:SS)\nlet startTime=workout.startTime;if(startTime&&!startTime.includes(':')){startTime=startTime+':00';}return{idField:workout.fieldId,bookingDate:workout.date,startTime:startTime,idUser:user.id};});console.log('מחיקת הזמנות:',bookingsToDelete);const token=localStorage.getItem('authToken');const successfulCancellations=[];const failedCancellations=[];try{// מחיקת כל ההזמנות בנפרד עם מעקב אחרי הצלחות וכשלונות\nfor(const booking of bookingsToDelete){try{// עיבוד התאריך והשעה לפורמט נכון ל-URL\nconst encodedDate=booking.bookingDate;// המרת השעה לפורמט שהשרת מצפה לו (ללא נקודותיים)\nconst encodedTime=booking.startTime.replace(/:/g,'');console.log('מנסה לבטל הזמנה:',{userId:user.id,date:encodedDate,fieldId:booking.idField,time:encodedTime});const response=await fetch(\"\".concat(API_BASE_URL,\"/api/cancel-workout/\").concat(user.id,\"/\").concat(encodedDate,\"/\").concat(booking.idField,\"/\").concat(encodedTime),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){successfulCancellations.push(booking);console.log('✅ בוטל בהצלחה:',booking);}else{failedCancellations.push({booking,error:data.message||'שגיאה לא ידועה'});console.error('❌ כשל בביטול:',booking,data.message);}}catch(bookingError){failedCancellations.push({booking,error:bookingError.message||'שגיאה בחיבור לשרת'});console.error('❌ שגיאה בביטול הזמנה:',booking,bookingError);}}// בדיקה אם כל הביטולים הצליחו\nif(failedCancellations.length===0){console.log('✅ כל האימונים בוטלו בהצלחה');setError('');// רענון רשימת האימונים והשעות\nloadFutureWorkouts();loadUserHours();// סגירת דיאלוג האישור אחרי העדכון\nsetTimeout(()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);setIsCancelling(false);},1000);// המתנה של שנייה כדי לראות את הגלגל\n}else if(successfulCancellations.length>0){// ביטול חלקי - הצגת שגיאה מפורטת\nconst errorMessage=\"\\u05D1\\u05D5\\u05D8\\u05DC\\u05D5 \".concat(successfulCancellations.length,\" \\u05DE\\u05EA\\u05D5\\u05DA \").concat(bookingsToDelete.length,\" \\u05D4\\u05D6\\u05DE\\u05E0\\u05D5\\u05EA. \\n          \\u05DB\\u05E9\\u05DC\\u05D5\\u05E0\\u05D5\\u05EA: \").concat(failedCancellations.map(f=>f.error).join(', '));setError(errorMessage);console.warn('⚠️ ביטול חלקי:',errorMessage);// עדיין נסגור את הדיאלוג ונעדכן את הרשימה\nloadFutureWorkouts();loadUserHours();setTimeout(()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);setIsCancelling(false);},1000);}else{// כל הביטולים נכשלו\nconst errorMessage=\"\\u05DB\\u05DC \\u05D4\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\\u05D9\\u05DD \\u05E0\\u05DB\\u05E9\\u05DC\\u05D5: \".concat(failedCancellations.map(f=>f.error).join(', '));setError(errorMessage);console.error('❌ כל הביטולים נכשלו:',errorMessage);setIsCancelling(false);}}catch(error){console.error('שגיאה כללית בביטול האימון:',error);setError('שגיאה בחיבור לשרת. נסה שוב.');setIsCancelling(false);}}catch(error){console.error('שגיאה בביטול האימון:',error);setError('שגיאה בחיבור לשרת. נסה שוב.');setIsCancelling(false);}};const cancelCancelWorkout=()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);setIsCancelling(false);};const handleBookNewWorkout=()=>{console.log('מעבר להזמנת אימון חדש');// מעבר למסך הזמנת אימון\nnavigate('/workout-booking');};return/*#__PURE__*/_jsxs(\"div\",{className:\"start-workout-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate('/main-menu'),disabled:isCancelling,children:isCancelling?'מבטל...':'חזרה'}),/*#__PURE__*/_jsxs(\"div\",{className:\"start-workout-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"workout-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"available-hours\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hours-label\",children:\"\\u05E9\\u05E2\\u05D5\\u05EA \\u05D6\\u05DE\\u05D9\\u05E0\\u05D5\\u05EA:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"hours-value\",children:[availableHours,\" \\u05DC\\u05D1\\u05E0\\u05D5\\u05EA \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"]})]})]}),currentWorkout&&/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"current-workout-title\",children:\"\\uD83C\\uDFC3\\u200D\\u2642\\uFE0F \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"field-label\",children:\"\\u05DE\\u05D2\\u05E8\\u05E9 \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"field-name\",children:((_currentWorkout$curre=currentWorkout.currentField)===null||_currentWorkout$curre===void 0?void 0:_currentWorkout$curre.fieldName)||'לא זמין'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-time\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time-label\",children:\"\\u05D6\\u05DE\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"time-value\",children:new Date().toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"workout-duration\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"duration-label\",children:\"\\u05DE\\u05E9\\u05DA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"duration-value\",children:[currentWorkout.startTime,\" - \",currentWorkout.endTime]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"current-workout-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cancel-current-workout-btn\",onClick:()=>handleCancelWorkout(currentWorkout.workoutGroup),disabled:isCancelling||showCancelConfirm,children:isCancelling?'מבטל...':showCancelConfirm?'ממתין לאישור...':'בטל אימון נוכחי'})})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA \\u05DE\\u05D4\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA...\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"no-workouts\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4: \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"no-workouts-button\",onClick:()=>window.location.reload(),children:\"\\u05E0\\u05E1\\u05D4 \\u05E9\\u05D5\\u05D1\"})]}):workouts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-workouts\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D0\\u05D9\\u05DF \\u05DC\\u05DA \\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E2\\u05EA\\u05D9\\u05D3\\u05D9\\u05D9\\u05DD \\u05DE\\u05EA\\u05D5\\u05DB\\u05E0\\u05E0\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"no-workouts-button\",onClick:handleBookNewWorkout,children:\"\\u05D4\\u05D6\\u05DE\\u05DF \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"workouts-list\",children:Object.entries(workoutsByField).map(_ref=>{let[dateKey,workoutGroups]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"date-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"date-title\",children:[\"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \",formatDate(dateKey)]}),workoutGroups.map((workoutGroup,groupIndex)=>{const firstWorkout=workoutGroup[0];const lastWorkout=workoutGroup[workoutGroup.length-1];const totalDuration=workoutGroup.length*WORKOUT_CONFIG.SLOT_DURATION;// כל שיבוץ הוא SLOT_DURATION דקות\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"workout-session\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"workout-session-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"workout-time-range\",children:[formatTime(firstWorkout.startTime),\" - \",formatTime(lastWorkout.endTime),\" (\",totalDuration,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workout-schedule\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u05DC\\u05D5\\u05D7 \\u05D6\\u05DE\\u05E0\\u05D9\\u05DD:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-slots\",children:workoutGroup.map((slot,index)=>{const startTime=slot.startTime;const endTime=slot.endTime;const isValidTime=startTime&&endTime&&startTime!==endTime;return/*#__PURE__*/_jsxs(\"div\",{className:\"time-slot\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:isValidTime?\"\".concat(formatTime(startTime),\" - \").concat(formatTime(endTime)):\"\".concat(formatTime(startTime),\" (\\u05DC\\u05D1\\u05E0\\u05D5\\u05EA \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF)\")}),/*#__PURE__*/_jsx(\"span\",{className:\"field\",children:slot.fieldName}),/*#__PURE__*/_jsx(\"span\",{className:\"sport\",children:slot.sportType})]},index);})})]}),/*#__PURE__*/_jsx(CountdownTimer,{targetDate:dateKey,targetTime:firstWorkout.startTime,workoutGroup:workoutGroup,onComplete:()=>console.log('אימון הושלם:',\"\".concat(dateKey,\"_\").concat(groupIndex))}),(()=>{const today=new Date();// חילוץ תאריך מהמחרוזת UTC\nlet dateString;if(dateKey.includes('T')){// אם זה פורמט UTC, נחלץ רק את החלק של התאריך\ndateString=dateKey.split('T')[0];}else{// אם זה כבר פורמט YYYY-MM-DD\ndateString=dateKey;}// יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));today.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);const isToday=today.getTime()===workoutDate.getTime();return/*#__PURE__*/_jsx(\"button\",{className:\"cancel-workout-btn\",onClick:()=>handleCancelWorkout(workoutGroup),style:{marginTop:'15px'},disabled:isCancelling||showCancelConfirm,children:isCancelling?'מבטל...':showCancelConfirm?'ממתין לאישור...':'בטל אימון'});})()]},groupIndex);})]},dateKey);})})]}),isCancelling&&/*#__PURE__*/_jsx(\"div\",{className:\"cancelling-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cancelling-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u05DE\\u05D1\\u05D8\\u05DC \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"cancelling-subtitle\",children:\"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DE\\u05EA\\u05DF, \\u05D6\\u05D4 \\u05D9\\u05DB\\u05D5\\u05DC \\u05DC\\u05E7\\u05D7\\u05EA \\u05DB\\u05DE\\u05D4 \\u05E9\\u05E0\\u05D9\\u05D5\\u05EA\"})]})}),showCancelConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8 \\u05D1\\u05D9\\u05D8\\u05D5\\u05DC \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D4\\u05D0\\u05DD \\u05D0\\u05EA\\u05D4 \\u05D1\\u05D8\\u05D5\\u05D7 \\u05E9\\u05D1\\u05E8\\u05E6\\u05D5\\u05E0\\u05DA \\u05DC\\u05D1\\u05D8\\u05DC \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"confirm-dialog-warning\",children:\"\\u26A0\\uFE0F \\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05D6\\u05D5 \\u05DC\\u05D0 \\u05E0\\u05D9\\u05EA\\u05E0\\u05EA \\u05DC\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn cancel-btn\",onClick:cancelCancelWorkout,disabled:isCancelling,children:\"\\u05DC\\u05D0, \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E2\\u05DC \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-cancel-btn\",onClick:confirmCancelWorkout,disabled:isCancelling,children:isCancelling?'מבטל...':'כן, בטל את האימון'})]})]})})]});}export default StartWorkout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","CountdownTimer","API_BASE_URL","WORKOUT_CONFIG","jsx","_jsx","jsxs","_jsxs","StartWorkout","_currentWorkout$curre","user","navigate","workouts","setWorkouts","workoutsByField","setWorkoutsByField","currentWorkout","setCurrentWorkout","loading","setLoading","error","setError","showCancelConfirm","setShowCancelConfirm","workoutToCancel","setWorkoutToCancel","isCancelling","setIsCancelling","availableHours","setAvailableHours","loadUserHours","id","token","localStorage","getItem","response","fetch","concat","headers","data","json","success","console","log","err","document","body","style","overflow","fetchWorkouts","map","w","date","startTime","endTime","fieldName","workoutsByDate","forEach","workout","push","lastEndTimeByDate","Object","keys","dayWorkouts","sort","a","b","localeCompare","length","now","Date","toISOString","filteredWorkouts","filter","dateString","includes","split","year","month","day","workoutDate","parseInt","lastEndTime","hours","minutes","dayEndTime","setHours","isNotFinished","sortedWorkouts","dateA","dateB","workoutsByDateDisplay","dateKey","lastWorkoutGroup","lastSlot","lastTime","currentTime","lastMinutes","currentMinutes","timeDiff","SLOT_DURATION","foundCurrentWorkout","workoutGroups","entries","workoutGroup","firstWorkout","lastWorkout","startHours","startMinutes","endHours","endMinutes","currentField","find","wHours","wMinutes","wStartTime","wEndTime","getTime","message","interval","setInterval","prevWorkouts","clearInterval","formatDate","isNaN","newDate","toLocaleDateString","weekday","formatTime","timeString","substring","getTimeUntilWorkout","today","diffTime","diffDays","Math","floor","getCountdownText","workoutTime","diffMs","diffHours","diffMinutes","loadFutureWorkouts","handleCancelWorkout","confirmCancelWorkout","bookingsToDelete","idField","fieldId","bookingDate","idUser","successfulCancellations","failedCancellations","booking","encodedDate","encodedTime","replace","userId","time","method","bookingError","setTimeout","errorMessage","f","join","warn","cancelCancelWorkout","handleBookNewWorkout","className","children","onClick","disabled","toLocaleTimeString","hour","minute","window","location","reload","_ref","groupIndex","totalDuration","slot","index","isValidTime","sportType","targetDate","targetTime","onComplete","isToday","marginTop"],"sources":["/Users/omri/Desktop/wolfit-gym/frontend/src/StartWorkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './contexts/AuthContext';\nimport './StartWorkout.css';\nimport './CountdownTimer.css';\nimport CountdownTimer from './CountdownTimer';\nimport { API_BASE_URL, WORKOUT_CONFIG } from './config';\n\nfunction StartWorkout() {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [workouts, setWorkouts] = useState([]);\n  const [workoutsByField, setWorkoutsByField] = useState({});\n  const [currentWorkout, setCurrentWorkout] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showCancelConfirm, setShowCancelConfirm] = useState(false);\n  const [workoutToCancel, setWorkoutToCancel] = useState(null);\n  const [isCancelling, setIsCancelling] = useState(false);\n  const [availableHours, setAvailableHours] = useState(0);\n\n  // פונקציה לטעינת השעות הזמינות\n  const loadUserHours = async () => {\n    try {\n      if (!user || !user.id) return;\n      \n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/user-hours/${user.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        setAvailableHours(data.availableHours);\n        console.log('שעות זמינות נטענו:', data.availableHours);\n      }\n    } catch (err) {\n      console.error('שגיאה בטעינת שעות:', err);\n    }\n  };\n\n  useEffect(() => {\n    // מניעת גלילה של הגוף כשהמסך פתוח\n    document.body.style.overflow = 'hidden';\n    \n    const fetchWorkouts = async () => {\n      try {\n        setLoading(true);\n        setError('');\n        \n        if (!user || !user.id) {\n          setError('משתמש לא מחובר');\n          setLoading(false);\n          return;\n        }\n        \n        console.log('טוען אימונים עבור משתמש:', user.id);\n        \n        const token = localStorage.getItem('authToken');\n        const response = await fetch(`${API_BASE_URL}/api/future-workouts/${user.id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        const data = await response.json();\n        \n        if (data.success) {\n          console.log('נמצאו אימונים:', data.workouts);\n          console.log('פירוט האימונים:', data.workouts.map(w => ({\n            date: w.date,\n            startTime: w.startTime,\n            endTime: w.endTime,\n            fieldName: w.fieldName\n          })));\n          setWorkouts(data.workouts);\n          \n          // מציאת זמן הסיום האחרון לכל תאריך\n          const workoutsByDate = {};\n          data.workouts.forEach(workout => {\n            if (!workoutsByDate[workout.date]) {\n              workoutsByDate[workout.date] = [];\n            }\n            workoutsByDate[workout.date].push(workout);\n          });\n\n          const lastEndTimeByDate = {};\n          Object.keys(workoutsByDate).forEach(date => {\n            const dayWorkouts = workoutsByDate[date].sort((a, b) => a.endTime.localeCompare(b.endTime));\n            lastEndTimeByDate[date] = dayWorkouts[dayWorkouts.length - 1].endTime;\n          });\n\n          // סינון אימונים רק לפי זמן הסיום של האימון האחרון ביום\n          const now = new Date();\n          console.log('זמן נוכחי:', now.toISOString());\n          console.log('כל האימונים מהשרת:', data.workouts.length);\n          console.log('פירוט כל האימונים:', data.workouts.map(w => ({ date: w.date, startTime: w.startTime, endTime: w.endTime })));\n          \n          const filteredWorkouts = data.workouts.filter(workout => {\n            // חילוץ תאריך מהמחרוזת UTC\n            let dateString;\n            if (workout.date.includes('T')) {\n              // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n              dateString = workout.date.split('T')[0];\n            } else {\n              // אם זה כבר פורמט YYYY-MM-DD\n              dateString = workout.date;\n            }\n            \n            // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n            const [year, month, day] = dateString.split('-');\n            const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n            \n            const lastEndTime = lastEndTimeByDate[workout.date];\n            const [hours, minutes] = lastEndTime.split(':');\n            \n            // יצירת תאריך עם זמן סיום בזמן מקומי\n            const dayEndTime = new Date(workoutDate);\n            dayEndTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\n            \n            // נציג אימונים שעדיין לא הסתיימו לחלוטין (כולל אימונים נוכחיים)\n            const isNotFinished = dayEndTime > now;\n            console.log(`בדיקת תאריך: ${workout.date} -> ${dateString} ${lastEndTime} -> ${dayEndTime.toISOString()}, לא הסתיים: ${isNotFinished}`);\n            return isNotFinished;\n          });\n          \n          console.log(`סוננו ${data.workouts.length - filteredWorkouts.length} אימונים שהיום שלהם כבר הסתיים`);\n          \n          const sortedWorkouts = filteredWorkouts.sort((a, b) => {\n            const dateA = new Date(a.date + ' ' + a.startTime);\n            const dateB = new Date(b.date + ' ' + b.startTime);\n            return dateA - dateB;\n          });\n\n          // חלוקה לפי תאריך ויצירת אימונים רציפים\n          const workoutsByDateDisplay = {};\n          sortedWorkouts.forEach(workout => {\n            const dateKey = workout.date;\n            if (!workoutsByDateDisplay[dateKey]) {\n              workoutsByDateDisplay[dateKey] = [];\n            }\n            \n            // בדיקה אם זה המשך של אימון קיים או אימון חדש\n            const lastWorkoutGroup = workoutsByDateDisplay[dateKey][workoutsByDateDisplay[dateKey].length - 1];\n            if (lastWorkoutGroup && lastWorkoutGroup.length > 0) {\n              const lastSlot = lastWorkoutGroup[lastWorkoutGroup.length - 1];\n              \n              // חישוב הזמן בצורה פשוטה יותר\n              const lastTime = lastSlot.startTime.split(':');\n              const currentTime = workout.startTime.split(':');\n              const lastMinutes = parseInt(lastTime[0]) * 60 + parseInt(lastTime[1]);\n              const currentMinutes = parseInt(currentTime[0]) * 60 + parseInt(currentTime[1]);\n              const timeDiff = currentMinutes - lastMinutes;\n              \n              console.log(`בדיקת רציפות: ${lastSlot.startTime} -> ${workout.startTime}, הפרש: ${timeDiff} דקות`);\n              \n              // אם ההפרש הוא SLOT_DURATION דקות (לבנות אימון), זה אותו אימון\n              if (timeDiff === WORKOUT_CONFIG.SLOT_DURATION) {\n                // המשך של האימון הקיים - רציף\n                console.log(`ממשיך אימון קיים (רציף - ${WORKOUT_CONFIG.SLOT_DURATION} דקות)`);\n                lastWorkoutGroup.push(workout);\n              } else {\n                // אימון חדש - יש פער אחר\n                console.log(`יוצר אימון חדש (הפרש ${timeDiff} דקות)`);\n                workoutsByDateDisplay[dateKey].push([workout]);\n              }\n            } else {\n              // אימון ראשון ביום\n              console.log(`יוצר אימון ראשון ביום`);\n              workoutsByDateDisplay[dateKey].push([workout]);\n            }\n          });\n\n          setWorkoutsByField(workoutsByDateDisplay);\n          \n          // זיהוי אימון נוכחי\n          const currentTime = new Date();\n          let foundCurrentWorkout = null;\n          \n          for (const [dateKey, workoutGroups] of Object.entries(workoutsByDateDisplay)) {\n            for (const workoutGroup of workoutGroups) {\n              const firstWorkout = workoutGroup[0];\n              const lastWorkout = workoutGroup[workoutGroup.length - 1];\n              \n              // חילוץ תאריך\n              let dateString;\n              if (dateKey.includes('T')) {\n                dateString = dateKey.split('T')[0];\n              } else {\n                dateString = dateKey;\n              }\n              \n              const [year, month, day] = dateString.split('-');\n              const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n              \n              // יצירת זמן התחלה וסיום\n              const [startHours, startMinutes] = firstWorkout.startTime.split(':');\n              const [endHours, endMinutes] = lastWorkout.endTime.split(':');\n              \n              const startTime = new Date(workoutDate);\n              startTime.setHours(parseInt(startHours), parseInt(startMinutes), 0, 0);\n              \n              const endTime = new Date(workoutDate);\n              endTime.setHours(parseInt(endHours), parseInt(endMinutes), 0, 0);\n              \n              // בדיקה אם האימון נוכחי\n              if (currentTime >= startTime && currentTime <= endTime) {\n                foundCurrentWorkout = {\n                  date: dateKey,\n                  workoutGroup: workoutGroup,\n                  startTime: firstWorkout.startTime,\n                  endTime: lastWorkout.endTime,\n                  currentField: workoutGroup.find(w => {\n                    const [wHours, wMinutes] = w.startTime.split(':');\n                    const wStartTime = new Date(workoutDate);\n                    wStartTime.setHours(parseInt(wHours), parseInt(wMinutes), 0, 0);\n                    const wEndTime = new Date(wStartTime.getTime() + WORKOUT_CONFIG.SLOT_DURATION * 60000); // SLOT_DURATION דקות\n                    return currentTime >= wStartTime && currentTime <= wEndTime;\n                  })\n                };\n                break;\n              }\n            }\n            if (foundCurrentWorkout) break;\n          }\n          \n          setCurrentWorkout(foundCurrentWorkout);\n        } else {\n          console.log('לא נמצאו אימונים או שגיאה:', data.message);\n          setError(data.message);\n          setWorkouts([]);\n          setWorkoutsByField({});\n        }\n        \n      } catch (error) {\n        console.error('שגיאה בטעינת האימונים:', error);\n        setError('שגיאה בחיבור לשרת. נסה שוב.');\n        setWorkouts([]);\n        setWorkoutsByField({});\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUserHours();\n    fetchWorkouts();\n\n    // החזרת הגלילה כשיוצאים מהמסך\n    return () => {\n      document.body.style.overflow = 'unset';\n    };\n  }, [user?.id]);\n\n  // עדכון הספירה אחורה וזמן נוכחי כל דקה\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // עדכון כפוי של הקומפוננטה כדי לעדכן את הספירה אחורה והזמן הנוכחי\n      setWorkouts(prevWorkouts => [...prevWorkouts]);\n    }, 60000); // כל דקה\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // פונקציה לעיצוב התאריך\n  const formatDate = (dateString) => {\n    try {\n      const date = new Date(dateString);\n      if (isNaN(date.getTime())) {\n        // אם התאריך לא תקין, ננסה פורמט אחר\n        const [year, month, day] = dateString.split('-');\n        const newDate = new Date(year, month - 1, day);\n        if (isNaN(newDate.getTime())) {\n          return dateString; // נחזיר את המחרוזת המקורית אם לא הצלחנו\n        }\n        return newDate.toLocaleDateString('he-IL', {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        });\n      }\n      return date.toLocaleDateString('he-IL', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch (error) {\n      console.error('שגיאה בעיצוב התאריך:', error);\n      return dateString;\n    }\n  };\n\n  // פונקציה לעיצוב השעה\n  const formatTime = (timeString) => {\n    return timeString.substring(0, 5); // HH:MM\n  };\n\n  // פונקציה לחישוב זמן עד האימון\n  const getTimeUntilWorkout = (dateKey) => {\n    try {\n      const today = new Date();\n      \n      // חילוץ תאריך מהמחרוזת UTC\n      let dateString;\n      if (dateKey.includes('T')) {\n        // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n        dateString = dateKey.split('T')[0];\n      } else {\n        // אם זה כבר פורמט YYYY-MM-DD\n        dateString = dateKey;\n      }\n      \n      // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n      const [year, month, day] = dateString.split('-');\n      const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      \n      // איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\n      today.setHours(0, 0, 0, 0);\n      workoutDate.setHours(0, 0, 0, 0);\n      \n      const diffTime = workoutDate.getTime() - today.getTime();\n      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n      \n      if (isNaN(diffDays)) {\n        return 'בקרוב';\n      }\n      \n      if (diffDays === 0) {\n        return 'היום';\n      } else if (diffDays === 1) {\n        return 'מחר';\n      } else if (diffDays === 2) {\n        return 'בעוד יומיים';\n      } else {\n        return `בעוד ${diffDays} ימים`;\n      }\n    } catch (error) {\n      console.error('שגיאה בחישוב זמן עד האימון:', error);\n      return 'בקרוב';\n    }\n  };\n\n  // פונקציה לספירה אחורה אם זה היום\n  const getCountdownText = (dateKey, workouts) => {\n    try {\n      const today = new Date();\n      \n      // חילוץ תאריך מהמחרוזת UTC\n      let dateString;\n      if (dateKey.includes('T')) {\n        // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n        dateString = dateKey.split('T')[0];\n      } else {\n        // אם זה כבר פורמט YYYY-MM-DD\n        dateString = dateKey;\n      }\n      \n      // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n      const [year, month, day] = dateString.split('-');\n      const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      \n      // איפוס השעות כדי להשוות רק תאריכים (בשימוש זמן מקומי)\n      today.setHours(0, 0, 0, 0);\n      workoutDate.setHours(0, 0, 0, 0);\n      \n      // תמיד נחשב ספירה אחורה (לא רק אם זה היום)\n      const firstWorkout = workouts[0];\n      if (!firstWorkout || !firstWorkout.startTime) {\n        return 'האימון התחיל!';\n      }\n      \n      // יצירת תאריך מלא עם שעה (בשימוש זמן מקומי)\n      const [hours, minutes] = firstWorkout.startTime.split(':');\n      const workoutTime = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(hours), parseInt(minutes));\n      const now = new Date();\n      \n      const diffMs = workoutTime.getTime() - now.getTime();\n      \n      if (diffMs <= 0) {\n        return 'האימון התחיל!';\n      }\n      \n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n      const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n      \n      if (diffDays > 0) {\n        return `האימון מתחיל בעוד ${diffDays} ימים`;\n      } else if (diffHours > 0) {\n        return `האימון מתחיל בעוד ${diffHours} שעות ו-${diffMinutes} דקות`;\n      } else {\n        return `האימון מתחיל בעוד ${diffMinutes} דקות`;\n      }\n    } catch (error) {\n      console.error('שגיאה בחישוב הספירה אחורה:', error);\n      return 'האימון מתחיל בקרוב';\n    }\n  };\n\n  const loadFutureWorkouts = async () => {\n    try {\n      if (!user || !user.id) return;\n      \n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/future-workouts/${user.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        setWorkouts(data.workouts);\n        setWorkoutsByField(data.workoutsByField);\n        console.log('אימונים נטענו מחדש:', data.workouts.length);\n      }\n    } catch (err) {\n      console.error('שגיאה בטעינת אימונים:', err);\n    }\n  };\n\n  const handleCancelWorkout = (workoutGroup) => {\n    // הגנה מפני ביטול כפול\n    if (isCancelling || showCancelConfirm) {\n      console.log('ביטול כבר בתהליך או דיאלוג פתוח, לא ניתן לבטל אימון נוסף');\n      return;\n    }\n    \n    // הצגת דיאלוג אישור\n    setWorkoutToCancel(workoutGroup);\n    setShowCancelConfirm(true);\n  };\n\n  const confirmCancelWorkout = async () => {\n    // הגנה מפני לחיצה כפולה\n    if (isCancelling) {\n      console.log('ביטול כבר בתהליך, מדלג...');\n      return;\n    }\n\n    // הגדרת מצב ביטול מיד\n    setIsCancelling(true);\n    console.log('מבטל אימון:', workoutToCancel);\n\n    try {\n      \n      if (!user || !user.id) {\n        setError('משתמש לא מחובר');\n        setIsCancelling(false);\n        return;\n      }\n\n      // יצירת רשימת הזמנות למחיקה\n      const bookingsToDelete = workoutToCancel.map(workout => {\n        // וידוא שהשעה בפורמט הנכון (HH:MM:SS)\n        let startTime = workout.startTime;\n        if (startTime && !startTime.includes(':')) {\n          startTime = startTime + ':00';\n        }\n        \n        return {\n          idField: workout.fieldId,\n          bookingDate: workout.date,\n          startTime: startTime,\n          idUser: user.id\n        };\n      });\n\n      console.log('מחיקת הזמנות:', bookingsToDelete);\n\n      const token = localStorage.getItem('authToken');\n      const successfulCancellations = [];\n      const failedCancellations = [];\n      \n      try {\n        // מחיקת כל ההזמנות בנפרד עם מעקב אחרי הצלחות וכשלונות\n        for (const booking of bookingsToDelete) {\n          try {\n            // עיבוד התאריך והשעה לפורמט נכון ל-URL\n            const encodedDate = booking.bookingDate;\n            // המרת השעה לפורמט שהשרת מצפה לו (ללא נקודותיים)\n            const encodedTime = booking.startTime.replace(/:/g, '');\n            \n            console.log('מנסה לבטל הזמנה:', {\n              userId: user.id,\n              date: encodedDate,\n              fieldId: booking.idField,\n              time: encodedTime\n            });\n            \n            const response = await fetch(\n              `${API_BASE_URL}/api/cancel-workout/${user.id}/${encodedDate}/${booking.idField}/${encodedTime}`,\n              {\n                method: 'DELETE',\n                headers: {\n                  'Authorization': `Bearer ${token}`,\n                  'Content-Type': 'application/json',\n                }\n              });\n\n            const data = await response.json();\n            \n            if (data.success) {\n              successfulCancellations.push(booking);\n              console.log('✅ בוטל בהצלחה:', booking);\n            } else {\n              failedCancellations.push({\n                booking,\n                error: data.message || 'שגיאה לא ידועה'\n              });\n              console.error('❌ כשל בביטול:', booking, data.message);\n            }\n          } catch (bookingError) {\n            failedCancellations.push({\n              booking,\n              error: bookingError.message || 'שגיאה בחיבור לשרת'\n            });\n            console.error('❌ שגיאה בביטול הזמנה:', booking, bookingError);\n          }\n        }\n        \n        // בדיקה אם כל הביטולים הצליחו\n        if (failedCancellations.length === 0) {\n          console.log('✅ כל האימונים בוטלו בהצלחה');\n          setError('');\n          // רענון רשימת האימונים והשעות\n          loadFutureWorkouts();\n          loadUserHours();\n          // סגירת דיאלוג האישור אחרי העדכון\n          setTimeout(() => {\n            setShowCancelConfirm(false);\n            setWorkoutToCancel(null);\n            setIsCancelling(false);\n          }, 1000); // המתנה של שנייה כדי לראות את הגלגל\n        } else if (successfulCancellations.length > 0) {\n          // ביטול חלקי - הצגת שגיאה מפורטת\n          const errorMessage = `בוטלו ${successfulCancellations.length} מתוך ${bookingsToDelete.length} הזמנות. \n          כשלונות: ${failedCancellations.map(f => f.error).join(', ')}`;\n          setError(errorMessage);\n          console.warn('⚠️ ביטול חלקי:', errorMessage);\n          // עדיין נסגור את הדיאלוג ונעדכן את הרשימה\n          loadFutureWorkouts();\n          loadUserHours();\n          setTimeout(() => {\n            setShowCancelConfirm(false);\n            setWorkoutToCancel(null);\n            setIsCancelling(false);\n          }, 1000);\n        } else {\n          // כל הביטולים נכשלו\n          const errorMessage = `כל הביטולים נכשלו: ${failedCancellations.map(f => f.error).join(', ')}`;\n          setError(errorMessage);\n          console.error('❌ כל הביטולים נכשלו:', errorMessage);\n          setIsCancelling(false);\n        }\n      } catch (error) {\n        console.error('שגיאה כללית בביטול האימון:', error);\n        setError('שגיאה בחיבור לשרת. נסה שוב.');\n        setIsCancelling(false);\n      }\n    } catch (error) {\n      console.error('שגיאה בביטול האימון:', error);\n      setError('שגיאה בחיבור לשרת. נסה שוב.');\n      setIsCancelling(false);\n    }\n  };\n\n  const cancelCancelWorkout = () => {\n    setShowCancelConfirm(false);\n    setWorkoutToCancel(null);\n    setIsCancelling(false);\n  };\n\n  const handleBookNewWorkout = () => {\n    console.log('מעבר להזמנת אימון חדש');\n    // מעבר למסך הזמנת אימון\n    navigate('/workout-booking');\n  };\n\n  return (\n    <div className=\"start-workout-container\">\n      <button \n        className=\"back-button\" \n        onClick={() => navigate('/main-menu')}\n        disabled={isCancelling}\n      >\n        {isCancelling ? 'מבטל...' : 'חזרה'}\n      </button>\n      \n      <div className=\"start-workout-content\">\n        <div className=\"workout-header\">\n          <h1>האימונים שלך</h1>\n          <div className=\"available-hours\">\n            <span className=\"hours-label\">שעות זמינות:</span>\n            <span className=\"hours-value\">{availableHours} לבנות אימון</span>\n          </div>\n        </div>\n        \n        {/* חלון אימון נוכחי */}\n        {currentWorkout && (\n          <div className=\"current-workout-section\">\n            <h2 className=\"current-workout-title\">🏃‍♂️ אימון נוכחי</h2>\n            <div className=\"current-workout-card\">\n              <div className=\"current-workout-info\">\n                <div className=\"current-field\">\n                  <span className=\"field-label\">מגרש נוכחי:</span>\n                  <span className=\"field-name\">{currentWorkout.currentField?.fieldName || 'לא זמין'}</span>\n                </div>\n                <div className=\"current-time\">\n                  <span className=\"time-label\">זמן נוכחי:</span>\n                  <span className=\"time-value\">{new Date().toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })}</span>\n                </div>\n                <div className=\"workout-duration\">\n                  <span className=\"duration-label\">משך האימון:</span>\n                  <span className=\"duration-value\">{currentWorkout.startTime} - {currentWorkout.endTime}</span>\n                </div>\n              </div>\n              <div className=\"current-workout-actions\">\n                <button \n                  className=\"cancel-current-workout-btn\"\n                  onClick={() => handleCancelWorkout(currentWorkout.workoutGroup)}\n                  disabled={isCancelling || showCancelConfirm}\n                >\n                  {isCancelling ? 'מבטל...' : showCancelConfirm ? 'ממתין לאישור...' : 'בטל אימון נוכחי'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {loading ? (\n          <div className=\"loading\">\n            <p>טוען את האימונים שלך מהמערכת...</p>\n          </div>\n        ) : error ? (\n          <div className=\"no-workouts\">\n            <p>שגיאה: {error}</p>\n            <button className=\"no-workouts-button\" onClick={() => window.location.reload()}>\n              נסה שוב\n            </button>\n          </div>\n        ) : workouts.length === 0 ? (\n          <div className=\"no-workouts\">\n            <p>אין לך אימונים עתידיים מתוכננים</p>\n            <button className=\"no-workouts-button\" onClick={handleBookNewWorkout}>\n              הזמן אימון חדש\n            </button>\n          </div>\n        ) : (\n          <div className=\"workouts-list\">\n            {Object.entries(workoutsByField).map(([dateKey, workoutGroups]) => (\n              <div key={dateKey} className=\"date-section\">\n                <h2 className=\"date-title\">תאריך: {formatDate(dateKey)}</h2>\n                \n                {workoutGroups.map((workoutGroup, groupIndex) => {\n                  const firstWorkout = workoutGroup[0];\n                  const lastWorkout = workoutGroup[workoutGroup.length - 1];\n                  const totalDuration = workoutGroup.length * WORKOUT_CONFIG.SLOT_DURATION; // כל שיבוץ הוא SLOT_DURATION דקות\n                  \n                  return (\n                    <div key={groupIndex} className=\"workout-session\">\n                      <div className=\"workout-session-header\">\n                        <div className=\"workout-time-range\">\n                          {formatTime(firstWorkout.startTime)} - {formatTime(lastWorkout.endTime)} ({totalDuration} דקות)\n                        </div>\n                      </div>\n                      \n                      <div className=\"workout-schedule\">\n                        <h4>לוח זמנים:</h4>\n                        <div className=\"time-slots\">\n                          {workoutGroup.map((slot, index) => {\n                            const startTime = slot.startTime;\n                            const endTime = slot.endTime;\n                            const isValidTime = startTime && endTime && startTime !== endTime;\n                            \n                            return (\n                              <div key={index} className=\"time-slot\">\n                                <span className=\"time\">\n                                  {isValidTime ? `${formatTime(startTime)} - ${formatTime(endTime)}` : `${formatTime(startTime)} (לבנות אימון)`}\n                                </span>\n                                <span className=\"field\">{slot.fieldName}</span>\n                                <span className=\"sport\">{slot.sportType}</span>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                      \n                      <CountdownTimer \n                        targetDate={dateKey}\n                        targetTime={firstWorkout.startTime}\n                        workoutGroup={workoutGroup}\n                        onComplete={() => console.log('אימון הושלם:', `${dateKey}_${groupIndex}`)}\n                      />\n                      {/* מציג כפתור רק אם זה היום */}\n                      {(() => {\n                        const today = new Date();\n                        \n                        // חילוץ תאריך מהמחרוזת UTC\n                        let dateString;\n                        if (dateKey.includes('T')) {\n                          // אם זה פורמט UTC, נחלץ רק את החלק של התאריך\n                          dateString = dateKey.split('T')[0];\n                        } else {\n                          // אם זה כבר פורמט YYYY-MM-DD\n                          dateString = dateKey;\n                        }\n                        \n                        // יצירת תאריך מקומי מהמחרוזת YYYY-MM-DD\n                        const [year, month, day] = dateString.split('-');\n                        const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n                        \n                        today.setHours(0, 0, 0, 0);\n                        workoutDate.setHours(0, 0, 0, 0);\n                        const isToday = today.getTime() === workoutDate.getTime();\n                        \n                        return (\n                          <button \n                            className=\"cancel-workout-btn\"\n                            onClick={() => handleCancelWorkout(workoutGroup)}\n                            style={{ marginTop: '15px' }}\n                            disabled={isCancelling || showCancelConfirm}\n                          >\n                            {isCancelling ? 'מבטל...' : showCancelConfirm ? 'ממתין לאישור...' : 'בטל אימון'}\n                          </button>\n                        );\n                      })()}\n                    </div>\n                  );\n                })}\n              </div>\n            ))}\n            \n\n          </div>\n        )}\n      </div>\n\n      {/* Overlay למניעת לחיצות במהלך ביטול */}\n      {isCancelling && (\n        <div className=\"cancelling-overlay\">\n          <div className=\"cancelling-content\">\n            <div className=\"loading-spinner\"></div>\n            <p>מבטל את האימון...</p>\n            <p className=\"cancelling-subtitle\">אנא המתן, זה יכול לקחת כמה שניות</p>\n          </div>\n        </div>\n      )}\n\n      {/* דיאלוג אישור ביטול אימון */}\n      {showCancelConfirm && (\n        <div className=\"confirm-dialog-overlay\">\n          <div className=\"confirm-dialog\">\n            <div className=\"confirm-dialog-header\">\n              <h3>אישור ביטול אימון</h3>\n            </div>\n            <div className=\"confirm-dialog-body\">\n              <p>האם אתה בטוח שברצונך לבטל את האימון?</p>\n              <p className=\"confirm-dialog-warning\">\n                ⚠️ פעולה זו לא ניתנת לביטול\n              </p>\n            </div>\n            <div className=\"confirm-dialog-actions\">\n              <button \n                className=\"confirm-btn cancel-btn\"\n                onClick={cancelCancelWorkout}\n                disabled={isCancelling}\n              >\n                לא, שמור על האימון\n              </button>\n              <button \n                className=\"confirm-btn confirm-cancel-btn\"\n                onClick={confirmCancelWorkout}\n                disabled={isCancelling}\n              >\n                {isCancelling ? 'מבטל...' : 'כן, בטל את האימון'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StartWorkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}