{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'./contexts/AuthContext';import'./StartWorkout.css';import'./CountdownTimer.css';import CountdownTimer from'./CountdownTimer';import{API_BASE_URL}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StartWorkout(){var _currentWorkout$curre;const{user}=useAuth();const navigate=useNavigate();const[workouts,setWorkouts]=useState([]);const[workoutsByField,setWorkoutsByField]=useState({});const[currentWorkout,setCurrentWorkout]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showCancelConfirm,setShowCancelConfirm]=useState(false);const[workoutToCancel,setWorkoutToCancel]=useState(null);useEffect(()=>{// ×× ×™×¢×ª ×’×œ×™×œ×” ×©×œ ×”×’×•×£ ×›×©×”××¡×š ×¤×ª×•×—\ndocument.body.style.overflow='hidden';// ×¤×•× ×§×¦×™×” ×œ×˜×¢×™× ×ª ×”××™××•× ×™× ×”×¢×ª×™×“×™×™× ××”×©×¨×ª\nconst fetchWorkouts=async()=>{try{setLoading(true);setError('');if(!user||!user.id){setError('××©×ª××© ×œ× ××—×•×‘×¨');setLoading(false);return;}console.log('×˜×•×¢×Ÿ ××™××•× ×™× ×¢×‘×•×¨ ××©×ª××©:',user.id);const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/future-workouts/\").concat(user.id),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const data=await response.json();if(data.success){console.log('× ××¦××• ××™××•× ×™×:',data.workouts);console.log('×¤×™×¨×•×˜ ×”××™××•× ×™×:',data.workouts.map(w=>({date:w.date,startTime:w.startTime,endTime:w.endTime,fieldName:w.fieldName})));setWorkouts(data.workouts);// ××¦×™××ª ×–××Ÿ ×”×¡×™×•× ×”××—×¨×•×Ÿ ×œ×›×œ ×ª××¨×™×š\nconst workoutsByDate={};data.workouts.forEach(workout=>{if(!workoutsByDate[workout.date]){workoutsByDate[workout.date]=[];}workoutsByDate[workout.date].push(workout);});const lastEndTimeByDate={};Object.keys(workoutsByDate).forEach(date=>{const dayWorkouts=workoutsByDate[date].sort((a,b)=>a.endTime.localeCompare(b.endTime));lastEndTimeByDate[date]=dayWorkouts[dayWorkouts.length-1].endTime;});// ×¡×™× ×•×Ÿ ××™××•× ×™× ×¨×§ ×œ×¤×™ ×–××Ÿ ×”×¡×™×•× ×©×œ ×”××™××•×Ÿ ×”××—×¨×•×Ÿ ×‘×™×•×\nconst now=new Date();console.log('×–××Ÿ × ×•×›×—×™:',now.toISOString());console.log('×›×œ ×”××™××•× ×™× ××”×©×¨×ª:',data.workouts.length);console.log('×¤×™×¨×•×˜ ×›×œ ×”××™××•× ×™×:',data.workouts.map(w=>({date:w.date,startTime:w.startTime,endTime:w.endTime})));const filteredWorkouts=data.workouts.filter(workout=>{// ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\nlet dateString;if(workout.date.includes('T')){// ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\ndateString=workout.date.split('T')[0];}else{// ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\ndateString=workout.date;}// ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));const lastEndTime=lastEndTimeByDate[workout.date];const[hours,minutes]=lastEndTime.split(':');// ×™×¦×™×¨×ª ×ª××¨×™×š ×¢× ×–××Ÿ ×¡×™×•× ×‘×–××Ÿ ××§×•××™\nconst dayEndTime=new Date(workoutDate);dayEndTime.setHours(parseInt(hours),parseInt(minutes),0,0);// × ×¦×™×’ ××™××•× ×™× ×©×¢×“×™×™×Ÿ ×œ× ×”×¡×ª×™×™××• ×œ×—×œ×•×˜×™×Ÿ (×›×•×œ×œ ××™××•× ×™× × ×•×›×—×™×™×)\nconst isNotFinished=dayEndTime>now;console.log(\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05EA \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \".concat(workout.date,\" -> \").concat(dateString,\" \").concat(lastEndTime,\" -> \").concat(dayEndTime.toISOString(),\", \\u05DC\\u05D0 \\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD: \").concat(isNotFinished));return isNotFinished;});console.log(\"\\u05E1\\u05D5\\u05E0\\u05E0\\u05D5 \".concat(data.workouts.length-filteredWorkouts.length,\" \\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05D4\\u05D9\\u05D5\\u05DD \\u05E9\\u05DC\\u05D4\\u05DD \\u05DB\\u05D1\\u05E8 \\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD\"));const sortedWorkouts=filteredWorkouts.sort((a,b)=>{const dateA=new Date(a.date+' '+a.startTime);const dateB=new Date(b.date+' '+b.startTime);return dateA-dateB;});// ×—×œ×•×§×” ×œ×¤×™ ×ª××¨×™×š ×•×™×¦×™×¨×ª ××™××•× ×™× ×¨×¦×™×¤×™×\nconst workoutsByDateDisplay={};sortedWorkouts.forEach(workout=>{const dateKey=workout.date;if(!workoutsByDateDisplay[dateKey]){workoutsByDateDisplay[dateKey]=[];}// ×‘×“×™×§×” ×× ×–×” ×”××©×š ×©×œ ××™××•×Ÿ ×§×™×™× ××• ××™××•×Ÿ ×—×“×©\nconst lastWorkoutGroup=workoutsByDateDisplay[dateKey][workoutsByDateDisplay[dateKey].length-1];if(lastWorkoutGroup&&lastWorkoutGroup.length>0){const lastSlot=lastWorkoutGroup[lastWorkoutGroup.length-1];// ×—×™×©×•×‘ ×”×–××Ÿ ×‘×¦×•×¨×” ×¤×©×•×˜×” ×™×•×ª×¨\nconst lastTime=lastSlot.startTime.split(':');const currentTime=workout.startTime.split(':');const lastMinutes=parseInt(lastTime[0])*60+parseInt(lastTime[1]);const currentMinutes=parseInt(currentTime[0])*60+parseInt(currentTime[1]);const timeDiff=currentMinutes-lastMinutes;console.log(\"\\u05D1\\u05D3\\u05D9\\u05E7\\u05EA \\u05E8\\u05E6\\u05D9\\u05E4\\u05D5\\u05EA: \".concat(lastSlot.startTime,\" -> \").concat(workout.startTime,\", \\u05D4\\u05E4\\u05E8\\u05E9: \").concat(timeDiff,\" \\u05D3\\u05E7\\u05D5\\u05EA\"));// ×× ×”×”×¤×¨×© ×”×•× 15 ×“×§×•×ª (×¨×‘×¢ ×©×¢×”), ×–×” ××•×ª×• ××™××•×Ÿ\nif(timeDiff===15){// ×”××©×š ×©×œ ×”××™××•×Ÿ ×”×§×™×™× - ×¨×¦×™×£\nconsole.log(\"\\u05DE\\u05DE\\u05E9\\u05D9\\u05DA \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E7\\u05D9\\u05D9\\u05DD (\\u05E8\\u05E6\\u05D9\\u05E3 - 15 \\u05D3\\u05E7\\u05D5\\u05EA)\");lastWorkoutGroup.push(workout);}else{// ××™××•×Ÿ ×—×“×© - ×™×© ×¤×¢×¨ ××—×¨\nconsole.log(\"\\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9 (\\u05D4\\u05E4\\u05E8\\u05E9 \".concat(timeDiff,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"));workoutsByDateDisplay[dateKey].push([workout]);}}else{// ××™××•×Ÿ ×¨××©×•×Ÿ ×‘×™×•×\nconsole.log(\"\\u05D9\\u05D5\\u05E6\\u05E8 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E8\\u05D0\\u05E9\\u05D5\\u05DF \\u05D1\\u05D9\\u05D5\\u05DD\");workoutsByDateDisplay[dateKey].push([workout]);}});setWorkoutsByField(workoutsByDateDisplay);// ×–×™×”×•×™ ××™××•×Ÿ × ×•×›×—×™\nconst currentTime=new Date();let foundCurrentWorkout=null;for(const[dateKey,workoutGroups]of Object.entries(workoutsByDateDisplay)){for(const workoutGroup of workoutGroups){const firstWorkout=workoutGroup[0];const lastWorkout=workoutGroup[workoutGroup.length-1];// ×—×™×œ×•×¥ ×ª××¨×™×š\nlet dateString;if(dateKey.includes('T')){dateString=dateKey.split('T')[0];}else{dateString=dateKey;}const[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// ×™×¦×™×¨×ª ×–××Ÿ ×”×ª×—×œ×” ×•×¡×™×•×\nconst[startHours,startMinutes]=firstWorkout.startTime.split(':');const[endHours,endMinutes]=lastWorkout.endTime.split(':');const startTime=new Date(workoutDate);startTime.setHours(parseInt(startHours),parseInt(startMinutes),0,0);const endTime=new Date(workoutDate);endTime.setHours(parseInt(endHours),parseInt(endMinutes),0,0);// ×‘×“×™×§×” ×× ×”××™××•×Ÿ × ×•×›×—×™\nif(currentTime>=startTime&&currentTime<=endTime){foundCurrentWorkout={date:dateKey,workoutGroup:workoutGroup,startTime:firstWorkout.startTime,endTime:lastWorkout.endTime,currentField:workoutGroup.find(w=>{const[wHours,wMinutes]=w.startTime.split(':');const wStartTime=new Date(workoutDate);wStartTime.setHours(parseInt(wHours),parseInt(wMinutes),0,0);const wEndTime=new Date(wStartTime.getTime()+15*60000);// 15 ×“×§×•×ª\nreturn currentTime>=wStartTime&&currentTime<=wEndTime;})};break;}}if(foundCurrentWorkout)break;}setCurrentWorkout(foundCurrentWorkout);}else{console.log('×œ× × ××¦××• ××™××•× ×™× ××• ×©×’×™××”:',data.message);setError(data.message);setWorkouts([]);setWorkoutsByField({});}}catch(error){console.error('×©×’×™××” ×‘×˜×¢×™× ×ª ×”××™××•× ×™×:',error);setError('×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×©×¨×ª. × ×¡×” ×©×•×‘.');setWorkouts([]);setWorkoutsByField({});}finally{setLoading(false);}};fetchWorkouts();// ×”×—×–×¨×ª ×”×’×œ×™×œ×” ×›×©×™×•×¦××™× ××”××¡×š\nreturn()=>{document.body.style.overflow='unset';};},[user===null||user===void 0?void 0:user.id]);// ×¢×“×›×•×Ÿ ×”×¡×¤×™×¨×” ××—×•×¨×” ×•×–××Ÿ × ×•×›×—×™ ×›×œ ×“×§×”\nuseEffect(()=>{const interval=setInterval(()=>{// ×¢×“×›×•×Ÿ ×›×¤×•×™ ×©×œ ×”×§×•××¤×•× × ×˜×” ×›×“×™ ×œ×¢×“×›×Ÿ ××ª ×”×¡×¤×™×¨×” ××—×•×¨×” ×•×”×–××Ÿ ×”× ×•×›×—×™\nsetWorkouts(prevWorkouts=>[...prevWorkouts]);},60000);// ×›×œ ×“×§×”\nreturn()=>clearInterval(interval);},[]);// ×¤×•× ×§×¦×™×” ×œ×¢×™×¦×•×‘ ×”×ª××¨×™×š\nconst formatDate=dateString=>{try{const date=new Date(dateString);if(isNaN(date.getTime())){// ×× ×”×ª××¨×™×š ×œ× ×ª×§×™×Ÿ, × × ×¡×” ×¤×•×¨××˜ ××—×¨\nconst[year,month,day]=dateString.split('-');const newDate=new Date(year,month-1,day);if(isNaN(newDate.getTime())){return dateString;// × ×—×–×™×¨ ××ª ×”××—×¨×•×–×ª ×”××§×•×¨×™×ª ×× ×œ× ×”×¦×œ×—× ×•\n}return newDate.toLocaleDateString('he-IL',{weekday:'long',year:'numeric',month:'long',day:'numeric'});}return date.toLocaleDateString('he-IL',{weekday:'long',year:'numeric',month:'long',day:'numeric'});}catch(error){console.error('×©×’×™××” ×‘×¢×™×¦×•×‘ ×”×ª××¨×™×š:',error);return dateString;}};// ×¤×•× ×§×¦×™×” ×œ×¢×™×¦×•×‘ ×”×©×¢×”\nconst formatTime=timeString=>{return timeString.substring(0,5);// HH:MM\n};// ×¤×•× ×§×¦×™×” ×œ×—×™×©×•×‘ ×–××Ÿ ×¢×“ ×”××™××•×Ÿ\nconst getTimeUntilWorkout=dateKey=>{try{const today=new Date();// ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\nlet dateString;if(dateKey.includes('T')){// ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\ndateString=dateKey.split('T')[0];}else{// ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\ndateString=dateKey;}// ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// ××™×¤×•×¡ ×”×©×¢×•×ª ×›×“×™ ×œ×”×©×•×•×ª ×¨×§ ×ª××¨×™×›×™× (×‘×©×™××•×© ×–××Ÿ ××§×•××™)\ntoday.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);const diffTime=workoutDate.getTime()-today.getTime();const diffDays=Math.floor(diffTime/(1000*60*60*24));if(isNaN(diffDays)){return'×‘×§×¨×•×‘';}if(diffDays===0){return'×”×™×•×';}else if(diffDays===1){return'××—×¨';}else if(diffDays===2){return'×‘×¢×•×“ ×™×•××™×™×';}else{return\"\\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffDays,\" \\u05D9\\u05DE\\u05D9\\u05DD\");}}catch(error){console.error('×©×’×™××” ×‘×—×™×©×•×‘ ×–××Ÿ ×¢×“ ×”××™××•×Ÿ:',error);return'×‘×§×¨×•×‘';}};// ×¤×•× ×§×¦×™×” ×œ×¡×¤×™×¨×” ××—×•×¨×” ×× ×–×” ×”×™×•×\nconst getCountdownText=(dateKey,workouts)=>{try{const today=new Date();// ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\nlet dateString;if(dateKey.includes('T')){// ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\ndateString=dateKey.split('T')[0];}else{// ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\ndateString=dateKey;}// ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));// ××™×¤×•×¡ ×”×©×¢×•×ª ×›×“×™ ×œ×”×©×•×•×ª ×¨×§ ×ª××¨×™×›×™× (×‘×©×™××•×© ×–××Ÿ ××§×•××™)\ntoday.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);// ×ª××™×“ × ×—×©×‘ ×¡×¤×™×¨×” ××—×•×¨×” (×œ× ×¨×§ ×× ×–×” ×”×™×•×)\nconst firstWorkout=workouts[0];if(!firstWorkout||!firstWorkout.startTime){return'×”××™××•×Ÿ ×”×ª×—×™×œ!';}// ×™×¦×™×¨×ª ×ª××¨×™×š ××œ× ×¢× ×©×¢×” (×‘×©×™××•×© ×–××Ÿ ××§×•××™)\nconst[hours,minutes]=firstWorkout.startTime.split(':');const workoutTime=new Date(parseInt(year),parseInt(month)-1,parseInt(day),parseInt(hours),parseInt(minutes));const now=new Date();const diffMs=workoutTime.getTime()-now.getTime();if(diffMs<=0){return'×”××™××•×Ÿ ×”×ª×—×™×œ!';}const diffDays=Math.floor(diffMs/(1000*60*60*24));const diffHours=Math.floor(diffMs%(1000*60*60*24)/(1000*60*60));const diffMinutes=Math.floor(diffMs%(1000*60*60)/(1000*60));if(diffDays>0){return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffDays,\" \\u05D9\\u05DE\\u05D9\\u05DD\");}else if(diffHours>0){return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffHours,\" \\u05E9\\u05E2\\u05D5\\u05EA \\u05D5-\").concat(diffMinutes,\" \\u05D3\\u05E7\\u05D5\\u05EA\");}else{return\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05DE\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1\\u05E2\\u05D5\\u05D3 \".concat(diffMinutes,\" \\u05D3\\u05E7\\u05D5\\u05EA\");}}catch(error){console.error('×©×’×™××” ×‘×—×™×©×•×‘ ×”×¡×¤×™×¨×” ××—×•×¨×”:',error);return'×”××™××•×Ÿ ××ª×—×™×œ ×‘×§×¨×•×‘';}};const handleCancelWorkout=workoutGroup=>{// ×”×¦×’×ª ×“×™××œ×•×’ ××™×©×•×¨\nsetWorkoutToCancel(workoutGroup);setShowCancelConfirm(true);};const confirmCancelWorkout=async()=>{try{console.log('××‘×˜×œ ××™××•×Ÿ:',workoutToCancel);if(!user||!user.id){setError('××©×ª××© ×œ× ××—×•×‘×¨');return;}// ×™×¦×™×¨×ª ×¨×©×™××ª ×”×–×× ×•×ª ×œ××—×™×§×”\nconst bookingsToDelete=workoutToCancel.map(workout=>({idField:workout.fieldId,bookingDate:workout.date,startTime:workout.startTime,idUser:user.id}));console.log('××—×™×§×ª ×”×–×× ×•×ª:',bookingsToDelete);const token=localStorage.getItem('authToken');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/cancel-workout\"),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({userId:user.id,bookings:bookingsToDelete})});const data=await response.json();if(data.success){console.log('××™××•×Ÿ ×‘×•×˜×œ ×‘×”×¦×œ×—×”');// ×¡×’×™×¨×ª ×“×™××œ×•×’ ×”××™×©×•×¨\nsetShowCancelConfirm(false);setWorkoutToCancel(null);// ×¨×¢× ×•×Ÿ ×¨×©×™××ª ×”××™××•× ×™×\nwindow.location.reload();}else{console.error('×©×’×™××” ×‘×‘×™×˜×•×œ ×”××™××•×Ÿ:',data.message);setError(data.message||'×©×’×™××” ×‘×‘×™×˜×•×œ ×”××™××•×Ÿ');setShowCancelConfirm(false);setWorkoutToCancel(null);}}catch(error){console.error('×©×’×™××” ×‘×‘×™×˜×•×œ ×”××™××•×Ÿ:',error);setError('×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×©×¨×ª. × ×¡×” ×©×•×‘.');setShowCancelConfirm(false);setWorkoutToCancel(null);}};const cancelCancelWorkout=()=>{setShowCancelConfirm(false);setWorkoutToCancel(null);};const handleBookNewWorkout=()=>{console.log('××¢×‘×¨ ×œ×”×–×× ×ª ××™××•×Ÿ ×—×“×©');// ××¢×‘×¨ ×œ××¡×š ×”×–×× ×ª ××™××•×Ÿ\nnavigate('/workout-booking');};return/*#__PURE__*/_jsxs(\"div\",{className:\"start-workout-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate('/main-menu'),children:\"\\u05D7\\u05D6\\u05E8\\u05D4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"start-workout-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA\"}),currentWorkout&&/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"current-workout-title\",children:\"\\uD83C\\uDFC3\\u200D\\u2642\\uFE0F \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-workout-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"field-label\",children:\"\\u05DE\\u05D2\\u05E8\\u05E9 \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"field-name\",children:((_currentWorkout$curre=currentWorkout.currentField)===null||_currentWorkout$curre===void 0?void 0:_currentWorkout$curre.fieldName)||'×œ× ×–××™×Ÿ'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-time\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time-label\",children:\"\\u05D6\\u05DE\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"time-value\",children:new Date().toLocaleTimeString('he-IL',{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"workout-duration\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"duration-label\",children:\"\\u05DE\\u05E9\\u05DA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"duration-value\",children:[currentWorkout.startTime,\" - \",currentWorkout.endTime]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"current-workout-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cancel-current-workout-btn\",onClick:()=>handleCancelWorkout(currentWorkout.workoutGroup),children:\"\\u05D1\\u05D8\\u05DC \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9\"})})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E9\\u05DC\\u05DA \\u05DE\\u05D4\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA...\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"no-workouts\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4: \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"no-workouts-button\",onClick:()=>window.location.reload(),children:\"\\u05E0\\u05E1\\u05D4 \\u05E9\\u05D5\\u05D1\"})]}):workouts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-workouts\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D0\\u05D9\\u05DF \\u05DC\\u05DA \\u05D0\\u05D9\\u05DE\\u05D5\\u05E0\\u05D9\\u05DD \\u05E2\\u05EA\\u05D9\\u05D3\\u05D9\\u05D9\\u05DD \\u05DE\\u05EA\\u05D5\\u05DB\\u05E0\\u05E0\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"no-workouts-button\",onClick:handleBookNewWorkout,children:\"\\u05D4\\u05D6\\u05DE\\u05DF \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05D7\\u05D3\\u05E9\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"workouts-list\",children:Object.entries(workoutsByField).map(_ref=>{let[dateKey,workoutGroups]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"date-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"date-title\",children:[\"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA: \",formatDate(dateKey)]}),workoutGroups.map((workoutGroup,groupIndex)=>{const firstWorkout=workoutGroup[0];const lastWorkout=workoutGroup[workoutGroup.length-1];const totalDuration=workoutGroup.length*15;// ×›×œ ×©×™×‘×•×¥ ×”×•× 15 ×“×§×•×ª\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"workout-session\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"workout-session-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"workout-time-range\",children:[formatTime(firstWorkout.startTime),\" - \",formatTime(lastWorkout.endTime),\" (\",totalDuration,\" \\u05D3\\u05E7\\u05D5\\u05EA)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workout-schedule\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u05DC\\u05D5\\u05D7 \\u05D6\\u05DE\\u05E0\\u05D9\\u05DD:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"time-slots\",children:workoutGroup.map((slot,index)=>{const startTime=slot.startTime;const endTime=slot.endTime;const isValidTime=startTime&&endTime&&startTime!==endTime;return/*#__PURE__*/_jsxs(\"div\",{className:\"time-slot\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:isValidTime?\"\".concat(formatTime(startTime),\" - \").concat(formatTime(endTime)):\"\".concat(formatTime(startTime),\" (15 \\u05D3\\u05E7\\u05D5\\u05EA)\")}),/*#__PURE__*/_jsx(\"span\",{className:\"field\",children:slot.fieldName}),/*#__PURE__*/_jsx(\"span\",{className:\"sport\",children:slot.sportType})]},index);})})]}),/*#__PURE__*/_jsx(CountdownTimer,{targetDate:dateKey,targetTime:firstWorkout.startTime,workoutGroup:workoutGroup,onComplete:()=>console.log('××™××•×Ÿ ×”×•×©×œ×:',\"\".concat(dateKey,\"_\").concat(groupIndex))}),(()=>{const today=new Date();// ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\nlet dateString;if(dateKey.includes('T')){// ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\ndateString=dateKey.split('T')[0];}else{// ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\ndateString=dateKey;}// ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const workoutDate=new Date(parseInt(year),parseInt(month)-1,parseInt(day));today.setHours(0,0,0,0);workoutDate.setHours(0,0,0,0);const isToday=today.getTime()===workoutDate.getTime();return isToday?/*#__PURE__*/_jsx(\"button\",{className:\"cancel-workout-btn\",onClick:()=>handleCancelWorkout(workoutGroup),style:{marginTop:'15px'},children:\"\\u05D1\\u05D8\\u05DC \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"}):/*#__PURE__*/_jsx(\"button\",{className:\"cancel-workout-btn\",onClick:()=>handleCancelWorkout(workoutGroup),style:{marginTop:'15px'},children:\"\\u05D1\\u05D8\\u05DC \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"});})()]},groupIndex);})]},dateKey);})})]}),showCancelConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"confirm-dialog-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8 \\u05D1\\u05D9\\u05D8\\u05D5\\u05DC \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u05D4\\u05D0\\u05DD \\u05D0\\u05EA\\u05D4 \\u05D1\\u05D8\\u05D5\\u05D7 \\u05E9\\u05D1\\u05E8\\u05E6\\u05D5\\u05E0\\u05DA \\u05DC\\u05D1\\u05D8\\u05DC \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"confirm-dialog-warning\",children:\"\\u26A0\\uFE0F \\u05E4\\u05E2\\u05D5\\u05DC\\u05D4 \\u05D6\\u05D5 \\u05DC\\u05D0 \\u05E0\\u05D9\\u05EA\\u05E0\\u05EA \\u05DC\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn cancel-btn\",onClick:cancelCancelWorkout,children:\"\\u05DC\\u05D0, \\u05E9\\u05DE\\u05D5\\u05E8 \\u05E2\\u05DC \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn confirm-cancel-btn\",onClick:confirmCancelWorkout,children:\"\\u05DB\\u05DF, \\u05D1\\u05D8\\u05DC \\u05D0\\u05EA \\u05D4\\u05D0\\u05D9\\u05DE\\u05D5\\u05DF\"})]})]})})]});}export default StartWorkout;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","CountdownTimer","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","StartWorkout","_currentWorkout$curre","user","navigate","workouts","setWorkouts","workoutsByField","setWorkoutsByField","currentWorkout","setCurrentWorkout","loading","setLoading","error","setError","showCancelConfirm","setShowCancelConfirm","workoutToCancel","setWorkoutToCancel","document","body","style","overflow","fetchWorkouts","id","console","log","token","localStorage","getItem","response","fetch","concat","headers","data","json","success","map","w","date","startTime","endTime","fieldName","workoutsByDate","forEach","workout","push","lastEndTimeByDate","Object","keys","dayWorkouts","sort","a","b","localeCompare","length","now","Date","toISOString","filteredWorkouts","filter","dateString","includes","split","year","month","day","workoutDate","parseInt","lastEndTime","hours","minutes","dayEndTime","setHours","isNotFinished","sortedWorkouts","dateA","dateB","workoutsByDateDisplay","dateKey","lastWorkoutGroup","lastSlot","lastTime","currentTime","lastMinutes","currentMinutes","timeDiff","foundCurrentWorkout","workoutGroups","entries","workoutGroup","firstWorkout","lastWorkout","startHours","startMinutes","endHours","endMinutes","currentField","find","wHours","wMinutes","wStartTime","wEndTime","getTime","message","interval","setInterval","prevWorkouts","clearInterval","formatDate","isNaN","newDate","toLocaleDateString","weekday","formatTime","timeString","substring","getTimeUntilWorkout","today","diffTime","diffDays","Math","floor","getCountdownText","workoutTime","diffMs","diffHours","diffMinutes","handleCancelWorkout","confirmCancelWorkout","bookingsToDelete","idField","fieldId","bookingDate","idUser","method","JSON","stringify","userId","bookings","window","location","reload","cancelCancelWorkout","handleBookNewWorkout","className","children","onClick","toLocaleTimeString","hour","minute","_ref","groupIndex","totalDuration","slot","index","isValidTime","sportType","targetDate","targetTime","onComplete","isToday","marginTop"],"sources":["/Users/omri/Desktop/wolfit-gym/frontend/src/StartWorkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './contexts/AuthContext';\nimport './StartWorkout.css';\nimport './CountdownTimer.css';\nimport CountdownTimer from './CountdownTimer';\nimport { API_BASE_URL } from './config';\n\nfunction StartWorkout() {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [workouts, setWorkouts] = useState([]);\n  const [workoutsByField, setWorkoutsByField] = useState({});\n  const [currentWorkout, setCurrentWorkout] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showCancelConfirm, setShowCancelConfirm] = useState(false);\n  const [workoutToCancel, setWorkoutToCancel] = useState(null);\n\n  useEffect(() => {\n    // ×× ×™×¢×ª ×’×œ×™×œ×” ×©×œ ×”×’×•×£ ×›×©×”××¡×š ×¤×ª×•×—\n    document.body.style.overflow = 'hidden';\n    \n    // ×¤×•× ×§×¦×™×” ×œ×˜×¢×™× ×ª ×”××™××•× ×™× ×”×¢×ª×™×“×™×™× ××”×©×¨×ª\n    const fetchWorkouts = async () => {\n      try {\n        setLoading(true);\n        setError('');\n        \n        if (!user || !user.id) {\n          setError('××©×ª××© ×œ× ××—×•×‘×¨');\n          setLoading(false);\n          return;\n        }\n        \n        console.log('×˜×•×¢×Ÿ ××™××•× ×™× ×¢×‘×•×¨ ××©×ª××©:', user.id);\n        \n        const token = localStorage.getItem('authToken');\n        const response = await fetch(`${API_BASE_URL}/api/future-workouts/${user.id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        const data = await response.json();\n        \n        if (data.success) {\n          console.log('× ××¦××• ××™××•× ×™×:', data.workouts);\n          console.log('×¤×™×¨×•×˜ ×”××™××•× ×™×:', data.workouts.map(w => ({\n            date: w.date,\n            startTime: w.startTime,\n            endTime: w.endTime,\n            fieldName: w.fieldName\n          })));\n          setWorkouts(data.workouts);\n          \n          // ××¦×™××ª ×–××Ÿ ×”×¡×™×•× ×”××—×¨×•×Ÿ ×œ×›×œ ×ª××¨×™×š\n          const workoutsByDate = {};\n          data.workouts.forEach(workout => {\n            if (!workoutsByDate[workout.date]) {\n              workoutsByDate[workout.date] = [];\n            }\n            workoutsByDate[workout.date].push(workout);\n          });\n\n          const lastEndTimeByDate = {};\n          Object.keys(workoutsByDate).forEach(date => {\n            const dayWorkouts = workoutsByDate[date].sort((a, b) => a.endTime.localeCompare(b.endTime));\n            lastEndTimeByDate[date] = dayWorkouts[dayWorkouts.length - 1].endTime;\n          });\n\n          // ×¡×™× ×•×Ÿ ××™××•× ×™× ×¨×§ ×œ×¤×™ ×–××Ÿ ×”×¡×™×•× ×©×œ ×”××™××•×Ÿ ×”××—×¨×•×Ÿ ×‘×™×•×\n          const now = new Date();\n          console.log('×–××Ÿ × ×•×›×—×™:', now.toISOString());\n          console.log('×›×œ ×”××™××•× ×™× ××”×©×¨×ª:', data.workouts.length);\n          console.log('×¤×™×¨×•×˜ ×›×œ ×”××™××•× ×™×:', data.workouts.map(w => ({ date: w.date, startTime: w.startTime, endTime: w.endTime })));\n          \n          const filteredWorkouts = data.workouts.filter(workout => {\n            // ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\n            let dateString;\n            if (workout.date.includes('T')) {\n              // ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\n              dateString = workout.date.split('T')[0];\n            } else {\n              // ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\n              dateString = workout.date;\n            }\n            \n            // ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\n            const [year, month, day] = dateString.split('-');\n            const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n            \n            const lastEndTime = lastEndTimeByDate[workout.date];\n            const [hours, minutes] = lastEndTime.split(':');\n            \n            // ×™×¦×™×¨×ª ×ª××¨×™×š ×¢× ×–××Ÿ ×¡×™×•× ×‘×–××Ÿ ××§×•××™\n            const dayEndTime = new Date(workoutDate);\n            dayEndTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\n            \n            // × ×¦×™×’ ××™××•× ×™× ×©×¢×“×™×™×Ÿ ×œ× ×”×¡×ª×™×™××• ×œ×—×œ×•×˜×™×Ÿ (×›×•×œ×œ ××™××•× ×™× × ×•×›×—×™×™×)\n            const isNotFinished = dayEndTime > now;\n            console.log(`×‘×“×™×§×ª ×ª××¨×™×š: ${workout.date} -> ${dateString} ${lastEndTime} -> ${dayEndTime.toISOString()}, ×œ× ×”×¡×ª×™×™×: ${isNotFinished}`);\n            return isNotFinished;\n          });\n          \n          console.log(`×¡×•× × ×• ${data.workouts.length - filteredWorkouts.length} ××™××•× ×™× ×©×”×™×•× ×©×œ×”× ×›×‘×¨ ×”×¡×ª×™×™×`);\n          \n          const sortedWorkouts = filteredWorkouts.sort((a, b) => {\n            const dateA = new Date(a.date + ' ' + a.startTime);\n            const dateB = new Date(b.date + ' ' + b.startTime);\n            return dateA - dateB;\n          });\n\n          // ×—×œ×•×§×” ×œ×¤×™ ×ª××¨×™×š ×•×™×¦×™×¨×ª ××™××•× ×™× ×¨×¦×™×¤×™×\n          const workoutsByDateDisplay = {};\n          sortedWorkouts.forEach(workout => {\n            const dateKey = workout.date;\n            if (!workoutsByDateDisplay[dateKey]) {\n              workoutsByDateDisplay[dateKey] = [];\n            }\n            \n            // ×‘×“×™×§×” ×× ×–×” ×”××©×š ×©×œ ××™××•×Ÿ ×§×™×™× ××• ××™××•×Ÿ ×—×“×©\n            const lastWorkoutGroup = workoutsByDateDisplay[dateKey][workoutsByDateDisplay[dateKey].length - 1];\n            if (lastWorkoutGroup && lastWorkoutGroup.length > 0) {\n              const lastSlot = lastWorkoutGroup[lastWorkoutGroup.length - 1];\n              \n              // ×—×™×©×•×‘ ×”×–××Ÿ ×‘×¦×•×¨×” ×¤×©×•×˜×” ×™×•×ª×¨\n              const lastTime = lastSlot.startTime.split(':');\n              const currentTime = workout.startTime.split(':');\n              const lastMinutes = parseInt(lastTime[0]) * 60 + parseInt(lastTime[1]);\n              const currentMinutes = parseInt(currentTime[0]) * 60 + parseInt(currentTime[1]);\n              const timeDiff = currentMinutes - lastMinutes;\n              \n              console.log(`×‘×“×™×§×ª ×¨×¦×™×¤×•×ª: ${lastSlot.startTime} -> ${workout.startTime}, ×”×¤×¨×©: ${timeDiff} ×“×§×•×ª`);\n              \n              // ×× ×”×”×¤×¨×© ×”×•× 15 ×“×§×•×ª (×¨×‘×¢ ×©×¢×”), ×–×” ××•×ª×• ××™××•×Ÿ\n              if (timeDiff === 15) {\n                // ×”××©×š ×©×œ ×”××™××•×Ÿ ×”×§×™×™× - ×¨×¦×™×£\n                console.log(`×××©×™×š ××™××•×Ÿ ×§×™×™× (×¨×¦×™×£ - 15 ×“×§×•×ª)`);\n                lastWorkoutGroup.push(workout);\n              } else {\n                // ××™××•×Ÿ ×—×“×© - ×™×© ×¤×¢×¨ ××—×¨\n                console.log(`×™×•×¦×¨ ××™××•×Ÿ ×—×“×© (×”×¤×¨×© ${timeDiff} ×“×§×•×ª)`);\n                workoutsByDateDisplay[dateKey].push([workout]);\n              }\n            } else {\n              // ××™××•×Ÿ ×¨××©×•×Ÿ ×‘×™×•×\n              console.log(`×™×•×¦×¨ ××™××•×Ÿ ×¨××©×•×Ÿ ×‘×™×•×`);\n              workoutsByDateDisplay[dateKey].push([workout]);\n            }\n          });\n\n          setWorkoutsByField(workoutsByDateDisplay);\n          \n          // ×–×™×”×•×™ ××™××•×Ÿ × ×•×›×—×™\n          const currentTime = new Date();\n          let foundCurrentWorkout = null;\n          \n          for (const [dateKey, workoutGroups] of Object.entries(workoutsByDateDisplay)) {\n            for (const workoutGroup of workoutGroups) {\n              const firstWorkout = workoutGroup[0];\n              const lastWorkout = workoutGroup[workoutGroup.length - 1];\n              \n              // ×—×™×œ×•×¥ ×ª××¨×™×š\n              let dateString;\n              if (dateKey.includes('T')) {\n                dateString = dateKey.split('T')[0];\n              } else {\n                dateString = dateKey;\n              }\n              \n              const [year, month, day] = dateString.split('-');\n              const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n              \n              // ×™×¦×™×¨×ª ×–××Ÿ ×”×ª×—×œ×” ×•×¡×™×•×\n              const [startHours, startMinutes] = firstWorkout.startTime.split(':');\n              const [endHours, endMinutes] = lastWorkout.endTime.split(':');\n              \n              const startTime = new Date(workoutDate);\n              startTime.setHours(parseInt(startHours), parseInt(startMinutes), 0, 0);\n              \n              const endTime = new Date(workoutDate);\n              endTime.setHours(parseInt(endHours), parseInt(endMinutes), 0, 0);\n              \n              // ×‘×“×™×§×” ×× ×”××™××•×Ÿ × ×•×›×—×™\n              if (currentTime >= startTime && currentTime <= endTime) {\n                foundCurrentWorkout = {\n                  date: dateKey,\n                  workoutGroup: workoutGroup,\n                  startTime: firstWorkout.startTime,\n                  endTime: lastWorkout.endTime,\n                  currentField: workoutGroup.find(w => {\n                    const [wHours, wMinutes] = w.startTime.split(':');\n                    const wStartTime = new Date(workoutDate);\n                    wStartTime.setHours(parseInt(wHours), parseInt(wMinutes), 0, 0);\n                    const wEndTime = new Date(wStartTime.getTime() + 15 * 60000); // 15 ×“×§×•×ª\n                    return currentTime >= wStartTime && currentTime <= wEndTime;\n                  })\n                };\n                break;\n              }\n            }\n            if (foundCurrentWorkout) break;\n          }\n          \n          setCurrentWorkout(foundCurrentWorkout);\n        } else {\n          console.log('×œ× × ××¦××• ××™××•× ×™× ××• ×©×’×™××”:', data.message);\n          setError(data.message);\n          setWorkouts([]);\n          setWorkoutsByField({});\n        }\n        \n      } catch (error) {\n        console.error('×©×’×™××” ×‘×˜×¢×™× ×ª ×”××™××•× ×™×:', error);\n        setError('×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×©×¨×ª. × ×¡×” ×©×•×‘.');\n        setWorkouts([]);\n        setWorkoutsByField({});\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchWorkouts();\n\n    // ×”×—×–×¨×ª ×”×’×œ×™×œ×” ×›×©×™×•×¦××™× ××”××¡×š\n    return () => {\n      document.body.style.overflow = 'unset';\n    };\n  }, [user?.id]);\n\n  // ×¢×“×›×•×Ÿ ×”×¡×¤×™×¨×” ××—×•×¨×” ×•×–××Ÿ × ×•×›×—×™ ×›×œ ×“×§×”\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // ×¢×“×›×•×Ÿ ×›×¤×•×™ ×©×œ ×”×§×•××¤×•× × ×˜×” ×›×“×™ ×œ×¢×“×›×Ÿ ××ª ×”×¡×¤×™×¨×” ××—×•×¨×” ×•×”×–××Ÿ ×”× ×•×›×—×™\n      setWorkouts(prevWorkouts => [...prevWorkouts]);\n    }, 60000); // ×›×œ ×“×§×”\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // ×¤×•× ×§×¦×™×” ×œ×¢×™×¦×•×‘ ×”×ª××¨×™×š\n  const formatDate = (dateString) => {\n    try {\n      const date = new Date(dateString);\n      if (isNaN(date.getTime())) {\n        // ×× ×”×ª××¨×™×š ×œ× ×ª×§×™×Ÿ, × × ×¡×” ×¤×•×¨××˜ ××—×¨\n        const [year, month, day] = dateString.split('-');\n        const newDate = new Date(year, month - 1, day);\n        if (isNaN(newDate.getTime())) {\n          return dateString; // × ×—×–×™×¨ ××ª ×”××—×¨×•×–×ª ×”××§×•×¨×™×ª ×× ×œ× ×”×¦×œ×—× ×•\n        }\n        return newDate.toLocaleDateString('he-IL', {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        });\n      }\n      return date.toLocaleDateString('he-IL', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch (error) {\n      console.error('×©×’×™××” ×‘×¢×™×¦×•×‘ ×”×ª××¨×™×š:', error);\n      return dateString;\n    }\n  };\n\n  // ×¤×•× ×§×¦×™×” ×œ×¢×™×¦×•×‘ ×”×©×¢×”\n  const formatTime = (timeString) => {\n    return timeString.substring(0, 5); // HH:MM\n  };\n\n  // ×¤×•× ×§×¦×™×” ×œ×—×™×©×•×‘ ×–××Ÿ ×¢×“ ×”××™××•×Ÿ\n  const getTimeUntilWorkout = (dateKey) => {\n    try {\n      const today = new Date();\n      \n      // ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\n      let dateString;\n      if (dateKey.includes('T')) {\n        // ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\n        dateString = dateKey.split('T')[0];\n      } else {\n        // ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\n        dateString = dateKey;\n      }\n      \n      // ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\n      const [year, month, day] = dateString.split('-');\n      const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      \n      // ××™×¤×•×¡ ×”×©×¢×•×ª ×›×“×™ ×œ×”×©×•×•×ª ×¨×§ ×ª××¨×™×›×™× (×‘×©×™××•×© ×–××Ÿ ××§×•××™)\n      today.setHours(0, 0, 0, 0);\n      workoutDate.setHours(0, 0, 0, 0);\n      \n      const diffTime = workoutDate.getTime() - today.getTime();\n      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n      \n      if (isNaN(diffDays)) {\n        return '×‘×§×¨×•×‘';\n      }\n      \n      if (diffDays === 0) {\n        return '×”×™×•×';\n      } else if (diffDays === 1) {\n        return '××—×¨';\n      } else if (diffDays === 2) {\n        return '×‘×¢×•×“ ×™×•××™×™×';\n      } else {\n        return `×‘×¢×•×“ ${diffDays} ×™××™×`;\n      }\n    } catch (error) {\n      console.error('×©×’×™××” ×‘×—×™×©×•×‘ ×–××Ÿ ×¢×“ ×”××™××•×Ÿ:', error);\n      return '×‘×§×¨×•×‘';\n    }\n  };\n\n  // ×¤×•× ×§×¦×™×” ×œ×¡×¤×™×¨×” ××—×•×¨×” ×× ×–×” ×”×™×•×\n  const getCountdownText = (dateKey, workouts) => {\n    try {\n      const today = new Date();\n      \n      // ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\n      let dateString;\n      if (dateKey.includes('T')) {\n        // ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\n        dateString = dateKey.split('T')[0];\n      } else {\n        // ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\n        dateString = dateKey;\n      }\n      \n      // ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\n      const [year, month, day] = dateString.split('-');\n      const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      \n      // ××™×¤×•×¡ ×”×©×¢×•×ª ×›×“×™ ×œ×”×©×•×•×ª ×¨×§ ×ª××¨×™×›×™× (×‘×©×™××•×© ×–××Ÿ ××§×•××™)\n      today.setHours(0, 0, 0, 0);\n      workoutDate.setHours(0, 0, 0, 0);\n      \n      // ×ª××™×“ × ×—×©×‘ ×¡×¤×™×¨×” ××—×•×¨×” (×œ× ×¨×§ ×× ×–×” ×”×™×•×)\n      const firstWorkout = workouts[0];\n      if (!firstWorkout || !firstWorkout.startTime) {\n        return '×”××™××•×Ÿ ×”×ª×—×™×œ!';\n      }\n      \n      // ×™×¦×™×¨×ª ×ª××¨×™×š ××œ× ×¢× ×©×¢×” (×‘×©×™××•×© ×–××Ÿ ××§×•××™)\n      const [hours, minutes] = firstWorkout.startTime.split(':');\n      const workoutTime = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(hours), parseInt(minutes));\n      const now = new Date();\n      \n      const diffMs = workoutTime.getTime() - now.getTime();\n      \n      if (diffMs <= 0) {\n        return '×”××™××•×Ÿ ×”×ª×—×™×œ!';\n      }\n      \n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n      const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n      \n      if (diffDays > 0) {\n        return `×”××™××•×Ÿ ××ª×—×™×œ ×‘×¢×•×“ ${diffDays} ×™××™×`;\n      } else if (diffHours > 0) {\n        return `×”××™××•×Ÿ ××ª×—×™×œ ×‘×¢×•×“ ${diffHours} ×©×¢×•×ª ×•-${diffMinutes} ×“×§×•×ª`;\n      } else {\n        return `×”××™××•×Ÿ ××ª×—×™×œ ×‘×¢×•×“ ${diffMinutes} ×“×§×•×ª`;\n      }\n    } catch (error) {\n      console.error('×©×’×™××” ×‘×—×™×©×•×‘ ×”×¡×¤×™×¨×” ××—×•×¨×”:', error);\n      return '×”××™××•×Ÿ ××ª×—×™×œ ×‘×§×¨×•×‘';\n    }\n  };\n\n  const handleCancelWorkout = (workoutGroup) => {\n    // ×”×¦×’×ª ×“×™××œ×•×’ ××™×©×•×¨\n    setWorkoutToCancel(workoutGroup);\n    setShowCancelConfirm(true);\n  };\n\n  const confirmCancelWorkout = async () => {\n    try {\n      console.log('××‘×˜×œ ××™××•×Ÿ:', workoutToCancel);\n      \n      if (!user || !user.id) {\n        setError('××©×ª××© ×œ× ××—×•×‘×¨');\n        return;\n      }\n\n      // ×™×¦×™×¨×ª ×¨×©×™××ª ×”×–×× ×•×ª ×œ××—×™×§×”\n      const bookingsToDelete = workoutToCancel.map(workout => ({\n        idField: workout.fieldId,\n        bookingDate: workout.date,\n        startTime: workout.startTime,\n        idUser: user.id\n      }));\n\n      console.log('××—×™×§×ª ×”×–×× ×•×ª:', bookingsToDelete);\n\n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_BASE_URL}/api/cancel-workout`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          userId: user.id,\n          bookings: bookingsToDelete\n        })\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        console.log('××™××•×Ÿ ×‘×•×˜×œ ×‘×”×¦×œ×—×”');\n        // ×¡×’×™×¨×ª ×“×™××œ×•×’ ×”××™×©×•×¨\n        setShowCancelConfirm(false);\n        setWorkoutToCancel(null);\n        // ×¨×¢× ×•×Ÿ ×¨×©×™××ª ×”××™××•× ×™×\n        window.location.reload();\n      } else {\n        console.error('×©×’×™××” ×‘×‘×™×˜×•×œ ×”××™××•×Ÿ:', data.message);\n        setError(data.message || '×©×’×™××” ×‘×‘×™×˜×•×œ ×”××™××•×Ÿ');\n        setShowCancelConfirm(false);\n        setWorkoutToCancel(null);\n      }\n    } catch (error) {\n      console.error('×©×’×™××” ×‘×‘×™×˜×•×œ ×”××™××•×Ÿ:', error);\n      setError('×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×©×¨×ª. × ×¡×” ×©×•×‘.');\n      setShowCancelConfirm(false);\n      setWorkoutToCancel(null);\n    }\n  };\n\n  const cancelCancelWorkout = () => {\n    setShowCancelConfirm(false);\n    setWorkoutToCancel(null);\n  };\n\n  const handleBookNewWorkout = () => {\n    console.log('××¢×‘×¨ ×œ×”×–×× ×ª ××™××•×Ÿ ×—×“×©');\n    // ××¢×‘×¨ ×œ××¡×š ×”×–×× ×ª ××™××•×Ÿ\n    navigate('/workout-booking');\n  };\n\n  return (\n    <div className=\"start-workout-container\">\n      <button className=\"back-button\" onClick={() => navigate('/main-menu')}>\n        ×—×–×¨×”\n      </button>\n      \n      <div className=\"start-workout-content\">\n        <h1>×”××™××•× ×™× ×©×œ×š</h1>\n        \n        {/* ×—×œ×•×Ÿ ××™××•×Ÿ × ×•×›×—×™ */}\n        {currentWorkout && (\n          <div className=\"current-workout-section\">\n            <h2 className=\"current-workout-title\">ğŸƒâ€â™‚ï¸ ××™××•×Ÿ × ×•×›×—×™</h2>\n            <div className=\"current-workout-card\">\n              <div className=\"current-workout-info\">\n                <div className=\"current-field\">\n                  <span className=\"field-label\">××’×¨×© × ×•×›×—×™:</span>\n                  <span className=\"field-name\">{currentWorkout.currentField?.fieldName || '×œ× ×–××™×Ÿ'}</span>\n                </div>\n                <div className=\"current-time\">\n                  <span className=\"time-label\">×–××Ÿ × ×•×›×—×™:</span>\n                  <span className=\"time-value\">{new Date().toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' })}</span>\n                </div>\n                <div className=\"workout-duration\">\n                  <span className=\"duration-label\">××©×š ×”××™××•×Ÿ:</span>\n                  <span className=\"duration-value\">{currentWorkout.startTime} - {currentWorkout.endTime}</span>\n                </div>\n              </div>\n              <div className=\"current-workout-actions\">\n                <button \n                  className=\"cancel-current-workout-btn\"\n                  onClick={() => handleCancelWorkout(currentWorkout.workoutGroup)}\n                >\n                  ×‘×˜×œ ××™××•×Ÿ × ×•×›×—×™\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {loading ? (\n          <div className=\"loading\">\n            <p>×˜×•×¢×Ÿ ××ª ×”××™××•× ×™× ×©×œ×š ××”××¢×¨×›×ª...</p>\n          </div>\n        ) : error ? (\n          <div className=\"no-workouts\">\n            <p>×©×’×™××”: {error}</p>\n            <button className=\"no-workouts-button\" onClick={() => window.location.reload()}>\n              × ×¡×” ×©×•×‘\n            </button>\n          </div>\n        ) : workouts.length === 0 ? (\n          <div className=\"no-workouts\">\n            <p>××™×Ÿ ×œ×š ××™××•× ×™× ×¢×ª×™×“×™×™× ××ª×•×›× × ×™×</p>\n            <button className=\"no-workouts-button\" onClick={handleBookNewWorkout}>\n              ×”×–××Ÿ ××™××•×Ÿ ×—×“×©\n            </button>\n          </div>\n        ) : (\n          <div className=\"workouts-list\">\n            {Object.entries(workoutsByField).map(([dateKey, workoutGroups]) => (\n              <div key={dateKey} className=\"date-section\">\n                <h2 className=\"date-title\">×ª××¨×™×š: {formatDate(dateKey)}</h2>\n                \n                {workoutGroups.map((workoutGroup, groupIndex) => {\n                  const firstWorkout = workoutGroup[0];\n                  const lastWorkout = workoutGroup[workoutGroup.length - 1];\n                  const totalDuration = workoutGroup.length * 15; // ×›×œ ×©×™×‘×•×¥ ×”×•× 15 ×“×§×•×ª\n                  \n                  return (\n                    <div key={groupIndex} className=\"workout-session\">\n                      <div className=\"workout-session-header\">\n                        <div className=\"workout-time-range\">\n                          {formatTime(firstWorkout.startTime)} - {formatTime(lastWorkout.endTime)} ({totalDuration} ×“×§×•×ª)\n                        </div>\n                      </div>\n                      \n                      <div className=\"workout-schedule\">\n                        <h4>×œ×•×— ×–×× ×™×:</h4>\n                        <div className=\"time-slots\">\n                          {workoutGroup.map((slot, index) => {\n                            const startTime = slot.startTime;\n                            const endTime = slot.endTime;\n                            const isValidTime = startTime && endTime && startTime !== endTime;\n                            \n                            return (\n                              <div key={index} className=\"time-slot\">\n                                <span className=\"time\">\n                                  {isValidTime ? `${formatTime(startTime)} - ${formatTime(endTime)}` : `${formatTime(startTime)} (15 ×“×§×•×ª)`}\n                                </span>\n                                <span className=\"field\">{slot.fieldName}</span>\n                                <span className=\"sport\">{slot.sportType}</span>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                      \n                      <CountdownTimer \n                        targetDate={dateKey}\n                        targetTime={firstWorkout.startTime}\n                        workoutGroup={workoutGroup}\n                        onComplete={() => console.log('××™××•×Ÿ ×”×•×©×œ×:', `${dateKey}_${groupIndex}`)}\n                      />\n                      {/* ××¦×™×’ ×›×¤×ª×•×¨ ×¨×§ ×× ×–×” ×”×™×•× */}\n                      {(() => {\n                        const today = new Date();\n                        \n                        // ×—×™×œ×•×¥ ×ª××¨×™×š ××”××—×¨×•×–×ª UTC\n                        let dateString;\n                        if (dateKey.includes('T')) {\n                          // ×× ×–×” ×¤×•×¨××˜ UTC, × ×—×œ×¥ ×¨×§ ××ª ×”×—×œ×§ ×©×œ ×”×ª××¨×™×š\n                          dateString = dateKey.split('T')[0];\n                        } else {\n                          // ×× ×–×” ×›×‘×¨ ×¤×•×¨××˜ YYYY-MM-DD\n                          dateString = dateKey;\n                        }\n                        \n                        // ×™×¦×™×¨×ª ×ª××¨×™×š ××§×•××™ ××”××—×¨×•×–×ª YYYY-MM-DD\n                        const [year, month, day] = dateString.split('-');\n                        const workoutDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n                        \n                        today.setHours(0, 0, 0, 0);\n                        workoutDate.setHours(0, 0, 0, 0);\n                        const isToday = today.getTime() === workoutDate.getTime();\n                        \n                        return isToday ? (\n                          <button \n                            className=\"cancel-workout-btn\"\n                            onClick={() => handleCancelWorkout(workoutGroup)}\n                            style={{ marginTop: '15px' }}\n                          >\n                            ×‘×˜×œ ××™××•×Ÿ\n                          </button>\n                        ) : (\n                          <button \n                            className=\"cancel-workout-btn\"\n                            onClick={() => handleCancelWorkout(workoutGroup)}\n                            style={{ marginTop: '15px' }}\n                          >\n                            ×‘×˜×œ ××™××•×Ÿ\n                          </button>\n                        );\n                      })()}\n                    </div>\n                  );\n                })}\n              </div>\n            ))}\n            \n\n          </div>\n        )}\n      </div>\n\n      {/* ×“×™××œ×•×’ ××™×©×•×¨ ×‘×™×˜×•×œ ××™××•×Ÿ */}\n      {showCancelConfirm && (\n        <div className=\"confirm-dialog-overlay\">\n          <div className=\"confirm-dialog\">\n            <div className=\"confirm-dialog-header\">\n              <h3>××™×©×•×¨ ×‘×™×˜×•×œ ××™××•×Ÿ</h3>\n            </div>\n            <div className=\"confirm-dialog-body\">\n              <p>×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”××™××•×Ÿ?</p>\n              <p className=\"confirm-dialog-warning\">\n                âš ï¸ ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ\n              </p>\n            </div>\n            <div className=\"confirm-dialog-actions\">\n              <button \n                className=\"confirm-btn cancel-btn\"\n                onClick={cancelCancelWorkout}\n              >\n                ×œ×, ×©××•×¨ ×¢×œ ×”××™××•×Ÿ\n              </button>\n              <button \n                className=\"confirm-btn confirm-cancel-btn\"\n                onClick={confirmCancelWorkout}\n              >\n                ×›×Ÿ, ×‘×˜×œ ××ª ×”××™××•×Ÿ\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StartWorkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}